<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Surah Al-'Ankabut</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600&family=Noto+Naskh+Arabic:wght@400;700&family=Noto+Nastaliq+Urdu:wght@400;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.png" type="image/x-icon">

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      color: #333;
      transition: background-color 0.5s ease, color 0.5s ease;
    }
    body.dark-mode {
      background-color: #1a1a1a;
      color: #e0e0e0;
    }

    #progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 4px;
      background-color: #007b5e;
      z-index: 1001;
      transition: width 0.25s ease;
    }

    .dark-mode #progress-bar {
      background-color: #0c8;
    }

    .navbar {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background-color: #f0f0f0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: background-color 0.5s ease;
    }

    .dark-mode .navbar { background-color: #2c2c2c; }

    .nav-links {
      display: flex;
      align-items: center;
    }

    .nav-links a {
      margin-left: 1rem;
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }

    .dark-mode .nav-links a { color: #e0e0e0; }

    .nav-links a:hover {
      color: #007b5e;
    }

    .theme-toggle {
      cursor: pointer;
      margin-left: 1rem;
      background-color: transparent;
      border: none;
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
    }

    .theme-toggle img {
      width: 24px;
      height: 24px;
      transition: transform 0.3s ease;
    }

    .theme-toggle img.rotate {
      transform: rotate(180deg);
    }

    .menu-toggle {
      display: none;
      cursor: pointer;
      background-color: transparent;
      border: none;
      padding: 0.4rem 0.6rem;
    }

    .menu-toggle img {
      width: 24px;
      height: 24px;
    }

    .container {
      padding: 2rem 1rem;
      max-width: 800px;
      margin: auto;
    }

    .surah-info {
      text-align: center;
      margin-bottom: 2rem;
    }

    .surah-info h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      font-family: 'Amiri', serif;
    }

    .meaning {
      font-style: italic;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    .dark-mode .meaning { color: #bbb; }

    .meta {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #888;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    .dark-mode .meta { color: #aaa; }

    .bismillah {
      margin-top: 1.5rem;
      font-size: 1.5rem;
      color: #007b5e;
      font-weight: bold;
      font-family: 'Amiri', serif;
    }

    .dark-mode .bismillah { color: #0c8; }

    .ayah {
      background-color: #fff;
      padding: 1rem 3rem 1rem 1rem;
      margin-bottom: 1rem;
      border-left: 4px solid #007b5e;
      border-radius: 6px;
      position: relative;
    }

    .dark-mode .ayah {
      background-color: #2c2c2c;
      border-left-color: #0c8;
    }

    .ayah-number {
      font-size: 0.9rem;
      color: #007b5e;
      margin-bottom: 0.4rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .ayah-number { color: #0c8; }

    .arabic {
      font-size: 1.8rem;
      text-align: right;
      direction: rtl;
      font-family: 'Amiri', serif;
    }

    .translation {
      margin-top: 0.5rem;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .translation.ur {
      text-align: right;
      direction: rtl;
      font-family: 'Noto Nastaliq Urdu', serif;
    }

    .dark-mode .translation { color: #ccc; }

    .transliteration {
      margin-top: 0.5rem;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      font-style: italic;
    }

    .dark-mode .transliteration { color: #ccc; }

    .verse-icon {
      display: inline-block;
      font-size: 1.2rem;
      margin-left: 0.5rem;
      vertical-align: middle;
      color: #007b5e;
      font-family: 'Amiri', serif;
    }

    .dark-mode .verse-icon {
      color: #0c8;
    }

    .share-icon {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 24px;
      height: 24px;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .share-icon:hover {
      opacity: 1;
    }

    .favorite-btn, .bookmark-btn {
      position: absolute;
      top: 1rem;
      width: 24px;
      height: 24px;
      background: none;
      border: none;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .favorite-btn:hover, .bookmark-btn:hover {
      opacity: 1;
    }

    .favorite-btn {
      right: 4rem;
    }

    .bookmark-btn {
      right: 7rem;
    }

    .share-icon {
      right: 1rem;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }

    .navigation a {
      color: #007b5e;
      text-decoration: none;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .navigation a { color: #0c8; }

    .tabs {
      display: flex;
      justify-content: center;
      margin-top: 1rem;
      gap: 1rem;
    }

    .tab-button {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .tab-button.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .tab-button {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .tab-button.active {
      background-color: #0c8;
    }

    .transliteration-toggle {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
      margin-top: 1rem;
    }

    .transliteration-toggle.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .transliteration-toggle {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .transliteration-toggle.active {
      background-color: #0c8;
    }

    .lang-select, .audio-select {
      margin-top: 1rem;
      text-align: center;
    }

    .lang-select label, .audio-select label {
      margin-right: 0.5rem;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
    }

    .dark-mode .lang-select label, .dark-mode .audio-select label {
      color: #e0e0e0;
    }

    .lang-select select, .audio-select select {
      padding: 0.6rem 2rem 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23007b5e" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .audio-select button {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
      margin-left: 0.5rem;
    }

    .audio-select button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .audio-select button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .dark-mode .audio-select button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    .dark-mode .lang-select select, .dark-mode .audio-select select {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%230c8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
    }

    .lang-select select:hover, .audio-select select:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .lang-select select:hover, .dark-mode .audio-select select:hover {
      border-color: #0a6;
    }

    .lang-select select:focus, .audio-select select:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .lang-select select:focus, .dark-mode .audio-select select:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .hidden { display: none; }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 90%;
      position: relative;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .dark-mode .modal-content {
      background-color: #2c2c2c;
      color: #e0e0e0;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
    }

    .modal-content iframe {
      border-radius: 8px;
      border: none;
      width: 100%;
      height: 60px;
    }

    .modal-content button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #007b5e;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    .modal-content button:hover {
      background-color: #005f4a;
    }

    .dark-mode .modal-content button {
      background-color: #0c8;
    }

    .dark-mode .modal-content button:hover {
      background-color: #0a6;
    }

        .go-to-verse {
      margin-top: 1rem;
      text-align: center;
    }

    .go-to-verse label {
      margin-right: 0.5rem;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
    }

    .dark-mode .go-to-verse label {
      color: #e0e0e0;
    }

    .go-to-verse input {
      padding: 0.6rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      width: 80px;
      text-align: center;
    }

    .dark-mode .go-to-verse input {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
    }

    .go-to-verse input:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .go-to-verse input:hover {
      border-color: #0a6;
    }

    .go-to-verse input:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .go-to-verse input:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .go-to-verse button {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
      margin-left: 0.5rem;
    }

    .go-to-verse button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .go-to-verse button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .dark-mode .go-to-verse button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    /* Scroll to Top Button */
    #scrollToTop {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background-color: #007b5e;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease, background-color 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    #scrollToTop:hover {
      background-color: #005f4a;
    }

    #scrollToTop.show {
      opacity: 1;
      visibility: visible;
    }

    .dark-mode #scrollToTop {
      background-color: #0c8;
    }

    .dark-mode #scrollToTop:hover {
      background-color: #0a6;
    }

    /* Share Modal Styling */
    .modal-content h2 {
      margin-top: 0;
      color: #333;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .modal-content h2 {
      color: #e0e0e0;
    }

    .modal-content div {
      margin-bottom: 1rem;
      text-align: left;
    }

    .modal-content label {
      display: flex;
      align-items: center;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
      cursor: pointer;
    }

    .dark-mode .modal-content label {
      color: #e0e0e0;
    }

    .modal-content input[type="checkbox"] {
      margin-right: 0.5rem;
      width: 18px;
      height: 18px;
      border: 2px solid #007b5e;
      border-radius: 4px;
      background-color: #fff;
      cursor: pointer;
      transition: border-color 0.3s ease, background-color 0.3s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .modal-content input[type="checkbox"]:checked {
      background-color: #007b5e;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="12" height="12"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>');
      background-repeat: no-repeat;
      background-position: center;
    }

    .dark-mode .modal-content input[type="checkbox"] {
      background-color: #2c2c2c;
      border-color: #0c8;
    }

    .dark-mode .modal-content input[type="checkbox"]:checked {
      background-color: #0c8;
      border-color: #0c8;
    }

    .modal-content select {
      padding: 0.6rem 2rem 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23007b5e" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .modal-content select:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .modal-content select {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%230c8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
    }

    .dark-mode .modal-content select:hover {
      border-color: #0a6;
    }

    .modal-content select:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .modal-content select:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .modal-content button {
      margin-top: 1rem;
      margin-right: 0.5rem;
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
    }

    .modal-content button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .modal-content button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .modal-content button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    .modal-content input[type="text"] {
      padding: 0.6rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      width: 100%;
      box-sizing: border-box;
    }

    .modal-content input[type="text"]:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .modal-content input[type="text"] {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
    }

    .dark-mode .modal-content input[type="text"]:hover {
      border-color: #0a6;
    }

    .modal-content input[type="text"]:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .modal-content input[type="text"]:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    @media (max-width: 600px) {
      .navbar h1 {
        font-size: 1.25rem;
      }

      .nav-links {
        display: none;
        flex-direction: column;
        width: 100%;
        background-color: #f0f0f0;
        position: absolute;
        top: 60px;
        left: 0;
        padding: 1rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        z-index: 1000;
      }

      .dark-mode .nav-links {
        background-color: #2c2c2c;
      }

      .nav-links.active {
        display: flex;
      }

      .nav-links a {
        margin: 0.5rem 0;
        font-size: 1.1rem;
      }

      .theme-toggle {
        margin: 0;
      }

      .menu-toggle {
        display: block;
      }

      .lang-select select, .audio-select select {
        padding: 0.5rem 1.8rem 0.5rem 0.8rem;
        font-size: 0.9rem;
        background-size: 16px;
      }

      .surah-info h1 {
        font-size: 1.5rem;
      }

      .bismillah {
        font-size: 1.3rem;
      }

      .arabic {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div id="progress-bar"></div>
  <!-- Navbar -->
  <nav class="navbar">
    <h1>MuslimBro1400</h1>
    <button class="menu-toggle" onclick="toggleMenu()">
      <img src="menu.png" alt="Menu" />
    </button>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="quran.html">Quran</a>
      <a href="hadith.html">Hadith</a>
      <a href="islamic-books.html">Islamic Books</a>
      <a href="quran-recitations.html">Quran Recitations</a>
      <a href="about.html">About</a>
      <button class="theme-toggle" onclick="toggleTheme()">
        <img id="theme-icon" src="moon.png" alt="Toggle Theme" title="Toggle light/dark mode" />
      </button>
    </div>
  </nav>

  <!-- Content -->
  <div class="container">
    <div class="surah-info">
      <h1>Surah Al-'Ankabut (سورة العنكبوت)</h1>
      <p class="meaning">Meaning: The Spider</p>
      <p class="meta">Mecca - 69 Verses</p>
      
      <div class="audio-select">
        <label for="reciter">Reciter:</label>
        <select id="reciter" onchange="changeReciter()">
          <option value="saadalghamdi">Saad Al Ghamdi</option>
        </select>
        <br><br>
        <button id="playButton" onclick="playAudio()">Play Audio</button>
      </div>
      
      <p class="bismillah">بِسْمِ اللَّهِ الرَّحْمَـٰنِ الرَّحِيمِ</p>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab-button active" onclick="switchTab('read')">Read</button>
        <button class="tab-button" onclick="switchTab('translate')">Translation</button>
      </div>

            <!-- Transliteration Toggle -->
      <button id="transliteration-toggle" class="transliteration-toggle" onclick="toggleTransliteration()">Show Transliteration</button>

               <!-- Go to Verse -->
      <div class="go-to-verse">
        <label for="verse-number">Go to Verse:</label>
        <input type="number" id="verse-number" min="1" max="69">
        <button onclick="goToVerse()">Go</button>
      </div>

      <div class="navigation">
        <a href="al-qasas.html">← Surah Al-Qasas</a>
        <a href="ar-rum.html">Next: Surah Ar-Rum →</a>
      </div>

      <!-- Language Selector -->
      <div class="lang-select hidden" id="languageSelector">
        <label for="language">Translation Language:</label>
        <select id="language" onchange="renderTranslation()"></select>
      </div>
    </div>

    <!-- Arabic Tab -->
    <div id="read-tab"></div>

    <!-- Translation Tab -->
    <div id="translate-tab" class="hidden"></div>

    <div class="navigation">
      <a href="al-qasas.html">← Surah Al-Qasas</a>
      <a href="ar-rum.html">Next: Surah Ar-Rum →</a>
    </div>
  </div>

    <!-- Audio Modal -->
  <div id="audioModal" class="modal" style="display: none;">
    <div class="modal-content">
      <iframe src="https://archive.org/embed/029_20260102" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen></iframe>
      <br><br>
      <button onclick="closeModal()">Close</button>
    </div>
  </div>

    <!-- Share Modal -->
  <div id="shareModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Share Ayah Options</h2>
      <div>
        <label><input type="checkbox" id="includeTransliteration"> Include Transliteration</label>
      </div>
      <div>
        <label><input type="checkbox" id="includeTranslation" onchange="toggleLanguageSelect()"> Include Translation</label>
      </div>
      <div id="languageSelectDiv" style="display: none;">
        <label for="shareLanguage">Translation Language:</label>
        <select id="shareLanguage">
          <option value="en">English</option>
          <option value="ur">Urdu</option>
        </select>
      </div>
      <br>
      <div id="shareMessage" style="display: none; margin-top: 1rem; text-align: center; font-weight: bold;"></div>
      <button onclick="generateAndCopyText()">Copy Text</button>
      <button onclick="closeShareModal()">Cancel</button>
    </div>
  </div>

      <!-- Scroll to Top Button -->
  <button id="scrollToTop" onclick="scrollToTop()">↑</button>

  <script>
    const unfavoriteSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0c8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`;
    const favoriteSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="#0c8" stroke="#0c8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`;
    const unbookmarkedSVG = `<svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="#00CC88" stroke-width="66.66" stroke-miterlimit="10" d="M166.7,206.7c0-37.3,0-56,7.3-70.3c6.4-12.5,16.6-22.7,29.1-29.1c14.3-7.3,32.9-7.3,70.3-7.3h253.3c37.3,0,56,0,70.3,7.3c12.5,6.4,22.7,16.6,29.1,29.1c7.3,14.3,7.3,32.9,7.3,70.3V700L400,533.3L166.7,700V206.7z"/></svg>`;
    const bookmarkedSVG = `<svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#00CC88" d="M166.7,206.7c0-37.3,0-56,7.3-70.3c6.4-12.5,16.6-22.7,29.1-29.1c14.3-7.3,32.9-7.3,70.3-7.3h253.3c37.3,0,56,0,70.3,7.3c12.5,6.4,22.7,16.6,29.1,29.1c7.3,14.3,7.3,32.9,7.3,70.3V700L400,533.3L166.7,700V206.7z"/></svg>`;

    const ayahs = [
      {
        arabic: "الم",
        en: "Alif-Lãm-Mĩm.",
        ur: ""
      },
      {
        arabic: "أَحَسِبَ النّاسُ أَن يُترَكوا أَن يَقولوا آمَنّا وَهُم لا يُفتَنونَ",
        en: "Do people think once they say, “We believe,” that they will be left without being put to the test?",
        ur: ""
      },
      {
        arabic: "وَلَقَد فَتَنَّا الَّذينَ مِن قَبلِهِم ۖ فَلَيَعلَمَنَّ اللَّهُ الَّذينَ صَدَقوا وَلَيَعلَمَنَّ الكاذِبينَ",
        en: "We certainly tested those before them. And ˹in this way˺ Allah will clearly distinguish between those who are truthful and those who are liars.",
        ur: ""
      },
      {
        arabic: "أَم حَسِبَ الَّذينَ يَعمَلونَ السَّيِّئَاتِ أَن يَسبِقونا ۚ ساءَ ما يَحكُمونَ",
        en: "Or do the evildoers ˹simply˺ think that they will escape Us? How wrong is their judgment!",
        ur: ""
      },
      {
        arabic: "مَن كانَ يَرجو لِقاءَ اللَّهِ فَإِنَّ أَجَلَ اللَّهِ لَآتٍ ۚ وَهُوَ السَّميعُ العَليمُ",
        en: "Whoever hopes for the meeting with Allah, ˹let them know that˺ Allah’s appointed time is sure to come. He is the All-Hearing, All-Knowing.",
        ur: ""
      },
      {
        arabic: "وَمَن جاهَدَ فَإِنَّما يُجاهِدُ لِنَفسِهِ ۚ إِنَّ اللَّهَ لَغَنِيٌّ عَنِ العالَمينَ",
        en: "And whoever strives ˹in Allah’s cause˺, only does so for their own good. Surely Allah is not in need of ˹any of˺ His creation.",
        ur: ""
      },
      {
        arabic: "وَالَّذينَ آمَنوا وَعَمِلُوا الصّالِحاتِ لَنُكَفِّرَنَّ عَنهُم سَيِّئَاتِهِم وَلَنَجزِيَنَّهُم أَحسَنَ الَّذي كانوا يَعمَلونَ",
        en: "As for those who believe and do good, We will certainly absolve them of their sins, and reward them according to the best of what they used to do.",
        ur: ""
      },  
      {
        arabic: "وَوَصَّينَا الإِنسانَ بِوالِدَيهِ حُسنًا ۖ وَإِن جاهَداكَ لِتُشرِكَ بي ما لَيسَ لَكَ بِهِ عِلمٌ فَلا تُطِعهُما ۚ إِلَيَّ مَرجِعُكُم فَأُنَبِّئُكُم بِما كُنتُم تَعمَلونَ",
        en: "We have commanded people to honour their parents. But if they urge you to associate with Me what you have no knowledge of, then do not obey them. To Me you will ˹all˺ return, and then I will inform you of what you used to do.",
        ur: ""
      },
      {
        arabic: "وَالَّذينَ آمَنوا وَعَمِلُوا الصّالِحاتِ لَنُدخِلَنَّهُم فِي الصّالِحينَ",
        en: "Those who believe and do good will surely be admitted by Us into ˹the company of˺ the righteous.",
        ur: ""
      },
      {
        arabic: "وَمِنَ النّاسِ مَن يَقولُ آمَنّا بِاللَّهِ فَإِذا أوذِيَ فِي اللَّهِ جَعَلَ فِتنَةَ النّاسِ كَعَذابِ اللَّهِ وَلَئِن جاءَ نَصرٌ مِن رَبِّكَ لَيَقولُنَّ إِنّا كُنّا مَعَكُم ۚ أَوَلَيسَ اللَّهُ بِأَعلَمَ بِما في صُدورِ العالَمينَ",
        en: "There are some who say, “We believe in Allah,” but when they suffer in the cause of Allah, they mistake ˹this˺ persecution at the hands of people for the punishment of Allah. But when victory comes from your Lord, they surely say ˹to the believers˺, “We have always been with you.” Does Allah not know best what is in the hearts of all beings?",
        ur: ""
      },
      {
        arabic: "وَلَيَعلَمَنَّ اللَّهُ الَّذينَ آمَنوا وَلَيَعلَمَنَّ المُنافِقينَ",
        en: "Allah will certainly distinguish between those who have ˹sure˺ faith and the hypocrites.",
        ur: ""
      },
      {
        arabic: "وَقالَ الَّذينَ كَفَروا لِلَّذينَ آمَنُوا اتَّبِعوا سَبيلَنا وَلنَحمِل خَطاياكُم وَما هُم بِحامِلينَ مِن خَطاياهُم مِن شَيءٍ ۖ إِنَّهُم لَكاذِبونَ",
        en: "The disbelievers say to the believers, “˹Just˺ follow our way, and we will bear ˹the burden of˺ your sins.” But they would never ˹want to˺ bear any of the believers’ sins. They are simply lying.",
        ur: ""
      },
      {
        arabic: "وَلَيَحمِلُنَّ أَثقالَهُم وَأَثقالًا مَعَ أَثقالِهِم ۖ وَلَيُسأَلُنَّ يَومَ القِيامَةِ عَمّا كانوا يَفتَرونَ",
        en: "Yet they will certainly ˹be made to˺ carry their own burdens, as well as other burdens along with their own. And they will surely be questioned on Judgment Day about what they used to fabricate.",
        ur: ""
      },
      {
        arabic: "وَلَقَد أَرسَلنا نوحًا إِلىٰ قَومِهِ فَلَبِثَ فيهِم أَلفَ سَنَةٍ إِلّا خَمسينَ عامًا فَأَخَذَهُمُ الطّوفانُ وَهُم ظالِمونَ",
        en: "Indeed, We sent Noah to his people, and he remained among them for a thousand years, less fifty. Then the Flood overtook them, while they persisted in wrongdoing.”",
        ur: ""
      },
      {
        arabic: "فَأَنجَيناهُ وَأَصحابَ السَّفينَةِ وَجَعَلناها آيَةً لِلعالَمينَ",
        en: "But We delivered him and those in the Ark, making it a sign for all people.",
        ur: ""
      },
      {
        arabic: "وَإِبراهيمَ إِذ قالَ لِقَومِهِ اعبُدُوا اللَّهَ وَاتَّقوهُ ۖ ذٰلِكُم خَيرٌ لَكُم إِن كُنتُم تَعلَمونَ",
        en: "And ˹remember˺ when Abraham said to his people, “Worship Allah, and fear Him. This is better for you, if only you knew.",
        ur: ""
      },
      {
        arabic: "إِنَّما تَعبُدونَ مِن دونِ اللَّهِ أَوثانًا وَتَخلُقونَ إِفكًا ۚ إِنَّ الَّذينَ تَعبُدونَ مِن دونِ اللَّهِ لا يَملِكونَ لَكُم رِزقًا فَابتَغوا عِندَ اللَّهِ الرِّزقَ وَاعبُدوهُ وَاشكُروا لَهُ ۖ إِلَيهِ تُرجَعونَ",
        en: "You worship besides Allah nothing but idols, simply creating lies ˹about them˺. Those you worship besides Allah certainly cannot give you any provision. So seek provision from Allah ˹alone˺, worship Him, and be grateful to Him. To Him you will ˹all˺ be returned.",
        ur: ""
      },
      {
        arabic: "وَإِن تُكَذِّبوا فَقَد كَذَّبَ أُمَمٌ مِن قَبلِكُم ۖ وَما عَلَى الرَّسولِ إِلَّا البَلاغُ المُبينُ",
        en: "If you ˹Meccans˺ persist in denial, so did ˹many˺ communities before you. The Messenger’s duty is only to deliver ˹the message˺ clearly.”",
        ur: ""
      },
      {
        arabic: "أَوَلَم يَرَوا كَيفَ يُبدِئُ اللَّهُ الخَلقَ ثُمَّ يُعيدُهُ ۚ إِنَّ ذٰلِكَ عَلَى اللَّهِ يَسيرٌ",
        en: "Have they not seen how Allah originates the creation then resurrects it? That is certainly easy for Allah.",
        ur: ""
      },
      {
        arabic: "قُل سيروا فِي الأَرضِ فَانظُروا كَيفَ بَدَأَ الخَلقَ ۚ ثُمَّ اللَّهُ يُنشِئُ النَّشأَةَ الآخِرَةَ ۚ إِنَّ اللَّهَ عَلىٰ كُلِّ شَيءٍ قَديرٌ",
        en: "Say, ˹O Prophet,˺ “Travel throughout the land and see how He originated the creation, then Allah will bring it into being one more time. Surely Allah is Most Capable of everything.",
        ur: ""
      },
      {
        arabic: "يُعَذِّبُ مَن يَشاءُ وَيَرحَمُ مَن يَشاءُ ۖ وَإِلَيهِ تُقلَبونَ",
        en: "He punishes whoever He wills, and shows mercy to whoever He wills. And you will ˹all˺ be returned to Him.",
        ur: ""
      },
      {
        arabic: "وَما أَنتُم بِمُعجِزينَ فِي الأَرضِ وَلا فِي السَّماءِ ۖ وَما لَكُم مِن دونِ اللَّهِ مِن وَلِيٍّ وَلا نَصيرٍ",
        en: "And you cannot escape Him on earth or in heaven. Nor have you any protector or helper besides Allah.”",
        ur: ""
      },
      {
        arabic: "وَالَّذينَ كَفَروا بِآياتِ اللَّهِ وَلِقائِهِ أُولٰئِكَ يَئِسوا مِن رَحمَتي وَأُولٰئِكَ لَهُم عَذابٌ أَليمٌ",
        en: "As for those who disbelieve in Allah’s signs and the meeting with Him, it is they who will have no hope in His mercy. And it is they who will suffer a painful punishment.",
        ur: ""
      },
      {
        arabic: "فَما كانَ جَوابَ قَومِهِ إِلّا أَن قالُوا اقتُلوهُ أَو حَرِّقوهُ فَأَنجاهُ اللَّهُ مِنَ النّارِ ۚ إِنَّ في ذٰلِكَ لَآياتٍ لِقَومٍ يُؤمِنونَ",
        en: "But the only response of Abraham’s people was to say: “Kill him or burn him!” But Allah saved him from the fire. Surely in this are signs for people who believe.",
        ur: ""
      },
      {
        arabic: "وَقالَ إِنَّمَا اتَّخَذتُم مِن دونِ اللَّهِ أَوثانًا مَوَدَّةَ بَينِكُم فِي الحَياةِ الدُّنيا ۖ ثُمَّ يَومَ القِيامَةِ يَكفُرُ بَعضُكُم بِبَعضٍ وَيَلعَنُ بَعضُكُم بَعضًا وَمَأواكُمُ النّارُ وَما لَكُم مِن ناصِرينَ",
        en: "He said ˹to his people˺, “You have taken idols ˹for worship˺ instead of Allah, only to keep ˹the bond of˺ harmony among yourselves in this worldly life. But on the Day of Judgment you will disown and curse one another. Your home will be the Fire, and you will have no helper!”",
        ur: ""
      },
      {
        arabic: "۞ فَآمَنَ لَهُ لوطٌ ۘ وَقالَ إِنّي مُهاجِرٌ إِلىٰ رَبّي ۖ إِنَّهُ هُوَ العَزيزُ الحَكيمُ",
        en: "So Lot believed in him. And Abraham said, “I am emigrating ˹in obedience˺ to my Lord. He ˹alone˺ is indeed the Almighty, All-Wise.”",
        ur: ""
      },
      {
        arabic: "وَوَهَبنا لَهُ إِسحاقَ وَيَعقوبَ وَجَعَلنا في ذُرِّيَّتِهِ النُّبُوَّةَ وَالكِتابَ وَآتَيناهُ أَجرَهُ فِي الدُّنيا ۖ وَإِنَّهُ فِي الآخِرَةِ لَمِنَ الصّالِحينَ",
        en: "We blessed him with Isaac and ˹later˺ Jacob, and reserved prophethood and revelation for his descendants. We gave him his reward in this life, and in the Hereafter he will certainly be among the righteous.",
        ur: ""
      },
      {
        arabic: "وَلوطًا إِذ قالَ لِقَومِهِ إِنَّكُم لَتَأتونَ الفاحِشَةَ ما سَبَقَكُم بِها مِن أَحَدٍ مِنَ العالَمينَ ۙ",
        en: "And ˹remember˺ when Lot rebuked ˹the men of˺ his people: “You certainly commit a shameful deed that no man has ever done before you.",
        ur: ""
      },
      {
        arabic: "أَئِنَّكُم لَتَأتونَ الرِّجالَ وَتَقطَعونَ السَّبيلَ وَتَأتونَ في ناديكُمُ المُنكَرَ ۖ فَما كانَ جَوابَ قَومِهِ إِلّا أَن قالُوا ائتِنا بِعَذابِ اللَّهِ إِن كُنتَ مِنَ الصّادِقينَ",
        en: "Do you really lust after ˹other˺ men, abuse the travellers, and practice immorality ˹openly˺ in your gatherings?” His people’s only response was to say ˹mockingly˺: “Bring Allah’s punishment upon us, if what you say is true.”",
        ur: ""
      },
      {
        arabic: "قالَ رَبِّ انصُرني عَلَى القَومِ المُفسِدينَ",
        en: "Lot prayed, “My Lord! Help me against the people of corruption.”",
        ur: ""
      },
      {
        arabic: "وَلَمّا جاءَت رُسُلُنا إِبراهيمَ بِالبُشرىٰ قالوا إِنّا مُهلِكو أَهلِ هٰذِهِ القَريَةِ ۖ إِنَّ أَهلَها كانوا ظالِمينَ",
        en: "When Our messenger-angels came to Abraham with the good news ˹of the birth of Isaac˺, they said, “We are going to destroy the people of this city ˹of Sodom˺, for its people have persisted in wrongdoing.”",
        ur: ""
      },
      {
        arabic: "قالَ إِنَّ فيها لوطًا ۚ قالوا نَحنُ أَعلَمُ بِمَن فيها ۖ لَنُنَجِّيَنَّهُ وَأَهلَهُ إِلَّا امرَأَتَهُ كانَت مِنَ الغابِرينَ",
        en: "He said, “But Lot is there!” They responded, “We know best who is there. We will certainly save him and his family—except his wife, who is one of the doomed.”",
        ur: ""
      },
      {
        arabic: "وَلَمّا أَن جاءَت رُسُلُنا لوطًا سيءَ بِهِم وَضاقَ بِهِم ذَرعًا وَقالوا لا تَخَف وَلا تَحزَن ۖ إِنّا مُنَجّوكَ وَأَهلَكَ إِلَّا امرَأَتَكَ كانَت مِنَ الغابِرينَ",
        en: "And when Our messenger-angels came to Lot, he was distressed and worried by their arrival. They reassured ˹him˺, “Do not fear, nor grieve. We will surely deliver you and your family—except your wife, who is one of the doomed.",
        ur: ""
      },
      {
        arabic: "إِنّا مُنزِلونَ عَلىٰ أَهلِ هٰذِهِ القَريَةِ رِجزًا مِنَ السَّماءِ بِما كانوا يَفسُقونَ",
        en: "We are certainly bringing down a punishment from heaven upon the people of this city for their rebelliousness.”",
        ur: ""
      },
      {
        arabic: "وَلَقَد تَرَكنا مِنها آيَةً بَيِّنَةً لِقَومٍ يَعقِلونَ",
        en: "And We did leave ˹some of˺ its ruins as a clear lesson for people of understanding.",
        ur: ""
      },
      {
        arabic: "وَإِلىٰ مَديَنَ أَخاهُم شُعَيبًا فَقالَ يا قَومِ اعبُدُوا اللَّهَ وَارجُوا اليَومَ الآخِرَ وَلا تَعثَوا فِي الأَرضِ مُفسِدينَ",
        en: "And to the people of Midian ˹We sent˺ their brother Shu’aib. He said, “O my people! Worship Allah, and hope for ˹the reward of˺ the Last Day. And do not go about spreading corruption in the land.”",
        ur: ""
      },
      {
        arabic: "فَكَذَّبوهُ فَأَخَذَتهُمُ الرَّجفَةُ فَأَصبَحوا في دارِهِم جاثِمينَ",
        en: "But they rejected him, so an ˹overwhelming˺ earthquake struck them and they fell lifeless in their homes.",
        ur: ""
      },
      {
        arabic: "وَعادًا وَثَمودَ وَقَد تَبَيَّنَ لَكُم مِن مَساكِنِهِم ۖ وَزَيَّنَ لَهُمُ الشَّيطانُ أَعمالَهُم فَصَدَّهُم عَنِ السَّبيلِ وَكانوا مُستَبصِرينَ",
        en: "And the people of ’Ȃd and Thamûd ˹met a similar fate˺, which must be clear to you ˹Meccans˺ from their ruins. Satan made their ˹evil˺ deeds appealing to them, hindering them from the ˹Right˺ Way, although they were capable of reasoning.",
        ur: ""
      },
      {
        arabic: "وَقارونَ وَفِرعَونَ وَهامانَ ۖ وَلَقَد جاءَهُم موسىٰ بِالبَيِّناتِ فَاستَكبَروا فِي الأَرضِ وَما كانوا سابِقينَ",
        en: "˹We˺ also ˹destroyed˺ Korah, Pharaoh, and Hamân. Indeed, Moses had come to them with clear proofs, but they behaved arrogantly in the land. Yet they could not escape ˹Us˺.",
        ur: ""
      },
      {
        arabic: "فَكُلًّا أَخَذنا بِذَنبِهِ ۖ فَمِنهُم مَن أَرسَلنا عَلَيهِ حاصِبًا وَمِنهُم مَن أَخَذَتهُ الصَّيحَةُ وَمِنهُم مَن خَسَفنا بِهِ الأَرضَ وَمِنهُم مَن أَغرَقنا ۚ وَما كانَ اللَّهُ لِيَظلِمَهُم وَلٰكِن كانوا أَنفُسَهُم يَظلِمونَ",
        en: "So We seized each ˹people˺ for their sin: against some of them We sent a storm of stones, some were overtaken by a ˹mighty˺ blast, some We caused the earth to swallow, and some We drowned. Allah would not have wronged them, but it was they who wronged themselves.",
        ur: ""
      },
      {
        arabic: "مَثَلُ الَّذينَ اتَّخَذوا مِن دونِ اللَّهِ أَولِياءَ كَمَثَلِ العَنكَبوتِ اتَّخَذَت بَيتًا ۖ وَإِنَّ أَوهَنَ البُيوتِ لَبَيتُ العَنكَبوتِ ۖ لَو كانوا يَعلَمونَ",
        en: "The parable of those who take protectors other than Allah is that of a spider spinning a shelter. And the flimsiest of all shelters is certainly that of a spider, if only they knew.",
        ur: ""
      },
      {
        arabic: "إِنَّ اللَّهَ يَعلَمُ ما يَدعونَ مِن دونِهِ مِن شَيءٍ ۚ وَهُوَ العَزيزُ الحَكيمُ",
        en: "Allah surely knows that whatever ˹gods˺ they invoke besides Him are ˹simply˺ nothing. For He is the Almighty, All-Wise.",
        ur: ""
      },
      {
        arabic: "وَتِلكَ الأَمثالُ نَضرِبُها لِلنّاسِ ۖ وَما يَعقِلُها إِلَّا العالِمونَ",
        en: "These are the parables We set forth for humanity, but none will understand them except the people of knowledge.",
        ur: ""
      },
      {
        arabic: "خَلَقَ اللَّهُ السَّماواتِ وَالأَرضَ بِالحَقِّ ۚ إِنَّ في ذٰلِكَ لَآيَةً لِلمُؤمِنينَ",
        en: "Allah created the heavens and the earth for a purpose. Surely in this is a sign for the people of faith.",
        ur: ""
      },
      {
        arabic: "اتلُ ما أوحِيَ إِلَيكَ مِنَ الكِتابِ وَأَقِمِ الصَّلاةَ ۖ إِنَّ الصَّلاةَ تَنهىٰ عَنِ الفَحشاءِ وَالمُنكَرِ ۗ وَلَذِكرُ اللَّهِ أَكبَرُ ۗ وَاللَّهُ يَعلَمُ ما تَصنَعونَ",
        en: "Recite what has been revealed to you of the Book and establish prayer. Indeed, ˹genuine˺ prayer should deter ˹one˺ from indecency and wickedness. The remembrance of Allah is ˹an˺ even greater ˹deterrent˺. And Allah ˹fully˺ knows what you ˹all˺ do.",
        ur: ""
      },
      {
        arabic: "۞ وَلا تُجادِلوا أَهلَ الكِتابِ إِلّا بِالَّتي هِيَ أَحسَنُ إِلَّا الَّذينَ ظَلَموا مِنهُم ۖ وَقولوا آمَنّا بِالَّذي أُنزِلَ إِلَينا وَأُنزِلَ إِلَيكُم وَإِلٰهُنا وَإِلٰهُكُم واحِدٌ وَنَحنُ لَهُ مُسلِمونَ",
        en: "Do not argue with the People of the Book unless gracefully, except with those of them who act wrongfully. And say, “We believe in what has been revealed to us and what was revealed to you. Our God and your God is ˹only˺ One. And to Him we ˹fully˺ submit.”",
        ur: ""
      },
      {
        arabic: "وَكَذٰلِكَ أَنزَلنا إِلَيكَ الكِتابَ ۚ فَالَّذينَ آتَيناهُمُ الكِتابَ يُؤمِنونَ بِهِ ۖ وَمِن هٰؤُلاءِ مَن يُؤمِنُ بِهِ ۚ وَما يَجحَدُ بِآياتِنا إِلَّا الكافِرونَ",
        en: "Similarly ˹to earlier messengers˺, We have revealed to you a Book ˹O Prophet˺. ˹The faithful of˺ those to whom We gave the Scriptures believe in it, as do some of these ˹pagan Arabs˺. And none denies Our revelations except the ˹stubborn˺ disbelievers.",
        ur: ""
      },
      {
        arabic: "وَما كُنتَ تَتلو مِن قَبلِهِ مِن كِتابٍ وَلا تَخُطُّهُ بِيَمينِكَ ۖ إِذًا لَارتابَ المُبطِلونَ",
        en: "You ˹O Prophet˺ could not read any writing ˹even˺ before this ˹revelation˺, nor could you write at all. Otherwise, the people of falsehood would have been suspicious.",
        ur: ""
      },
      {
        arabic: "بَل هُوَ آياتٌ بَيِّناتٌ في صُدورِ الَّذينَ أوتُوا العِلمَ ۚ وَما يَجحَدُ بِآياتِنا إِلَّا الظّالِمونَ",
        en: "But this ˹Quran˺ is ˹a set of˺ clear revelations ˹preserved˺ in the hearts of those gifted with knowledge. And none denies Our revelations except the ˹stubborn˺ wrongdoers.",
        ur: ""
      },
      {
        arabic: "وَقالوا لَولا أُنزِلَ عَلَيهِ آياتٌ مِن رَبِّهِ ۖ قُل إِنَّمَا الآياتُ عِندَ اللَّهِ وَإِنَّما أَنا نَذيرٌ مُبينٌ",
        en: "They say, “If only ˹some˺ signs had been sent down to him from his Lord!” Say, ˹O Prophet,˺ “Signs are only with Allah. And I am only sent with a clear warning.”",
        ur: ""
      },
      {
        arabic: "أَوَلَم يَكفِهِم أَنّا أَنزَلنا عَلَيكَ الكِتابَ يُتلىٰ عَلَيهِم ۚ إِنَّ في ذٰلِكَ لَرَحمَةً وَذِكرىٰ لِقَومٍ يُؤمِنونَ",
        en: "Is it not enough for them that We have sent down to you the Book, ˹which is˺ recited to them. Surely in this ˹Quran˺ is a mercy and reminder for people who believe.",
        ur: ""
      },
      {
        arabic: "قُل كَفىٰ بِاللَّهِ بَيني وَبَينَكُم شَهيدًا ۖ يَعلَمُ ما فِي السَّماواتِ وَالأَرضِ ۗ وَالَّذينَ آمَنوا بِالباطِلِ وَكَفَروا بِاللَّهِ أُولٰئِكَ هُمُ الخاسِرونَ",
        en: "Say, ˹O Prophet,˺ “Sufficient is Allah as a Witness between me and you. He ˹fully˺ knows whatever is in the heavens and the earth. And those who believe in falsehood and disbelieve in Allah, it is they who are the ˹true˺ losers.”",
        ur: ""
      },
      {
        arabic: "وَيَستَعجِلونَكَ بِالعَذابِ ۚ وَلَولا أَجَلٌ مُسَمًّى لَجاءَهُمُ العَذابُ وَلَيَأتِيَنَّهُم بَغتَةً وَهُم لا يَشعُرونَ",
        en: "They challenge you ˹O Prophet˺ to hasten the punishment. Had it not been for a time already set, the punishment would have certainly come to them ˹at once˺. But it will definitely take them by surprise when they least expect it.",
        ur: ""
      },
      {
        arabic: "يَستَعجِلونَكَ بِالعَذابِ وَإِنَّ جَهَنَّمَ لَمُحيطَةٌ بِالكافِرينَ",
        en: "They urge you to hasten the punishment. And Hell will certainly encompass the disbelievers",
        ur: ""
      },
      {
        arabic: "يَومَ يَغشاهُمُ العَذابُ مِن فَوقِهِم وَمِن تَحتِ أَرجُلِهِم وَيَقولُ ذوقوا ما كُنتُم تَعمَلونَ",
        en: "on the Day the punishment will overwhelm them from above them and from below their feet. And it will be said, “Reap what you sowed.”",
        ur: ""
      },
      {
        arabic: "يا عِبادِيَ الَّذينَ آمَنوا إِنَّ أَرضي واسِعَةٌ فَإِيّايَ فَاعبُدونِ",
        en: "O My believing servants! My earth is truly spacious, so worship Me ˹alone˺.",
        ur: ""
      },
      {
        arabic: "كُلُّ نَفسٍ ذائِقَةُ المَوتِ ۖ ثُمَّ إِلَينا تُرجَعونَ",
        en: "Every soul will taste death, then to Us you will ˹all˺ be returned.",
        ur: ""
      },
      {
        arabic: "وَالَّذينَ آمَنوا وَعَمِلُوا الصّالِحاتِ لَنُبَوِّئَنَّهُم مِنَ الجَنَّةِ غُرَفًا تَجري مِن تَحتِهَا الأَنهارُ خالِدينَ فيها ۚ نِعمَ أَجرُ العامِلينَ",
        en: "˹As for˺ those who believe and do good, We will certainly house them in ˹elevated˺ mansions in Paradise, under which rivers flow, to stay there forever. How excellent is the reward for those who work ˹righteousness!˺—",
        ur: ""
      },
      {
        arabic: "الَّذينَ صَبَروا وَعَلىٰ رَبِّهِم يَتَوَكَّلونَ",
        en: "those who patiently endure, and put their trust in their Lord!",
        ur: ""
      },
      {
        arabic: "وَكَأَيِّن مِن دابَّةٍ لا تَحمِلُ رِزقَهَا اللَّهُ يَرزُقُها وَإِيّاكُم ۚ وَهُوَ السَّميعُ العَليمُ",
        en: "How many are the creatures that cannot secure their provisions! ˹It is˺ Allah ˹Who˺ provides for them and you ˹as well˺. He is indeed the All-Hearing, All-Knowing.",
        ur: ""
      },
      {
        arabic: "وَلَئِن سَأَلتَهُم مَن خَلَقَ السَّماواتِ وَالأَرضَ وَسَخَّرَ الشَّمسَ وَالقَمَرَ لَيَقولُنَّ اللَّهُ ۖ فَأَنّىٰ يُؤفَكونَ",
        en: "If you ask them ˹O Prophet˺ who created the heavens and the earth and subjected the sun and the moon ˹for your benefit˺, they will certainly say, “Allah!” How can they then be deluded ˹from the truth˺?",
        ur: ""
      },
      {
        arabic: "اللَّهُ يَبسُطُ الرِّزقَ لِمَن يَشاءُ مِن عِبادِهِ وَيَقدِرُ لَهُ ۚ إِنَّ اللَّهَ بِكُلِّ شَيءٍ عَليمٌ",
        en: "Allah gives abundant or limited provisions to whoever He wills of His servants. Surely Allah has ˹full˺ knowledge of everything.",
        ur: ""
      },
      {
        arabic: "وَلَئِن سَأَلتَهُم مَن نَزَّلَ مِنَ السَّماءِ ماءً فَأَحيا بِهِ الأَرضَ مِن بَعدِ مَوتِها لَيَقولُنَّ اللَّهُ ۚ قُلِ الحَمدُ لِلَّهِ ۚ بَل أَكثَرُهُم لا يَعقِلونَ",
        en: "And if you ask them who sends down rain from the sky, giving life to the earth after its death, they will surely say, “Allah!” Say, “Praise be to Allah!” In fact, most of them do not understand.",
        ur: ""
      },
      {
        arabic: "وَما هٰذِهِ الحَياةُ الدُّنيا إِلّا لَهوٌ وَلَعِبٌ ۚ وَإِنَّ الدّارَ الآخِرَةَ لَهِيَ الحَيَوانُ ۚ لَو كانوا يَعلَمونَ",
        en: "This worldly life is no more than play and amusement. But the Hereafter is indeed the real life, if only they knew.",
        ur: ""
      },
      {
        arabic: "فَإِذا رَكِبوا فِي الفُلكِ دَعَوُا اللَّهَ مُخلِصينَ لَهُ الدّينَ فَلَمّا نَجّاهُم إِلَى البَرِّ إِذا هُم يُشرِكونَ",
        en: "If they happen to be aboard a ship ˹caught in a storm˺, they cry out to Allah ˹alone˺ in sincere devotion. But as soon as He delivers them ˹safely˺ to shore, they associate ˹others with Him once again˺.",
        ur: ""
      },
      {
        arabic: "لِيَكفُروا بِما آتَيناهُم وَلِيَتَمَتَّعوا ۖ فَسَوفَ يَعلَمونَ",
        en: "So let them be ungrateful for all We have given them, and ˹let them˺ enjoy themselves ˹for now˺! For they will soon know.",
        ur: ""
      },
      {
        arabic: "أَوَلَم يَرَوا أَنّا جَعَلنا حَرَمًا آمِنًا وَيُتَخَطَّفُ النّاسُ مِن حَولِهِم ۚ أَفَبِالباطِلِ يُؤمِنونَ وَبِنِعمَةِ اللَّهِ يَكفُرونَ",
        en: "Have they not seen how We have made ˹Mecca˺ a safe haven, whereas people ˹all˺ around them are snatched away? How can they then believe in falsehood and deny Allah’s favours?",
        ur: ""
      },
      {
        arabic: "وَمَن أَظلَمُ مِمَّنِ افتَرىٰ عَلَى اللَّهِ كَذِبًا أَو كَذَّبَ بِالحَقِّ لَمّا جاءَهُ ۚ أَلَيسَ في جَهَنَّمَ مَثوًى لِلكافِرينَ",
        en: "And who does more wrong than those who fabricate lies against Allah or reject the truth after it has reached them? Is Hell not a ˹fitting˺ home for the disbelievers?",
        ur: ""
      },
      {
        arabic: "وَالَّذينَ جاهَدوا فينا لَنَهدِيَنَّهُم سُبُلَنا ۚ وَإِنَّ اللَّهَ لَمَعَ المُحسِنينَ",
        en: "As for those who struggle in Our cause, We will surely guide them along Our Way. And Allah is certainly with the good-doers.",
        ur: ""
      },
    ];

    const readTab = document.getElementById('read-tab');
    const translateTab = document.getElementById('translate-tab');
    const langSelect = document.getElementById('language');
    const langWrapper = document.getElementById('languageSelector');
    let showTransliteration = false;
    let currentAyahIndex = 0;

    // Favorites and Bookmarks storage
    let favoritedAyahs = JSON.parse(localStorage.getItem('favoritedAyahs')) || [];
    let bookmarkedAyahs = JSON.parse(localStorage.getItem('bookmarkedAyahs')) || [];

    function isFavorite(index) {
      return favoritedAyahs.some(ayah => ayah.surah === 29 && ayah.ayah === index + 1);
    }

    function toggleFavorite(index) {
      const ayahObj = { surah: 29, ayah: index + 1 };
      if (isFavorite(index)) {
        favoritedAyahs = favoritedAyahs.filter(ayah => !(ayah.surah === 29 && ayah.ayah === index + 1));
      } else {
        favoritedAyahs.push(ayahObj);
      }
      localStorage.setItem('favoritedAyahs', JSON.stringify(favoritedAyahs));
      renderReadTab();
      renderTranslation();
    }

    function isBookmarked(index) {
      return bookmarkedAyahs.some(ayah => ayah.surah === 29 && ayah.ayah === index + 1);
    }

    function toggleBookmark(index) {
      const ayahObj = { surah: 29, ayah: index + 1 };
      if (isBookmarked(index)) {
        bookmarkedAyahs = bookmarkedAyahs.filter(ayah => !(ayah.surah === 29 && ayah.ayah === index + 1));
      } else {
        bookmarkedAyahs.push(ayahObj);
      }
      localStorage.setItem('bookmarkedAyahs', JSON.stringify(bookmarkedAyahs));
      renderReadTab();
      renderTranslation();
    }

    // Language options with display names
    const languages = [
      { value: 'en', name: 'English: Dr. Mustafa Khattab' },
      { value: 'ur', name: 'Urdu' }
      // Add more languages here in the future, e.g., { value: 'ar', name: 'Arabic' }
    ];

    // Populate language selector with sorted options
    function populateLanguageSelector() {
      // Sort languages alphabetically by name
      languages.sort((a, b) => a.name.localeCompare(b.name));
      
      // Clear existing options
      langSelect.innerHTML = '';
      
      // Add sorted options
      languages.forEach(lang => {
        const option = document.createElement('option');
        option.value = lang.value;
        option.textContent = lang.name;
        langSelect.appendChild(option);
      });
    }

    // Load Arabic verses
    function renderReadTab() {
      readTab.innerHTML = '';
      ayahs.forEach((ayah, index) => {
        const div = document.createElement('div');
        div.className = 'ayah';
        let transliterationHTML = '';
        if (showTransliteration && ayah.trans) {
          transliterationHTML = `<div class="transliteration">${ayah.trans}</div>`;
        }
        div.innerHTML = `
          <div class="ayah-number">Verse ${index + 1}</div>
          <div class="arabic">${ayah.arabic}<span class="verse-icon">۝</span></div>
          ${transliterationHTML}
          <button class="favorite-btn" onclick="toggleFavorite(${index})">${isFavorite(index) ? favoriteSVG : unfavoriteSVG}</button>
          <button class="bookmark-btn" onclick="toggleBookmark(${index})">${isBookmarked(index) ? bookmarkedSVG : unbookmarkedSVG}</button>
          <svg class="share-icon" onclick="openShareModal(${index})" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
          </svg>
        `;
        readTab.appendChild(div);
      });
    }

    function renderTranslation() {
      const lang = langSelect.value;
      translateTab.innerHTML = '';
      ayahs.forEach((ayah, index) => {
        const div = document.createElement('div');
        div.className = `ayah translation ${lang}`;
        div.innerHTML = `
          <div class="ayah-number">Verse ${index + 1}</div>
          <div class="translation">${ayah[lang]}<span class="verse-icon">۝</span></div>
          <button class="favorite-btn" onclick="toggleFavorite(${index})">${isFavorite(index) ? favoriteSVG : unfavoriteSVG}</button>
          <button class="bookmark-btn" onclick="toggleBookmark(${index})">${isBookmarked(index) ? bookmarkedSVG : unbookmarkedSVG}</button>
          <svg class="share-icon" onclick="openShareModal(${index})" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
          </svg>
        `;
        translateTab.appendChild(div);
      });
    }

    let currentEmbedSrc = "https://archive.org/embed/029_20260102"; // Default for saadalghamdi

    function changeReciter() {
      const reciter = document.getElementById('reciter').value;
      const playButton = document.getElementById('playButton');

      // Define your reciter embed sources (Archive.org embed links)
      const reciterEmbeds = {
        saadalghamdi: "https://archive.org/embed/029_20260102",
        // Add more reciters here as needed, e.g., anotherreciter: "https://archive.org/embed/another_id"
      };

      // Get the correct embed URL for the selected reciter
      const newSrc = reciterEmbeds[reciter];

      if (newSrc) {
        currentEmbedSrc = newSrc;
        // Show the play button
        playButton.style.display = 'block';
      } else {
        alert("Embed source not available for this reciter.");
        playButton.style.display = 'none';
      }
    }

    function playAudio() {
      // Show the modal with the embed iframe
      const modal = document.getElementById('audioModal');
      const iframe = modal.querySelector('iframe');
      iframe.src = currentEmbedSrc;
      modal.style.display = 'flex';
    }

    function closeModal() {
      const modal = document.getElementById('audioModal');
      modal.style.display = 'none';
    }

    function switchTab(tab) {
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tabs button')[tab === 'read' ? 0 : 1].classList.add('active');

      if (tab === 'read') {
        readTab.classList.remove('hidden');
        translateTab.classList.add('hidden');
        langWrapper.classList.add('hidden');
        renderReadTab();
      } else {
        readTab.classList.add('hidden');
        translateTab.classList.remove('hidden');
        langWrapper.classList.remove('hidden');
        renderTranslation();
      }
    }

    function goToVerse() {
      const verseNumber = parseInt(document.getElementById('verse-number').value);
      if (isNaN(verseNumber) || verseNumber < 1 || verseNumber > 69) {
        alert('Please enter a valid verse number between 1 and 69.');
        return;
      }

      // Determine which tab is active
      const activeTab = readTab.classList.contains('hidden') ? translateTab : readTab;
      const ayahs = activeTab.querySelectorAll('.ayah');

      if (ayahs[verseNumber - 1]) {
        ayahs[verseNumber - 1].scrollIntoView({ behavior: 'smooth' });

        // Highlight the verse temporarily
        ayahs[verseNumber - 1].style.backgroundColor = '#005f4a';
        setTimeout(() => {
          ayahs[verseNumber - 1].style.backgroundColor = '';
        }, 2000);
      }
    }

    function setThemeIcon() {
      const icon = document.getElementById('theme-icon');
      icon.classList.remove('rotate');
      void icon.offsetWidth;
      icon.classList.add('rotate');
      icon.src = document.body.classList.contains('dark-mode')
        ? "sun.png"
        : "moon.png";
      icon.alt = document.body.classList.contains('dark-mode')
        ? "Switch to light mode"
        : "Switch to dark mode";
    }

    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
      setThemeIcon();
    }

    function toggleMenu() {
      const navLinks = document.querySelector('.nav-links');
      navLinks.classList.toggle('active');
    }

    function toggleTransliteration() {
      showTransliteration = !showTransliteration;
      const toggleButton = document.getElementById('transliteration-toggle');
      if (showTransliteration) {
        toggleButton.textContent = 'Hide Transliteration';
        toggleButton.classList.add('active');
      } else {
        toggleButton.textContent = 'Show Transliteration';
        toggleButton.classList.remove('active');
      }
      renderReadTab();
    }

        // Scroll to Top functionality
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // Share functions
    function openShareModal(index) {
      currentAyahIndex = index;
      document.getElementById('includeTransliteration').checked = false;
      document.getElementById('includeTranslation').checked = false;
      document.getElementById('languageSelectDiv').style.display = 'none';
      document.getElementById('shareMessage').style.display = 'none';
      document.getElementById('shareModal').style.display = 'flex';
    }

    function toggleLanguageSelect() {
      const includeTranslation = document.getElementById('includeTranslation').checked;
      document.getElementById('languageSelectDiv').style.display = includeTranslation ? 'block' : 'none';
    }

    function closeShareModal() {
      document.getElementById('shareModal').style.display = 'none';
    }

    function generateAndCopyText() {
      const ayah = ayahs[currentAyahIndex];
      let text = `Surah Al-Ankabut\nVerse ${currentAyahIndex + 1}\n\nArabic:\n${ayah.arabic}\n`;

      if (document.getElementById('includeTransliteration').checked && ayah.trans) {
        text += `\nTransliteration:\n${ayah.trans}\n`;
      }

      if (document.getElementById('includeTranslation').checked) {
        const lang = document.getElementById('shareLanguage').value;
        text += `\nTranslation (${lang === 'en' ? 'English' : 'Urdu'}):\n${ayah[lang]}\n`;
      }

      text += `\nhttps://adil43534.github.io/Muslimbro1400.com/`;

      const shareMessage = document.getElementById('shareMessage');
      navigator.clipboard.writeText(text).then(() => {
        shareMessage.textContent = 'Text copied to clipboard!';
        shareMessage.style.color = '#007b5e';
        shareMessage.style.display = 'block';
        setTimeout(() => {
          closeShareModal();
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy text: ', err);
        shareMessage.textContent = 'Failed to copy text. Please try again.';
        shareMessage.style.color = '#d9534f';
        shareMessage.style.display = 'block';
      });
    }

    // Show/hide scroll to top button and update progress bar based on scroll position
    window.addEventListener('scroll', () => {
      const scrollToTopBtn = document.getElementById('scrollToTop');
      if (window.pageYOffset > 300) {
        scrollToTopBtn.classList.add('show');
      } else {
        scrollToTopBtn.classList.remove('show');
      }

      // Update progress bar
      const progressBar = document.getElementById('progress-bar');
      const totalHeight = document.body.scrollHeight - window.innerHeight;
      const progress = (window.pageYOffset / totalHeight) * 100;
      progressBar.style.width = progress + '%';
    });

    window.onload = () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
      }
      setThemeIcon();
      populateLanguageSelector();
      renderReadTab();
      // Ensure modal is hidden on load
      document.getElementById('audioModal').classList.add('hidden');

      // Check for ayah parameter in URL and navigate to it
      const urlParams = new URLSearchParams(window.location.search);
      const ayah = urlParams.get('ayah');
      if (ayah) {
        document.getElementById('verse-number').value = ayah;
        goToVerse();
      }
    };
  </script>
</body>
</html>
