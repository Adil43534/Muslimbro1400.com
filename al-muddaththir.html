<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>74. Surah: Al-Muddaththir 1-56 - MuslimBro1400</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600&family=Noto+Naskh+Arabic:wght@400;700&family=Noto+Nastaliq+Urdu:wght@400;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.png" type="image/x-icon">

  <style>
    /* Jameel Noori Nastaleeq Custom Font Face */
    @font-face {
      font-family: 'Jameel Noori Nastaleeq';
      src: url('https://db.onlinewebfonts.com/t/173976378411b22976d3381e494d4ef7.woff2') format('woff2'),
           url('https://db.onlinewebfonts.com/t/173976378411b22976d3381e494d4ef7.woff') format('woff'),
           url('https://db.onlinewebfonts.com/t/173976378411b22976d3381e494d4ef7.ttf') format('truetype');
      font-display: swap;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      color: #333;
      transition: background-color 0.5s ease, color 0.5s ease;
    }
    body.dark-mode {
      background-color: #1a1a1a;
      color: #e0e0e0;
    }

    #progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 4px;
      background-color: #007b5e;
      z-index: 1001;
      transition: width 0.25s ease;
    }

    .dark-mode #progress-bar {
      background-color: #0c8;
    }

    .navbar {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background-color: #f0f0f0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: background-color 0.5s ease;
    }

    .dark-mode .navbar { background-color: #2c2c2c; }

    .nav-links {
      display: flex;
      align-items: center;
    }

    .nav-links a {
      margin-left: 1rem;
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }

    .dark-mode .nav-links a { color: #e0e0e0; }

    .nav-links a:hover {
      color: #007b5e;
    }

    .theme-toggle {
      cursor: pointer;
      margin-left: 1rem;
      background-color: transparent;
      border: none;
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
    }

    .theme-toggle img {
      width: 24px;
      height: 24px;
      transition: transform 0.3s ease;
    }

    .theme-toggle img.rotate {
      transform: rotate(180deg);
    }

    .menu-toggle {
      display: none;
      cursor: pointer;
      background-color: transparent;
      border: none;
      padding: 0.4rem 0.6rem;
    }

    .menu-toggle img {
      width: 24px;
      height: 24px;
    }

    .container {
      padding: 2rem 1rem;
      max-width: 800px;
      margin: auto;
    }

    .surah-info {
      text-align: center;
      margin-bottom: 2rem;
    }

    .surah-info h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      font-family: 'Amiri', serif;
    }

    .meaning {
      font-style: italic;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    .dark-mode .meaning { color: #bbb; }

    .meta {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #888;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    .dark-mode .meta { color: #aaa; }

    .bismillah {
      margin-top: 1.5rem;
      font-size: 1.5rem;
      color: #007b5e;
      font-weight: bold;
      font-family: 'Amiri', serif;
    }

    .dark-mode .bismillah { color: #0c8; }

    .ayah {
      background-color: #fff;
      padding: 3rem 3rem 3rem 3rem;
      margin-bottom: 1rem;
      border-left: 4px solid #007b5e;
      border-radius: 6px;
      position: relative;
    }

    .dark-mode .ayah {
      background-color: #2c2c2c;
      border-left-color: #0c8;
    }

    .ayah-number {
      position: absolute;
      top: 1rem;
      left: 1rem;
      font-size: 0.9rem;
      color: #007b5e;
      text-align: left;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .ayah-number { color: #0c8; }

    .arabic {
      font-size: 1.8rem;
      text-align: right;
      direction: rtl;
      font-family: 'Amiri', serif;
    }

    .translation {
      margin-top: 0.5rem;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      font-size: 1.2rem
    }

    /* Updated Urdu Translation Class */
    .translation.ur {
      text-align: right;
      direction: rtl;
      /* Prioritizing Jameel Noori */
      font-family: 'Jameel Noori Nastaleeq', 'Noto Nastaliq Urdu', serif;
      font-size: 1.5rem;
      line-height: 2.2; /* Increased line-height for Nastaliq script */
      margin-top: 10px;
      color: #444;
    }

    .dark-mode .translation { color: #ccc; }

    .transliteration {
      margin-top: 0.5rem;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      font-style: italic;
    }

    .dark-mode .transliteration { color: #ccc; }

    .verse-icon {
      display: inline-block;
      font-size: 1.2rem;
      margin-left: 0.5rem;
      vertical-align: middle;
      color: #007b5e;
      font-family: 'Amiri', serif;
    }

    .dark-mode .verse-icon {
      color: #0c8;
    }

    .favorite-btn, .bookmark-btn, .share-icon {
      position: absolute;
      right: 1rem;
      width: 24px;
      height: 24px;
      background: none;
      border: none;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .favorite-btn:hover, .bookmark-btn:hover, .share-icon:hover {
      opacity: 1;
    }

    .share-icon {
      top: 1rem;
    }

    .favorite-btn {
      top: 3rem;
    }

    .bookmark-btn {
      top: 5rem;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }

    .navigation a {
      color: #007b5e;
      text-decoration: none;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .navigation a { color: #0c8; }

    .tabs {
      display: flex;
      justify-content: center;
      margin-top: 1rem;
      gap: 1rem;
    }

    .tab-button {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .tab-button.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .tab-button {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .tab-button.active {
      background-color: #0c8;
    }

    .transliteration-toggle {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
      margin-top: 1rem;
    }

    .transliteration-toggle.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .transliteration-toggle {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .transliteration-toggle.active {
      background-color: #0c8;
    }

    .translation-toggle {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
      margin-top: 1rem;
    }

    .translation-toggle.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .translation-toggle {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .translation-toggle.active {
      background-color: #0c8;
    }

    .lang-select, .audio-select {
      margin-top: 1rem;
      text-align: center;
    }

    .lang-select label, .audio-select label {
      margin-right: 0.5rem;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
    }

    .dark-mode .lang-select label, .dark-mode .audio-select label {
      color: #e0e0e0;
    }

    .lang-select select, .audio-select select {
      padding: 0.6rem 2rem 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23007b5e" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .audio-select button {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
      margin-left: 0.5rem;
    }

    .audio-select button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .audio-select button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .dark-mode .audio-select button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    .dark-mode .lang-select select, .dark-mode .audio-select select {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%230c8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
    }

    .lang-select select:hover, .audio-select select:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .lang-select select:hover, .dark-mode .audio-select select:hover {
      border-color: #0a6;
    }

    .lang-select select:focus, .audio-select select:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .lang-select select:focus, .dark-mode .audio-select select:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .hidden { display: none; }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 90%;
      position: relative;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .dark-mode .modal-content {
      background-color: #2c2c2c;
      color: #e0e0e0;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
    }

    .modal-content iframe {
      border-radius: 8px;
      border: none;
      width: 100%;
      height: 60px;
    }

    .modal-content button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #007b5e;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    .modal-content button:hover {
      background-color: #005f4a;
    }

    .dark-mode .modal-content button {
      background-color: #0c8;
    }

    .dark-mode .modal-content button:hover {
      background-color: #0a6;
    }

        .go-to-verse {
      margin-top: 1rem;
      text-align: center;
    }

    .go-to-verse label {
      margin-right: 0.5rem;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
    }

    .dark-mode .go-to-verse label {
      color: #e0e0e0;
    }

    .go-to-verse input {
      padding: 0.6rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      width: 80px;
      text-align: center;
    }

    .dark-mode .go-to-verse input {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
    }

    .go-to-verse input:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .go-to-verse input:hover {
      border-color: #0a6;
    }

    .go-to-verse input:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .go-to-verse input:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .go-to-verse button {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
      margin-left: 0.5rem;
    }

    .go-to-verse button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .go-to-verse button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .dark-mode .go-to-verse button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    /* Scroll to Top Button */
    #scrollToTop {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background-color: #007b5e;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease, background-color 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    #scrollToTop:hover {
      background-color: #005f4a;
    }

    #scrollToTop.show {
      opacity: 1;
      visibility: visible;
    }

    .dark-mode #scrollToTop {
      background-color: #0c8;
    }

    .dark-mode #scrollToTop:hover {
      background-color: #0a6;
    }

    /* Share Modal Styling */
    .modal-content h2 {
      margin-top: 0;
      color: #333;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .modal-content h2 {
      color: #e0e0e0;
    }

    .modal-content div {
      margin-bottom: 1rem;
      text-align: left;
    }

    .modal-content label {
      display: flex;
      align-items: center;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
      cursor: pointer;
    }

    .dark-mode .modal-content label {
      color: #e0e0e0;
    }

    .modal-content input[type="checkbox"] {
      margin-right: 0.5rem;
      width: 18px;
      height: 18px;
      border: 2px solid #007b5e;
      border-radius: 4px;
      background-color: #fff;
      cursor: pointer;
      transition: border-color 0.3s ease, background-color 0.3s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .modal-content input[type="checkbox"]:checked {
      background-color: #007b5e;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="12" height="12"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>');
      background-repeat: no-repeat;
      background-position: center;
    }

    .dark-mode .modal-content input[type="checkbox"] {
      background-color: #2c2c2c;
      border-color: #0c8;
    }

    .dark-mode .modal-content input[type="checkbox"]:checked {
      background-color: #0c8;
      border-color: #0c8;
    }

    .modal-content select {
      padding: 0.6rem 2rem 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23007b5e" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .modal-content select:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .modal-content select {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%230c8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
    }

    .dark-mode .modal-content select:hover {
      border-color: #0a6;
    }

    .modal-content select:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .modal-content select:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .modal-content button {
      margin-top: 1rem;
      margin-right: 0.5rem;
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
    }

    .modal-content button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .modal-content button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .modal-content button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    .modal-content input[type="text"] {
      padding: 0.6rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      width: 100%;
      box-sizing: border-box;
    }

    .modal-content input[type="text"]:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .modal-content input[type="text"] {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
    }

    .dark-mode .modal-content input[type="text"]:hover {
      border-color: #0a6;
    }

    .modal-content input[type="text"]:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .modal-content input[type="text"]:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    @media (max-width: 600px) {
      .navbar h1 {
        font-size: 1.25rem;
      }

      .nav-links {
        display: none;
        flex-direction: column;
        width: 100%;
        background-color: #f0f0f0;
        position: absolute;
        top: 60px;
        left: 0;
        padding: 1rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        z-index: 1000;
      }

      .dark-mode .nav-links {
        background-color: #2c2c2c;
      }

      .nav-links.active {
        display: flex;
      }

      .nav-links a {
        margin: 0.5rem 0;
        font-size: 1.1rem;
      }

      .theme-toggle {
        margin: 0;
      }

      .menu-toggle {
        display: block;
      }

      .lang-select select, .audio-select select {
        padding: 0.5rem 1.8rem 0.5rem 0.8rem;
        font-size: 0.9rem;
        background-size: 16px;
      }

      .surah-info h1 {
        font-size: 1.5rem;
      }

      .bismillah {
        font-size: 1.3rem;
      }

      .arabic {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div id="progress-bar"></div>
  <!-- Navbar -->
  <nav class="navbar">
    <h1>MuslimBro1400</h1>
    <button class="menu-toggle" onclick="toggleMenu()">
      <img src="menu.png" alt="Menu" />
    </button>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="quran.html">Quran</a>
      <a href="hadith.html">Hadiths</a>
      <a href="islamic-books.html">Books</a>
      <a href="quran-recitations.html">Recitations</a>
      <a href="islamic-calendar.html">Calendar</a>
      <a href="about.html">About</a>
      <button class="theme-toggle" onclick="toggleTheme()">
        <img id="theme-icon" src="moon.png" alt="Toggle Theme" title="Toggle light/dark mode" />
      </button>
    </div>
  </nav>

  <!-- Content -->
  <div class="container">
    <div class="surah-info">
      <h1>Surah Al-Muddaththir (سورة المدثر)</h1>
      <p class="meaning">Meaning: The Cloaked One</p>
      <p class="meta">Mecca - 56 Verses</p>
      
      <div class="audio-select">
        <label for="reciter">Reciter:</label>
        <select id="reciter" onchange="changeReciter()">
          <option value="saadalghamdi">Saad Al Ghamdi</option>
        </select>
        <br><br>
        <button id="playButton" onclick="playAudio()">Play Audio</button>
      </div>
      
      <p class="bismillah">بِسْمِ اللَّهِ الرَّحْمَـٰنِ الرَّحِيمِ</p>

            <!-- Transliteration Toggle -->
      <button id="transliteration-toggle" class="transliteration-toggle" onclick="toggleTransliteration()">Show Transliteration</button>

      <!-- Translation Toggle -->
      <button id="translation-toggle" class="translation-toggle" onclick="toggleTranslation()">Show Translation</button>

      <!-- Language Selector -->
      <div class="lang-select hidden" id="languageSelector">
        <label for="language">Translation Language:</label>
        <select id="language" onchange="changeLanguage()"></select>
      </div>
      
               <!-- Go to Verse -->
      <div class="go-to-verse">
        <label for="verse-number">Go to Verse:</label>
        <input type="number" id="verse-number" min="1" max="56" placeholder="1-56">
        <button onclick="goToVerse()">Go</button>
      </div>

      <div class="navigation">
        <a href="al-muzzammil.html">← Surah Al-Muzzammil</a>
        <a href="al-qiyamah.html">Next: Surah Al-Qiyamah →</a>
      </div>
    </div>

    <!-- Arabic Tab -->
    <div id="read-tab"></div>

    <!-- Translation Tab -->
    <div id="translate-tab" class="hidden"></div>

    <div class="navigation">
      <a href="al-muzzammil.html">← Surah Al-Muzzammil</a>
      <a href="al-qiyamah.html">Next: Surah Al-Qiyamah →</a>
    </div>

  <!-- Audio Modal -->
  <div id="audioModal" class="modal" style="display: none;">
    <div class="modal-content">
      <iframe src="https://archive.org/embed/074_20260102" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen></iframe>
      <br><br>
      <button onclick="closeModal()">Close</button>
    </div>
  </div>

    <!-- Share Modal -->
  <div id="shareModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Share Ayah Options</h2>
      <div>
        <label><input type="checkbox" id="includeTransliteration"> Include Transliteration</label>
      </div>
      <div>
        <label><input type="checkbox" id="includeTranslation" onchange="toggleLanguageSelect()"> Include Translation</label>
      </div>
      <div id="languageSelectDiv" style="display: none;">
        <label for="shareLanguage">Translation Language:</label>
        <select id="shareLanguage">
          <option value="en">English</option>
          <option value="ur">Urdu</option>
        </select>
      </div>
      <br>
      <div id="shareMessage" style="display: none; margin-top: 1rem; text-align: center; font-weight: bold;"></div>
      <button onclick="generateAndCopyText()">Copy Text</button>
      <button onclick="closeShareModal()">Cancel</button>
    </div>
  </div>

    <!-- Scroll to Top Button -->
  <button id="scrollToTop" onclick="scrollToTop()">↑</button>

  <script>
    const unfavoriteSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0c8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`;
    const favoriteSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="#0c8" stroke="#0c8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`;
    const unbookmarkedSVG = `<svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="#00CC88" stroke-width="66.66" stroke-miterlimit="10" d="M166.7,206.7c0-37.3,0-56,7.3-70.3c6.4-12.5,16.6-22.7,29.1-29.1c14.3-7.3,32.9-7.3,70.3-7.3h253.3c37.3,0,56,0,70.3,7.3c12.5,6.4,22.7,16.6,29.1,29.1c7.3,14.3,7.3,32.9,7.3,70.3V700L400,533.3L166.7,700V206.7z"/></svg>`;
    const bookmarkedSVG = `<svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#00CC88" d="M166.7,206.7c0-37.3,0-56,7.3-70.3c6.4-12.5,16.6-22.7,29.1-29.1c14.3-7.3,32.9-7.3,70.3-7.3h253.3c37.3,0,56,0,70.3,7.3c12.5,6.4,22.7,16.6,29.1,29.1c7.3,14.3,7.3,32.9,7.3,70.3V700L400,533.3L166.7,700V206.7z"/></svg>`;

    const ayahs = [
      {
        arabic: "يا أَيُّهَا المُدَّثِّرُ",
        en: "O you covered up ˹in your clothes˺!",
        ur: "!اے کمبل میں لپٹ کر لیٹنے والے ﷺ",
        trans: "Yaaa ayyuhal muddassir"
      },
      {
        arabic: "قُم فَأَنذِر",
        en: "Arise and warn ˹all˺.",
        ur: "آپ ﷺ اٹھئے اور (لوگوں کو) خبردار کیجیے۔",
        trans: "Qum fa anzir"
      },
      {
        arabic: "وَرَبَّكَ فَكَبِّر",
        en: "Revere your Lord ˹alone˺.",
        ur: "!اور اپنے رب کو بڑا کرو",
        trans: "Wa rabbaka fakabbir"
      },
      {
        arabic: "وَثِيابَكَ فَطَهِّر",
        en: "Purify your garments.",
        ur: "اور اپنے کپڑوں کو صاف رکھنے کا اہتمام کیجیے۔",
        trans: "Wa siyaabaka fatahhir"
      },
      {
        arabic: "وَالرُّجزَ فَاهجُر",
        en: "˹Continue to˺ shun idols.",
        ur: "اور ہر قسم کی گندگی سے دور رہیے۔",
        trans: "Warrujza fahjur"
      },
      {
        arabic: "وَلا تَمنُن تَستَكثِرُ",
        en: "Do not do a favour expecting more ˹in return˺.",
        ur: "اور زیادہ لینے کے لیے کسی پر احسان نہ کیجیے۔",
        trans: "Wa laa tamnun tastaksir"
      },
      {
        arabic: "وَلِرَبِّكَ فَاصبِر",
        en: "And persevere for ˹the sake of˺ your Lord.",
        ur: "اور اپنے رب کے لیے صبر کرو۔",
        trans: "Wa li Rabbika fasbir"
      },  
      {
        arabic: "فَإِذا نُقِرَ فِي النّاقورِ",
        en: "˹For˺ when the Trumpet will be sounded,",
        ur: "جب صور میں پھونکا جائے گا۔",
        trans: "Fa izaa nuqira fin naaqoor"
      },
      {
        arabic: "فَذٰلِكَ يَومَئِذٍ يَومٌ عَسيرٌ",
        en: "that will ˹truly˺ be a difficult Day—",
        ur: "تو وہ دن بہت سخت دن ہوگا۔",
        trans: "Fazaalika yawma ‘iziny yawmun ‘aseer"
      },
      {
        arabic: "عَلَى الكافِرينَ غَيرُ يَسيرٍ",
        en: "far from easy for the disbelievers.",
        ur: "کافروں پر وہ ہلکا نہیں ہوگا۔",
        trans: "‘Alal kaafireena ghairu yaseer"
      },
      {
        arabic: "ذَرني وَمَن خَلَقتُ وَحيدًا",
        en: "And leave to me ˹O Prophet˺ the one I created all by Myself,",
        ur: "آپ چھوڑ دیجیے مجھے اور جس کو میں نے اکیلا پیدا کیا۔",
        trans: "Zarnee wa man khalaqtu waheedaa"
      },
      {
        arabic: "وَجَعَلتُ لَهُ مالًا مَمدودًا",
        en: "and granted him abundant wealth,",
        ur: "اور اسے میں نے بہت سا مال دیا پھیلا ہوا۔",
        trans: "Wa ja’altu lahoo maalam mamdoodaa"
      },
      {
        arabic: "وَبَنينَ شُهودًا",
        en: "and children always by his side,",
        ur: "اور نگاہوں کے سامنے رہنے والے بیٹے دیے۔",
        trans: "Wa baneena shuhoodaa"
      },
      {
        arabic: "وَمَهَّدتُ لَهُ تَمهيدًا",
        en: "and made life very easy for him.",
        ur: "اور میں نے اس کے لیے ہر قسم کا سامان خوب اچھی طرح سے تیار کردیا۔",
        trans: "Wa mahhattu lahoo tamheeda"
      },
      {
        arabic: "ثُمَّ يَطمَعُ أَن أَزيدَ",
        en: "Yet he is hungry for more.",
        ur: "!پھر وہ چاہتا ہے کہ میں اسے اور بھی دوں",
        trans: "Summa yat ma’u an azeed"
      },
      {
        arabic: "كَلّا ۖ إِنَّهُ كانَ لِآياتِنا عَنيدًا",
        en: "But no! ˹For˺ he has been truly stubborn with Our revelations.",
        ur: "ہرگز نہیں ! وہ تو ہماری آیات کا مخالف (اور دشمن بن گیا) ہے۔",
        trans: "Kallaaa innahoo kaana li Aayaatinaa ‘aneedaa"
      },
      {
        arabic: "سَأُرهِقُهُ صَعودًا",
        en: "I will make his fate unbearable,",
        ur: "میں اسے عنقریب ایک سخت چڑھائی چڑھوائوں گا۔",
        trans: "Sa urhiquhoo sa’oodaa"
      },
      {
        arabic: "إِنَّهُ فَكَّرَ وَقَدَّرَ",
        en: "for he contemplated and determined ˹a degrading label for the Quran˺.",
        ur: "اس نے غور کیا اور کچھ اندازہ کیا۔",
        trans: "Innahoo fakkara wa qaddar"
      },
      {
        arabic: "فَقُتِلَ كَيفَ قَدَّرَ",
        en: "May he be condemned! How evil was what he determined!",
        ur: "پس ہلاک ہوجائے اس نے کیسا غلط اندازہ ٹھہرایا۔",
        trans: "Faqutila kayfa qaddar"
      },
      {
        arabic: "ثُمَّ قُتِلَ كَيفَ قَدَّرَ",
        en: "May he be condemned even more! How evil was what he determined!",
        ur: "پھر ہلاک ہوجائے اس نے کیسا غلط اندازہ ٹھہرایا۔",
        trans: "Summa qutila kaifa qaddar"
      },
      {
        arabic: "ثُمَّ نَظَرَ",
        en: "Then he re-contemplated ˹in frustration˺,",
        ur: "پھر اس نے دیکھا۔",
        trans: "Summa nazar"
      },
      {
        arabic: "ثُمَّ عَبَسَ وَبَسَرَ",
        en: "then frowned and scowled,",
        ur: "پھر تیوری چڑھائی اور منہ بسورا۔",
        trans: "Summa ‘abasa wa basar"
      },
      {
        arabic: "ثُمَّ أَدبَرَ وَاستَكبَرَ",
        en: "then turned his back ˹on the truth˺ and acted arrogantly,",
        ur: "پھر پیٹھ پھیری اور تکبر کیا۔",
        trans: "Summaa adbara wastakbar"
      },
      {
        arabic: "فَقالَ إِن هٰذا إِلّا سِحرٌ يُؤثَرُ",
        en: "saying, “This ˹Quran˺ is nothing but magic from the ancients.",
        ur: "پھر اس نے کہا کہ یہ تو بس جادو ہے جو پہلے سے چلا آ رہا ہے۔",
        trans: "Faqaala in haazaaa illaa sihruny yu’sar"
      },
      {
        arabic: "إِن هٰذا إِلّا قَولُ البَشَرِ",
        en: "This is no more than the word of a man.”",
        ur: "یہ نہیں ہے مگر انسان کا کلام۔",
        trans: "In haazaaa illaa qawlul bashar"
      },
      {
        arabic: "سَأُصليهِ سَقَرَ",
        en: "Soon I will burn him in Hell!",
        ur: "!میں عنقریب اسے ڈالوں گا سقر (دوزخ) میں",
        trans: "Sa usleehi saqar"
      },
      {
        arabic: "وَما أَدراكَ ما سَقَرُ",
        en: "And what will make you realize what Hell is?",
        ur: "اور تمہیں کیا معلوم کہ وہ سقر کیا ہے ؟",
        trans: "Wa maaa adraaka maa saqar"
      },
      {
        arabic: "لا تُبقي وَلا تَذَرُ",
        en: "It does not let anyone live or die,",
        ur: "!وہ نہ تو باقی رہنے دے گی اور نہ چھوڑے گی",
        trans: "Laa tubqee wa laa tazar"
      },
      {
        arabic: "لَوّاحَةٌ لِلبَشَرِ",
        en: "scorching the skin.",
        ur: "انسان کی کھال کو جھلسا ڈالنے والی۔",
        trans: "Lawwaahatul lilbashar"
      },
      {
        arabic: "عَلَيها تِسعَةَ عَشَرَ",
        en: "It is overseen by nineteen ˹keepers˺.",
        ur: "اس پر انیس (19) داروغے مقرر ہیں۔",
        trans: "‘Alaihaa tis’ata ‘ashar"
      },
      {
        arabic: "وَما جَعَلنا أَصحابَ النّارِ إِلّا مَلائِكَةً ۙ وَما جَعَلنا عِدَّتَهُم إِلّا فِتنَةً لِلَّذينَ كَفَروا لِيَستَيقِنَ الَّذينَ أوتُوا الكِتابَ وَيَزدادَ الَّذينَ آمَنوا إيمانًا ۙ وَلا يَرتابَ الَّذينَ أوتُوا الكِتابَ وَالمُؤمِنونَ ۙ وَلِيَقولَ الَّذينَ في قُلوبِهِم مَرَضٌ وَالكافِرونَ ماذا أَرادَ اللَّهُ بِهٰذا مَثَلًا ۚ كَذٰلِكَ يُضِلُّ اللَّهُ مَن يَشاءُ وَيَهدي مَن يَشاءُ ۚ وَما يَعلَمُ جُنودَ رَبِّكَ إِلّا هُوَ ۚ وَما هِيَ إِلّا ذِكرىٰ لِلبَشَرِ",
        en: "We have appointed only ˹stern˺ angels as wardens of the Fire. And We have made their number only as a test for the disbelievers, so that the People of the Book will be certain, and the believers will increase in faith, and neither the People of the Book nor the believers will have any doubts, and so that those ˹hypocrites˺ with sickness in their hearts and the disbelievers will argue, “What does Allah mean by such a number?” In this way Allah leaves whoever He wills to stray and guides whoever He wills. And none knows the forces of your Lord except He. And this ˹description of Hell˺ is only a reminder to humanity.",
        ur: "اور ہم نے نہیں مقرر کیے جہنم کے داروغے مگر فرشتے اور ہم نے نہیں ٹھہرائی ان کی یہ تعداد مگر کافروں کی آزمائش کے لیے تاکہ جنہیں کتاب دی گئی تھی انہیں یقین آجائے اور جو اہل ایمان ہیں وہ ایمان میں بڑھیں اور نہ شک میں پڑیں اہل کتاب اور اہل ایمان اور تاکہ کہیں وہ لوگ جن کے دلوں میں روگ ہے اور کفار بھی کہ بھلا اس سے اللہ کی کیا مراد ہے ؟ اسی طرح اللہ گمراہ کردیتا ہے جس کو چاہتا ہے اور ہدایت دیتا ہے جس کو چاہتا ہے۔ اور کوئی نہیں جانتا آپ کے رب کے لشکروں کو سوائے اس کے۔ اور یہ آیات صرف انسانوں کی یاد دہانی کے لیے ہیں۔",
        trans: "Wa maaja’alnaaa As-haaban naari illaa malaaa ‘ikatanw wa maa ja’alnaa ‘iddatahum illaa fitnatal lillazeena kafaroo liyastaiqinal lazeena ootul kitaaba wa yazdaadal lazeena aamanooo eemaananw wa laa yartaabal lazeena ootul kitaaba walmu’minoona wa liyaqoolal lazeena fee quloo bihim maradunw walkaafiroona maazaaa araadal laahu bihaazaa masalaa; kazaalika yudillul laahu mai yashaaa’u wa yahdee mai yashaaa’; wa maa ya’lamu junooda rabbika illaa hoo; wa maa hiya illaa zikraa lil bashar"
      },
      {
        arabic: "كَلّا وَالقَمَرِ",
        en: "But no! By the moon,",
        ur: "کیوں نہیں قسم ہے چاند کی۔",
        trans: "Kallaa walqamar"
      },
      {
        arabic: "وَاللَّيلِ إِذ أَدبَرَ",
        en: "and the night as it retreats,",
        ur: "اور قسم ہے رات کی جب کہ وہ پیٹھ موڑے۔",
        trans: "Wallaili id adbar"
      },
      {
        arabic: "وَالصُّبحِ إِذا أَسفَرَ",
        en: "and the day as it breaks!",
        ur: "اور قسم ہے صبح کی جبکہ وہ روشن ہوجائے۔",
        trans: "Wassub hi izaaa asfar"
      },
      {
        arabic: "إِنَّها لَإِحدَى الكُبَرِ",
        en: "Surely Hell is one of the mightiest catastrophes—",
        ur: "یقینا یہ بہت بڑی باتوں میں سے ایک بات ہے۔",
        trans: "Innahaa la ihdal kubar"
      },
      {
        arabic: "نَذيرًا لِلبَشَرِ",
        en: "a warning to humankind,",
        ur: "خبردار کرنے کے لیے انسانوں کو۔",
        trans: "Nazeeral lilbashar"
      },
      {
        arabic: "لِمَن شاءَ مِنكُم أَن يَتَقَدَّمَ أَو يَتَأَخَّرَ",
        en: "to whichever of you chooses to take the lead or lag behind.",
        ur: "جو بھی تم میں سے چاہے کہ وہ آگے بڑھے یا پیچھے رہ جائے۔",
        trans: "Liman shaaa’a minkum any yataqaddama aw yata akhkhar"
      },
      {
        arabic: "كُلُّ نَفسٍ بِما كَسَبَت رَهينَةٌ",
        en: "Every soul will be detained for what it has done,",
        ur: "ہر جان رہن ہے اس کے عوض جو کچھ کہ اس نے کمایا ہے۔",
        trans: "Kullu nafsim bima kasabat raheenah"
      },
      {
        arabic: "إِلّا أَصحابَ اليَمينِ",
        en: "except the people of the right,",
        ur: "سوائے ان لوگوں کے جو داہنے والے ہوں گے۔",
        trans: "Illaaa as haabal yameen"
      },
      {
        arabic: "في جَنّاتٍ يَتَساءَلونَ",
        en: "who will be in Gardens, asking one another",
        ur: "وہ جنتوں میں ہوں گے پوچھتے ہوں گے۔",
        trans: "Fee jannaatiny yata saaa’aloon"
      },
      {
        arabic: "عَنِ المُجرِمينَ",
        en: "about the wicked ˹who will then be asked˺:",
        ur: "گنہگاروں کے بارے میں۔",
        trans: "‘Anil mujrimeen"
      },
      {
        arabic: "ما سَلَكَكُم في سَقَرَ",
        en: "“What has landed you in Hell?”",
        ur: "تم لوگوں کو کس چیز نے جہنم میں ڈالا ؟",
        trans: "Maa salakakum fee saqar"
      },
      {
        arabic: "قالوا لَم نَكُ مِنَ المُصَلّينَ",
        en: "They will reply, “We were not of those who prayed,",
        ur: "وہ کہیں گے کہ ہم نماز پڑھنے والوں میں سے نہیں تھے۔",
        trans: "Qaaloo lam naku minal musalleen"
      },
      {
        arabic: "وَلَم نَكُ نُطعِمُ المِسكينَ",
        en: "nor did we feed the poor.",
        ur: "اور نہ ہم مسکین کو کھانا کھلاتے تھے۔",
        trans: "Wa lam naku nut’imul miskeen"
      },
      {
        arabic: "وَكُنّا نَخوضُ مَعَ الخائِضينَ",
        en: "We used to indulge ˹in falsehood˺ along with others,",
        ur: "اور ہم کٹ حجتیاں کرنے والوں کے ساتھ مل کر کٹ حجتیاں کیا کرتے تھے۔",
        trans: "Wa kunnaa nakhoodu ma’al khaaa’ideen"
      },
      {
        arabic: "وَكُنّا نُكَذِّبُ بِيَومِ الدّينِ",
        en: "and deny the Day of Judgment,",
        ur: "اور (سب سے بڑھ کر یہ کہ) ہم جزاء وسزا کے دن کا انکار کرتے رہے۔",
        trans: "Wa kunnaa nukazzibu bi yawmid Deen"
      },
      {
        arabic: "حَتّىٰ أَتانَا اليَقينُ",
        en: "until the inevitable came to us.”",
        ur: "یہاں تک کہ ہمیں موت نے آلیا۔",
        trans: "Hattaaa ataanal yaqeen"
      },
      {
        arabic: "فَما تَنفَعُهُم شَفاعَةُ الشّافِعينَ",
        en: "So the pleas of intercessors will be of no benefit to them.",
        ur: "تو اب ان کے لیے نفع بخش نہیں ہوگی شفاعت کرنے والوں کی کوئی شفاعت۔",
        trans: "Famaa tanfa’uhum shafaa’atush shaafi’een"
      },
      {
        arabic: "فَما لَهُم عَنِ التَّذكِرَةِ مُعرِضينَ",
        en: "Now, what is the matter with them that they are turning away from the reminder,",
        ur: "تو انہیں کیا ہوگیا ہے کہ یہ اس یاد دہانی (قرآن) سے اعراض کرنے والے بنے ہوئے ہیں ؟",
        trans: "Famaa lahum ‘anittazkirati mu’rideen"
      },
      {
        arabic: "كَأَنَّهُم حُمُرٌ مُستَنفِرَةٌ",
        en: "as if they were spooked zebras",
        ur: "گویا وہ بدکے ہوئے جنگلی گدھے ہیں۔",
        trans: "Ka annahum humurum mustanfirah"
      },
      {
        arabic: "فَرَّت مِن قَسوَرَةٍ",
        en: "fleeing from a lion?",
        ur: "جو شیر سے ڈر کر بھاگ پڑے ہیں۔",
        trans: "Farrat min qaswarah"
      },
      {
        arabic: "بَل يُريدُ كُلُّ امرِئٍ مِنهُم أَن يُؤتىٰ صُحُفًا مُنَشَّرَةً",
        en: "In fact, each one of them wishes to be given a ˹personal˺ letter ˹from Allah˺ for all ˹to read˺.",
        ur: "بلکہ ان میں سے ہر شخص چاہتا ہے کہ اس کو پکڑا دیے جائیں کھلے صحیفے۔",
        trans: "Bal yureedu kullum ri’im minhum any yu’taa suhufam munashsharah"
      },
      {
        arabic: "كَلّا ۖ بَل لا يَخافونَ الآخِرَةَ",
        en: "But no! In fact, they do not fear the Hereafter.",
        ur: "ہرگز نہیں ! اصل بات یہ ہے کہ وہ آخرت کا خوف نہیں رکھتے۔",
        trans: "Kallaa bal laa yakhaafoonal aakhirah"
      },
      {
        arabic: "كَلّا إِنَّهُ تَذكِرَةٌ",
        en: "Enough! Surely this ˹Quran˺ is a reminder.",
        ur: "ہرگز نہیں ! یہ تو بس ایک یاد دہانی ہے۔",
        trans: "Kallaaa innahoo tazkirah"
      },
      {
        arabic: "فَمَن شاءَ ذَكَرَهُ",
        en: "So let whoever wills be mindful of it.",
        ur: "اب جو چاہے اس سے نصیحت اخذ کرلے۔",
        trans: "Fa man shaaa’a zakarah"
      },
      {
        arabic: "وَما يَذكُرونَ إِلّا أَن يَشاءَ اللَّهُ ۚ هُوَ أَهلُ التَّقوىٰ وَأَهلُ المَغفِرَةِ",
        en: "But they cannot do so unless Allah wills. He ˹alone˺ is worthy to be feared and entitled to forgive.",
        ur: "اور یہ لوگ نصیحت اخذ نہیں کریں گے مگر یہ کہ اللہ ہی ایسا چاہے۔ وہی ڈرنے کے لائق ہے اور وہی مغفرت کا مجاز۔",
        trans: "Wa maa yazkuroona illaaa any yashaaa’al laah; Huwa ahlut taqwaa wa ahlul maghfirah"
      },
    ];

    const readTab = document.getElementById('read-tab');
    const translateTab = document.getElementById('translate-tab');
    const langSelect = document.getElementById('language');
    const langWrapper = document.getElementById('languageSelector');
    let showTransliteration = false;
    let showTranslation = false;
    let currentAyahIndex = 0;

    // Favorites and Bookmarks storage
    let favoritedAyahs = JSON.parse(localStorage.getItem('favoritedAyahs')) || [];
    let bookmarkedAyahs = JSON.parse(localStorage.getItem('bookmarkedAyahs')) || [];

    function isFavorite(index) {
      return favoritedAyahs.some(ayah => ayah.surah === 74 && ayah.ayah === index + 1);
    }

    function toggleFavorite(index) {
      const ayahObj = { surah: 74, ayah: index + 1 };
      if (isFavorite(index)) {
        favoritedAyahs = favoritedAyahs.filter(ayah => !(ayah.surah === 74 && ayah.ayah === index + 1));
      } else {
        favoritedAyahs.push(ayahObj);
      }
      localStorage.setItem('favoritedAyahs', JSON.stringify(favoritedAyahs));
      renderReadTab();
      renderTranslation();
    }

    function isBookmarked(index) {
      return bookmarkedAyahs.some(ayah => ayah.surah === 74 && ayah.ayah === index + 1);
    }

    function toggleBookmark(index) {
      const ayahObj = { surah: 74, ayah: index + 1 };
      if (isBookmarked(index)) {
        bookmarkedAyahs = bookmarkedAyahs.filter(ayah => !(ayah.surah === 74 && ayah.ayah === index + 1));
      } else {
        bookmarkedAyahs.push(ayahObj);
      }
      localStorage.setItem('bookmarkedAyahs', JSON.stringify(bookmarkedAyahs));
      renderReadTab();
      renderTranslation();
    }

    // Language options with display names
    const languages = [
      { value: 'en', name: 'English: Dr. Mustafa Khattab' },
      { value: 'ur', name: 'Urdu: Dr. Israr Ahmed' }
      // Add more languages here in the future, e.g., { value: 'ar', name: 'Arabic' }
    ];

    // Populate language selector with sorted options
    function populateLanguageSelector() {
      // Sort languages alphabetically by name
      languages.sort((a, b) => a.name.localeCompare(b.name));
      
      // Clear existing options
      langSelect.innerHTML = '';
      
      // Add sorted options
      languages.forEach(lang => {
        const option = document.createElement('option');
        option.value = lang.value;
        option.textContent = lang.name;
        langSelect.appendChild(option);
      });
    }

    // Load Arabic verses
    function renderReadTab() {
      readTab.innerHTML = '';
      const lang = langSelect.value;
      ayahs.forEach((ayah, index) => {
        const div = document.createElement('div');
        div.className = 'ayah';
        let transliterationHTML = '';
        if (showTransliteration && ayah.trans) {
          transliterationHTML = `<div class="transliteration">${ayah.trans}</div>`;
        }
        let translationHTML = '';
        if (showTranslation) {
          translationHTML = `<div class="translation ${lang}">${ayah[lang]}</div>`;
        }
        div.innerHTML = `
          <div class="ayah-number">Verse ${index + 1}</div>
          <div class="arabic">${ayah.arabic}<span class="verse-icon">۝</span></div>
          ${transliterationHTML}
          ${translationHTML}
          <button class="favorite-btn" onclick="toggleFavorite(${index})">${isFavorite(index) ? favoriteSVG : unfavoriteSVG}</button>
          <button class="bookmark-btn" onclick="toggleBookmark(${index})">${isBookmarked(index) ? bookmarkedSVG : unbookmarkedSVG}</button>
          <svg class="share-icon" onclick="openShareModal(${index})" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
          </svg>
        `;
        readTab.appendChild(div);
      });
    }

    function renderTranslation() {
      const lang = langSelect.value;
      translateTab.innerHTML = '';
      ayahs.forEach((ayah, index) => {
        const div = document.createElement('div');
        div.className = `ayah translation ${lang}`;
        div.innerHTML = `
          <div class="ayah-number">Verse ${index + 1}</div>
          <div class="translation ${lang}">${ayah[lang]}<span class="verse-icon">۝</span></div>
          <button class="favorite-btn" onclick="toggleFavorite(${index})">${isFavorite(index) ? favoriteSVG : unfavoriteSVG}</button>
          <button class="bookmark-btn" onclick="toggleBookmark(${index})">${isBookmarked(index) ? bookmarkedSVG : unbookmarkedSVG}</button>
          <svg class="share-icon" onclick="openShareModal(${index})" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
          </svg>
        `;
        translateTab.appendChild(div);
      });
    }

    let currentEmbedSrc = "https://archive.org/embed/074_20260102"; // Default for saadalghamdi

    function changeReciter() {
      const reciter = document.getElementById('reciter').value;
      const playButton = document.getElementById('playButton');

      // Define your reciter embed sources (Archive.org embed links)
      const reciterEmbeds = {
        saadalghamdi: "https://archive.org/embed/074_20260102",
        // Add more reciters here as needed, e.g., anotherreciter: "https://archive.org/embed/another_id"
      };

      // Get the correct embed URL for the selected reciter
      const newSrc = reciterEmbeds[reciter];

      if (newSrc) {
        currentEmbedSrc = newSrc;
        // Show the play button
        playButton.style.display = 'block';
      } else {
        alert("Embed source not available for this reciter.");
        playButton.style.display = 'none';
      }
    }

    function playAudio() {
      // Show the modal with the embed iframe
      const modal = document.getElementById('audioModal');
      const iframe = modal.querySelector('iframe');
      iframe.src = currentEmbedSrc;
      modal.style.display = 'flex';
    }

    function closeModal() {
      const modal = document.getElementById('audioModal');
      modal.style.display = 'none';
    }

    function switchTab(tab) {
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tabs button')[tab === 'read' ? 0 : 1].classList.add('active');

      if (tab === 'read') {
        readTab.classList.remove('hidden');
        translateTab.classList.add('hidden');
        langWrapper.classList.add('hidden');
        renderReadTab();
      } else {
        readTab.classList.add('hidden');
        translateTab.classList.remove('hidden');
        langWrapper.classList.remove('hidden');
        renderTranslation();
      }
    }

    function goToVerse() {
      const verseNumber = parseInt(document.getElementById('verse-number').value);
      if (isNaN(verseNumber) || verseNumber < 1 || verseNumber > 56) {
        alert('Please enter a valid verse number between 1 and 56.');
        return;
      }

      // Determine which tab is active
      const activeTab = readTab.classList.contains('hidden') ? translateTab : readTab;
      const ayahs = activeTab.querySelectorAll('.ayah');

      if (ayahs[verseNumber - 1]) {
        ayahs[verseNumber - 1].scrollIntoView({ behavior: 'smooth' });

        // Highlight the verse temporarily
        ayahs[verseNumber - 1].style.backgroundColor = '#005f4a';
        setTimeout(() => {
          ayahs[verseNumber - 1].style.backgroundColor = '';
        }, 2000);
      }
    }

    function setThemeIcon() {
      const icon = document.getElementById('theme-icon');
      icon.classList.remove('rotate');
      void icon.offsetWidth;
      icon.classList.add('rotate');
      icon.src = document.body.classList.contains('dark-mode')
        ? "sun.png"
        : "moon.png";
      icon.alt = document.body.classList.contains('dark-mode')
        ? "Switch to light mode"
        : "Switch to dark mode";
    }

    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
      setThemeIcon();
    }

    function toggleMenu() {
      const navLinks = document.querySelector('.nav-links');
      navLinks.classList.toggle('active');
    }

    function toggleTransliteration() {
      showTransliteration = !showTransliteration;
      const toggleButton = document.getElementById('transliteration-toggle');
      if (showTransliteration) {
        toggleButton.textContent = 'Hide Transliteration';
        toggleButton.classList.add('active');
      } else {
        toggleButton.textContent = 'Show Transliteration';
        toggleButton.classList.remove('active');
      }
      renderReadTab();
    }

    function toggleTranslation() {
      showTranslation = !showTranslation;
      const toggleButton = document.getElementById('translation-toggle');
      if (showTranslation) {
        toggleButton.textContent = 'Hide Translation';
        toggleButton.classList.add('active');
        langWrapper.classList.remove('hidden');
      } else {
        toggleButton.textContent = 'Show Translation';
        toggleButton.classList.remove('active');
        langWrapper.classList.add('hidden');
      }
      renderReadTab();
    }

    function changeLanguage() {
      renderReadTab();
      renderTranslation();
    }

        // Scroll to Top functionality
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // Share functions
    function openShareModal(index) {
      currentAyahIndex = index;
      document.getElementById('includeTransliteration').checked = false;
      document.getElementById('includeTranslation').checked = false;
      document.getElementById('languageSelectDiv').style.display = 'none';
      document.getElementById('shareMessage').style.display = 'none';
      document.getElementById('shareModal').style.display = 'flex';
    }

    function toggleLanguageSelect() {
      const includeTranslation = document.getElementById('includeTranslation').checked;
      document.getElementById('languageSelectDiv').style.display = includeTranslation ? 'block' : 'none';
    }

    function closeShareModal() {
      document.getElementById('shareModal').style.display = 'none';
    }

    function generateAndCopyText() {
      const ayah = ayahs[currentAyahIndex];
      let text = `Surah Al-Muddaththir\nVerse ${currentAyahIndex + 1}\n\nArabic:\n${ayah.arabic}\n`;

      if (document.getElementById('includeTransliteration').checked && ayah.trans) {
        text += `\nTransliteration:\n${ayah.trans}\n`;
      }

      if (document.getElementById('includeTranslation').checked) {
        const lang = document.getElementById('shareLanguage').value;
        text += `\nTranslation (${lang === 'en' ? 'English' : 'Urdu'}):\n${ayah[lang]}\n`;
      }

      text += `\nhttps://adil43534.github.io/Muslimbro1400.com/`;

      const shareMessage = document.getElementById('shareMessage');
      navigator.clipboard.writeText(text).then(() => {
        shareMessage.textContent = 'Text copied to clipboard!';
        shareMessage.style.color = '#007b5e';
        shareMessage.style.display = 'block';
        setTimeout(() => {
          closeShareModal();
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy text: ', err);
        shareMessage.textContent = 'Failed to copy text. Please try again.';
        shareMessage.style.color = '#d9534f';
        shareMessage.style.display = 'block';
      });
    }

    // Show/hide scroll to top button and update progress bar based on scroll position
    window.addEventListener('scroll', () => {
      const scrollToTopBtn = document.getElementById('scrollToTop');
      if (window.pageYOffset > 300) {
        scrollToTopBtn.classList.add('show');
      } else {
        scrollToTopBtn.classList.remove('show');
      }

      // Update progress bar
      const progressBar = document.getElementById('progress-bar');
      const totalHeight = document.body.scrollHeight - window.innerHeight;
      const progress = (window.pageYOffset / totalHeight) * 100;
      progressBar.style.width = progress + '%';
    });

    window.onload = () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
      }
      setThemeIcon();
      populateLanguageSelector();
      renderReadTab();
      // Ensure modal is hidden on load
      document.getElementById('audioModal').classList.add('hidden');

      // Check for ayah parameter in URL and navigate to it
      const urlParams = new URLSearchParams(window.location.search);
      const ayah = urlParams.get('ayah');
      if (ayah) {
        document.getElementById('verse-number').value = ayah;
        goToVerse();
      }
    };
  </script>
</body>
</html>
