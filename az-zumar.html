<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Surah Az-Zumar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600&family=Noto+Naskh+Arabic:wght@400;700&family=Noto+Nastaliq+Urdu:wght@400;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.png" type="image/x-icon">

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      color: #333;
      transition: background-color 0.5s ease, color 0.5s ease;
    }
    body.dark-mode {
      background-color: #1a1a1a;
      color: #e0e0e0;
    }

    #progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 4px;
      background-color: #007b5e;
      z-index: 1001;
      transition: width 0.25s ease;
    }

    .dark-mode #progress-bar {
      background-color: #0c8;
    }

    .navbar {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background-color: #f0f0f0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: background-color 0.5s ease;
    }

    .dark-mode .navbar { background-color: #2c2c2c; }

    .nav-links {
      display: flex;
      align-items: center;
    }

    .nav-links a {
      margin-left: 1rem;
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }

    .dark-mode .nav-links a { color: #e0e0e0; }

    .nav-links a:hover {
      color: #007b5e;
    }

    .theme-toggle {
      cursor: pointer;
      margin-left: 1rem;
      background-color: transparent;
      border: none;
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
    }

    .theme-toggle img {
      width: 24px;
      height: 24px;
      transition: transform 0.3s ease;
    }

    .theme-toggle img.rotate {
      transform: rotate(180deg);
    }

    .menu-toggle {
      display: none;
      cursor: pointer;
      background-color: transparent;
      border: none;
      padding: 0.4rem 0.6rem;
    }

    .menu-toggle img {
      width: 24px;
      height: 24px;
    }

    .container {
      padding: 2rem 1rem;
      max-width: 800px;
      margin: auto;
    }

    .surah-info {
      text-align: center;
      margin-bottom: 2rem;
    }

    .surah-info h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      font-family: 'Amiri', serif;
    }

    .meaning {
      font-style: italic;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    .dark-mode .meaning { color: #bbb; }

    .meta {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #888;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    .dark-mode .meta { color: #aaa; }

    .bismillah {
      margin-top: 1.5rem;
      font-size: 1.5rem;
      color: #007b5e;
      font-weight: bold;
      font-family: 'Amiri', serif;
    }

    .dark-mode .bismillah { color: #0c8; }

    .ayah {
      background-color: #fff;
      padding: 1rem 3rem 1rem 1rem;
      margin-bottom: 1rem;
      border-left: 4px solid #007b5e;
      border-radius: 6px;
      position: relative;
    }

    .dark-mode .ayah {
      background-color: #2c2c2c;
      border-left-color: #0c8;
    }

    .ayah-number {
      font-size: 0.9rem;
      color: #007b5e;
      margin-bottom: 0.4rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .ayah-number { color: #0c8; }

    .arabic {
      font-size: 1.8rem;
      text-align: right;
      direction: rtl;
      font-family: 'Amiri', serif;
    }

    .translation {
      margin-top: 0.5rem;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .translation.ur {
      text-align: right;
      direction: rtl;
      font-family: 'Noto Nastaliq Urdu', serif;
    }

    .dark-mode .translation { color: #ccc; }

    .transliteration {
      margin-top: 0.5rem;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      font-style: italic;
    }

    .dark-mode .transliteration { color: #ccc; }

    .verse-icon {
      display: inline-block;
      font-size: 1.2rem;
      margin-left: 0.5rem;
      vertical-align: middle;
      color: #007b5e;
      font-family: 'Amiri', serif;
    }

    .dark-mode .verse-icon {
      color: #0c8;
    }

    .share-icon {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 24px;
      height: 24px;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .share-icon:hover {
      opacity: 1;
    }

    .favorite-btn, .bookmark-btn {
      position: absolute;
      top: 1rem;
      width: 24px;
      height: 24px;
      background: none;
      border: none;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .favorite-btn:hover, .bookmark-btn:hover {
      opacity: 1;
    }

    .favorite-btn {
      right: 4rem;
    }

    .bookmark-btn {
      right: 7rem;
    }

    .share-icon {
      right: 1rem;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }

    .navigation a {
      color: #007b5e;
      text-decoration: none;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .navigation a { color: #0c8; }

    .tabs {
      display: flex;
      justify-content: center;
      margin-top: 1rem;
      gap: 1rem;
    }

    .tab-button {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .tab-button.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .tab-button {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .tab-button.active {
      background-color: #0c8;
    }

    .transliteration-toggle {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
      margin-top: 1rem;
    }

    .transliteration-toggle.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .transliteration-toggle {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .transliteration-toggle.active {
      background-color: #0c8;
    }

    .lang-select, .audio-select {
      margin-top: 1rem;
      text-align: center;
    }

    .lang-select label, .audio-select label {
      margin-right: 0.5rem;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
    }

    .dark-mode .lang-select label, .dark-mode .audio-select label {
      color: #e0e0e0;
    }

    .lang-select select, .audio-select select {
      padding: 0.6rem 2rem 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23007b5e" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .audio-select button {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
      margin-left: 0.5rem;
    }

    .audio-select button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .audio-select button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .dark-mode .audio-select button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    .dark-mode .lang-select select, .dark-mode .audio-select select {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%230c8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
    }

    .lang-select select:hover, .audio-select select:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .lang-select select:hover, .dark-mode .audio-select select:hover {
      border-color: #0a6;
    }

    .lang-select select:focus, .audio-select select:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .lang-select select:focus, .dark-mode .audio-select select:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .hidden { display: none; }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 90%;
      position: relative;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .dark-mode .modal-content {
      background-color: #2c2c2c;
      color: #e0e0e0;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
    }

    .modal-content iframe {
      border-radius: 8px;
      border: none;
      width: 100%;
      height: 60px;
    }

    .modal-content button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #007b5e;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    .modal-content button:hover {
      background-color: #005f4a;
    }

    .dark-mode .modal-content button {
      background-color: #0c8;
    }

    .dark-mode .modal-content button:hover {
      background-color: #0a6;
    }

        .go-to-verse {
      margin-top: 1rem;
      text-align: center;
    }

    .go-to-verse label {
      margin-right: 0.5rem;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
    }

    .dark-mode .go-to-verse label {
      color: #e0e0e0;
    }

    .go-to-verse input {
      padding: 0.6rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      width: 80px;
      text-align: center;
    }

    .dark-mode .go-to-verse input {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
    }

    .go-to-verse input:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .go-to-verse input:hover {
      border-color: #0a6;
    }

    .go-to-verse input:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .go-to-verse input:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .go-to-verse button {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
      margin-left: 0.5rem;
    }

    .go-to-verse button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .go-to-verse button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .dark-mode .go-to-verse button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    /* Scroll to Top Button */
    #scrollToTop {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background-color: #007b5e;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease, background-color 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    #scrollToTop:hover {
      background-color: #005f4a;
    }

    #scrollToTop.show {
      opacity: 1;
      visibility: visible;
    }

    .dark-mode #scrollToTop {
      background-color: #0c8;
    }

    .dark-mode #scrollToTop:hover {
      background-color: #0a6;
    }

    /* Share Modal Styling */
    .modal-content h2 {
      margin-top: 0;
      color: #333;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .modal-content h2 {
      color: #e0e0e0;
    }

    .modal-content div {
      margin-bottom: 1rem;
      text-align: left;
    }

    .modal-content label {
      display: flex;
      align-items: center;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
      cursor: pointer;
    }

    .dark-mode .modal-content label {
      color: #e0e0e0;
    }

    .modal-content input[type="checkbox"] {
      margin-right: 0.5rem;
      width: 18px;
      height: 18px;
      border: 2px solid #007b5e;
      border-radius: 4px;
      background-color: #fff;
      cursor: pointer;
      transition: border-color 0.3s ease, background-color 0.3s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .modal-content input[type="checkbox"]:checked {
      background-color: #007b5e;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="12" height="12"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>');
      background-repeat: no-repeat;
      background-position: center;
    }

    .dark-mode .modal-content input[type="checkbox"] {
      background-color: #2c2c2c;
      border-color: #0c8;
    }

    .dark-mode .modal-content input[type="checkbox"]:checked {
      background-color: #0c8;
      border-color: #0c8;
    }

    .modal-content select {
      padding: 0.6rem 2rem 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23007b5e" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .modal-content select:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .modal-content select {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%230c8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
    }

    .dark-mode .modal-content select:hover {
      border-color: #0a6;
    }

    .modal-content select:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .modal-content select:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .modal-content button {
      margin-top: 1rem;
      margin-right: 0.5rem;
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
    }

    .modal-content button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .modal-content button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .modal-content button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    .modal-content input[type="text"] {
      padding: 0.6rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      width: 100%;
      box-sizing: border-box;
    }

    .modal-content input[type="text"]:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .modal-content input[type="text"] {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
    }

    .dark-mode .modal-content input[type="text"]:hover {
      border-color: #0a6;
    }

    .modal-content input[type="text"]:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .modal-content input[type="text"]:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    @media (max-width: 600px) {
      .navbar h1 {
        font-size: 1.25rem;
      }

      .nav-links {
        display: none;
        flex-direction: column;
        width: 100%;
        background-color: #f0f0f0;
        position: absolute;
        top: 60px;
        left: 0;
        padding: 1rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        z-index: 1000;
      }

      .dark-mode .nav-links {
        background-color: #2c2c2c;
      }

      .nav-links.active {
        display: flex;
      }

      .nav-links a {
        margin: 0.5rem 0;
        font-size: 1.1rem;
      }

      .theme-toggle {
        margin: 0;
      }

      .menu-toggle {
        display: block;
      }

      .lang-select select, .audio-select select {
        padding: 0.5rem 1.8rem 0.5rem 0.8rem;
        font-size: 0.9rem;
        background-size: 16px;
      }

      .surah-info h1 {
        font-size: 1.5rem;
      }

      .bismillah {
        font-size: 1.3rem;
      }

      .arabic {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div id="progress-bar"></div>
  <!-- Navbar -->
  <nav class="navbar">
    <h1>MuslimBro1400</h1>
    <button class="menu-toggle" onclick="toggleMenu()">
      <img src="menu.png" alt="Menu" />
    </button>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="quran.html">Quran</a>
      <a href="hadith.html">Hadith</a>
      <a href="islamic-books.html">Islamic Books</a>
      <a href="quran-recitations.html">Quran Recitations</a>
      <a href="about.html">About</a>
      <button class="theme-toggle" onclick="toggleTheme()">
        <img id="theme-icon" src="moon.png" alt="Toggle Theme" title="Toggle light/dark mode" />
      </button>
    </div>
  </nav>

  <!-- Content -->
  <div class="container">
    <div class="surah-info">
      <h1>Surah Az-Zumar (سورة الزمر)</h1>
      <p class="meaning">Meaning: The Troops</p>
      <p class="meta">Mecca - 75 Verses</p>
      
      <div class="audio-select">
        <label for="reciter">Reciter:</label>
        <select id="reciter" onchange="changeReciter()">
          <option value="saadalghamdi">Saad Al Ghamdi</option>
        </select>
        <br><br>
        <button id="playButton" onclick="playAudio()">Play Audio</button>
      </div>
      
      <p class="bismillah">بِسْمِ اللَّهِ الرَّحْمَـٰنِ الرَّحِيمِ</p>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab-button active" onclick="switchTab('read')">Read</button>
        <button class="tab-button" onclick="switchTab('translate')">Translation</button>
      </div>

            <!-- Transliteration Toggle -->
      <button id="transliteration-toggle" class="transliteration-toggle" onclick="toggleTransliteration()">Show Transliteration</button>

               <!-- Go to Verse -->
      <div class="go-to-verse">
        <label for="verse-number">Go to Verse:</label>
        <input type="number" id="verse-number" min="1" max="75">
        <button onclick="goToVerse()">Go</button>
      </div>

      <div class="navigation">
        <a href="sad.html">← Surah Sad</a>
        <a href="ghafir.html">Next: Surah Ghafir →</a>
      </div>

      <!-- Language Selector -->
      <div class="lang-select hidden" id="languageSelector">
        <label for="language">Translation Language:</label>
        <select id="language" onchange="renderTranslation()"></select>
      </div>
    </div>

    <!-- Arabic Tab -->
    <div id="read-tab"></div>

    <!-- Translation Tab -->
    <div id="translate-tab" class="hidden"></div>

    <div class="navigation">
      <a href="sad.html">← Surah Sad</a>
      <a href="ghafir.html">Next: Surah Ghafir →</a>
    </div>
  </div>

  <!-- Audio Modal -->
  <div id="audioModal" class="modal" style="display: none;">
    <div class="modal-content">
      <iframe src="https://archive.org/embed/039_20251228" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen></iframe>
      <br><br>
      <button onclick="closeModal()">Close</button>
    </div>
  </div>

    <!-- Share Modal -->
  <div id="shareModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Share Ayah Options</h2>
      <div>
        <label><input type="checkbox" id="includeTransliteration"> Include Transliteration</label>
      </div>
      <div>
        <label><input type="checkbox" id="includeTranslation" onchange="toggleLanguageSelect()"> Include Translation</label>
      </div>
      <div id="languageSelectDiv" style="display: none;">
        <label for="shareLanguage">Translation Language:</label>
        <select id="shareLanguage">
          <option value="en">English</option>
          <option value="ur">Urdu</option>
        </select>
      </div>
      <br>
      <div id="shareMessage" style="display: none; margin-top: 1rem; text-align: center; font-weight: bold;"></div>
      <button onclick="generateAndCopyText()">Copy Text</button>
      <button onclick="closeShareModal()">Cancel</button>
    </div>
  </div>

    <!-- Scroll to Top Button -->
  <button id="scrollToTop" onclick="scrollToTop()">↑</button>

  <script>
    const unfavoriteSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0c8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`;
    const favoriteSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="#0c8" stroke="#0c8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`;
    const unbookmarkedSVG = `<svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="#00CC88" stroke-width="66.66" stroke-miterlimit="10" d="M166.7,206.7c0-37.3,0-56,7.3-70.3c6.4-12.5,16.6-22.7,29.1-29.1c14.3-7.3,32.9-7.3,70.3-7.3h253.3c37.3,0,56,0,70.3,7.3c12.5,6.4,22.7,16.6,29.1,29.1c7.3,14.3,7.3,32.9,7.3,70.3V700L400,533.3L166.7,700V206.7z"/></svg>`;
    const bookmarkedSVG = `<svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#00CC88" d="M166.7,206.7c0-37.3,0-56,7.3-70.3c6.4-12.5,16.6-22.7,29.1-29.1c14.3-7.3,32.9-7.3,70.3-7.3h253.3c37.3,0,56,0,70.3,7.3c12.5,6.4,22.7,16.6,29.1,29.1c7.3,14.3,7.3,32.9,7.3,70.3V700L400,533.3L166.7,700V206.7z"/></svg>`;

    const ayahs = [
      {
        arabic: "تَنزيلُ الكِتابِ مِنَ اللَّهِ العَزيزِ الحَكيمِ",
        en: "The revelation of this Book is from Allah—the Almighty, All-Wise.",
        ur: ""
      },
      {
        arabic: "إِنّا أَنزَلنا إِلَيكَ الكِتابَ بِالحَقِّ فَاعبُدِ اللَّهَ مُخلِصًا لَهُ الدّينَ",
        en: "Indeed, We have sent down the Book to you ˹O Prophet˺ in truth, so worship Allah ˹alone˺, being sincerely devoted to Him.",
        ur: ""
      },
      {
        arabic: "أَلا لِلَّهِ الدّينُ الخالِصُ ۚ وَالَّذينَ اتَّخَذوا مِن دونِهِ أَولِياءَ ما نَعبُدُهُم إِلّا لِيُقَرِّبونا إِلَى اللَّهِ زُلفىٰ إِنَّ اللَّهَ يَحكُمُ بَينَهُم في ما هُم فيهِ يَختَلِفونَ ۗ إِنَّ اللَّهَ لا يَهدي مَن هُوَ كاذِبٌ كَفّارٌ",
        en: "Indeed, sincere devotion is due ˹only˺ to Allah. As for those who take other lords besides Him, ˹saying,˺ “We worship them only so they may bring us closer to Allah,” surely Allah will judge between all regarding what they differed about. Allah certainly does not guide whoever persists in lying and disbelief.",
        ur: ""
      },
      {
        arabic: "لَو أَرادَ اللَّهُ أَن يَتَّخِذَ وَلَدًا لَاصطَفىٰ مِمّا يَخلُقُ ما يَشاءُ ۚ سُبحانَهُ ۖ هُوَ اللَّهُ الواحِدُ القَهّارُ",
        en: "Had it been Allah’s Will to have offspring, He could have chosen whatever He willed of His creation. Glory be to Him! He is Allah—the One, the Supreme.",
        ur: ""
      },
      {
        arabic: "خَلَقَ السَّماواتِ وَالأَرضَ بِالحَقِّ ۖ يُكَوِّرُ اللَّيلَ عَلَى النَّهارِ وَيُكَوِّرُ النَّهارَ عَلَى اللَّيلِ ۖ وَسَخَّرَ الشَّمسَ وَالقَمَرَ ۖ كُلٌّ يَجري لِأَجَلٍ مُسَمًّى ۗ أَلا هُوَ العَزيزُ الغَفّارُ",
        en: "He created the heavens and the earth for a purpose. He wraps the night around the day, and wraps the day around the night. And He has subjected the sun and the moon, each orbiting for an appointed term. He is truly the Almighty, Most Forgiving.",
        ur: ""
      },
      {
        arabic: "خَلَقَكُم مِن نَفسٍ واحِدَةٍ ثُمَّ جَعَلَ مِنها زَوجَها وَأَنزَلَ لَكُم مِنَ الأَنعامِ ثَمانِيَةَ أَزواجٍ ۚ يَخلُقُكُم في بُطونِ أُمَّهاتِكُم خَلقًا مِن بَعدِ خَلقٍ في ظُلُماتٍ ثَلاثٍ ۚ ذٰلِكُمُ اللَّهُ رَبُّكُم لَهُ المُلكُ ۖ لا إِلٰهَ إِلّا هُوَ ۖ فَأَنّىٰ تُصرَفونَ",
        en: "He created you ˹all˺ from a single soul, then from it He made its mate. And He produced for you four pairs of cattle. He creates you in the wombs of your mothers ˹in stages˺, one development after another, in three layers of darkness. That is Allah—your Lord! All authority belongs to Him. There is no god ˹worthy of worship˺ except Him. How can you then be turned away?",
        ur: ""
      },
      {
        arabic: "إِن تَكفُروا فَإِنَّ اللَّهَ غَنِيٌّ عَنكُم ۖ وَلا يَرضىٰ لِعِبادِهِ الكُفرَ ۖ وَإِن تَشكُروا يَرضَهُ لَكُم ۗ وَلا تَزِرُ وازِرَةٌ وِزرَ أُخرىٰ ۗ ثُمَّ إِلىٰ رَبِّكُم مَرجِعُكُم فَيُنَبِّئُكُم بِما كُنتُم تَعمَلونَ ۚ إِنَّهُ عَليمٌ بِذاتِ الصُّدورِ",
        en: "If you disbelieve, then ˹know that˺ Allah is truly not in need of you, nor does He approve of disbelief from His servants. But if you become grateful ˹through faith˺, He will appreciate that from you. No soul burdened with sin will bear the burden of another. Then to your Lord is your return, and He will inform you of what you used to do. He certainly knows best what is ˹hidden˺ in the heart.",
        ur: ""
      },  
      {
        arabic: "۞ وَإِذا مَسَّ الإِنسانَ ضُرٌّ دَعا رَبَّهُ مُنيبًا إِلَيهِ ثُمَّ إِذا خَوَّلَهُ نِعمَةً مِنهُ نَسِيَ ما كانَ يَدعو إِلَيهِ مِن قَبلُ وَجَعَلَ لِلَّهِ أَندادًا لِيُضِلَّ عَن سَبيلِهِ ۚ قُل تَمَتَّع بِكُفرِكَ قَليلًا ۖ إِنَّكَ مِن أَصحابِ النّارِ",
        en: "When one is touched with hardship, they cry out to their Lord, turning to Him ˹alone˺. But as soon as He showers them with blessings from Him, they ˹totally˺ forget the One they had cried to earlier, and set up equals to Allah to mislead ˹others˺ from His Way. Say, ˹O Prophet,˺ “Enjoy your disbelief for a little while! You will certainly be one of the inmates of the Fire.”",
        ur: ""
      },
      {
        arabic: "أَمَّن هُوَ قانِتٌ آناءَ اللَّيلِ ساجِدًا وَقائِمًا يَحذَرُ الآخِرَةَ وَيَرجو رَحمَةَ رَبِّهِ ۗ قُل هَل يَستَوِي الَّذينَ يَعلَمونَ وَالَّذينَ لا يَعلَمونَ ۗ إِنَّما يَتَذَكَّرُ أُولُو الأَلبابِ",
        en: "˹Are they better˺ or those who worship ˹their Lord˺ devoutly in the hours of the night, prostrating and standing, fearing the Hereafter and hoping for the mercy of their Lord? Say, ˹O Prophet,˺ “Are those who know equal to those who do not know?” None will be mindful ˹of this˺ except people of reason.",
        ur: ""
      },
      {
        arabic: "قُل يا عِبادِ الَّذينَ آمَنُوا اتَّقوا رَبَّكُم ۚ لِلَّذينَ أَحسَنوا في هٰذِهِ الدُّنيا حَسَنَةٌ ۗ وَأَرضُ اللَّهِ واسِعَةٌ ۗ إِنَّما يُوَفَّى الصّابِرونَ أَجرَهُم بِغَيرِ حِسابٍ",
        en: "Say ˹O Prophet, that Allah says˺, “O My servants who believe! Be mindful of your Lord. Those who do good in this world will have a good reward. And Allah’s earth is spacious. Only those who endure patiently will be given their reward without limit.”",
        ur: ""
      },
      {
        arabic: "قُل إِنّي أُمِرتُ أَن أَعبُدَ اللَّهَ مُخلِصًا لَهُ الدّينَ",
        en: "Say, “I am commanded to worship Allah, being sincerely devoted to Him ˹alone˺.",
        ur: ""
      },
      {
        arabic: "وَأُمِرتُ لِأَن أَكونَ أَوَّلَ المُسلِمينَ",
        en: "And I am commanded to be the first of those who submit ˹to His Will˺.”",
        ur: ""
      },
      {
        arabic: "قُل إِنّي أَخافُ إِن عَصَيتُ رَبّي عَذابَ يَومٍ عَظيمٍ",
        en: "Say, “I truly fear—if I were to disobey my Lord—the torment of a tremendous Day.”",
        ur: ""
      },
      {
        arabic: "قُلِ اللَّهَ أَعبُدُ مُخلِصًا لَهُ ديني",
        en: "Say, “It is ˹only˺ Allah that I worship, being sincere in my devotion to Him.",
        ur: ""
      },
      {
        arabic: "فَاعبُدوا ما شِئتُم مِن دونِهِ ۗ قُل إِنَّ الخاسِرينَ الَّذينَ خَسِروا أَنفُسَهُم وَأَهليهِم يَومَ القِيامَةِ ۗ أَلا ذٰلِكَ هُوَ الخُسرانُ المُبينُ",
        en: "Worship then whatever ˹gods˺ you want instead of Him.” Say, “The ˹true˺ losers are those who will lose themselves and their families on Judgment Day. That is indeed the clearest loss.”",
        ur: ""
      },
      {
        arabic: "لَهُم مِن فَوقِهِم ظُلَلٌ مِنَ النّارِ وَمِن تَحتِهِم ظُلَلٌ ۚ ذٰلِكَ يُخَوِّفُ اللَّهُ بِهِ عِبادَهُ ۚ يا عِبادِ فَاتَّقونِ",
        en: "They will have layers of fire above and below them. That is what Allah warns His servants with. So fear Me, O  My servants!",
        ur: ""
      },
      {
        arabic: "وَالَّذينَ اجتَنَبُوا الطّاغوتَ أَن يَعبُدوها وَأَنابوا إِلَى اللَّهِ لَهُمُ البُشرىٰ ۚ فَبَشِّر عِبادِ",
        en: "And those who shun the worship of false gods, turning to Allah ˹alone˺, will have good news. So give good news to My servants ˹O Prophet˺—",
        ur: ""
      },
      {
        arabic: "الَّذينَ يَستَمِعونَ القَولَ فَيَتَّبِعونَ أَحسَنَهُ ۚ أُولٰئِكَ الَّذينَ هَداهُمُ اللَّهُ ۖ وَأُولٰئِكَ هُم أُولُو الأَلبابِ",
        en: "those who listen to what is said and follow the best of it. These are the ones ˹rightly˺ guided by Allah, and these are ˹truly˺ the people of reason.",
        ur: ""
      },
      {
        arabic: "أَفَمَن حَقَّ عَلَيهِ كَلِمَةُ العَذابِ أَفَأَنتَ تُنقِذُ مَن فِي النّارِ",
        en: "What about those against whom the decree of torment has been justified? Is it you ˹O Prophet˺ who will then save those bound for the Fire?",
        ur: ""
      },
      {
        arabic: "لٰكِنِ الَّذينَ اتَّقَوا رَبَّهُم لَهُم غُرَفٌ مِن فَوقِها غُرَفٌ مَبنِيَّةٌ تَجري مِن تَحتِهَا الأَنهارُ ۖ وَعدَ اللَّهِ ۖ لا يُخلِفُ اللَّهُ الميعادَ",
        en: "But those mindful of their Lord will have ˹elevated˺ mansions, built one above the other, under which rivers flow. ˹That is˺ the promise of Allah. ˹And˺ Allah never fails in ˹His˺ promise.",
        ur: ""
      },
      {
        arabic: "أَلَم تَرَ أَنَّ اللَّهَ أَنزَلَ مِنَ السَّماءِ ماءً فَسَلَكَهُ يَنابيعَ فِي الأَرضِ ثُمَّ يُخرِجُ بِهِ زَرعًا مُختَلِفًا أَلوانُهُ ثُمَّ يَهيجُ فَتَراهُ مُصفَرًّا ثُمَّ يَجعَلُهُ حُطامًا ۚ إِنَّ في ذٰلِكَ لَذِكرىٰ لِأُولِي الأَلبابِ",
        en: "Do you not see that Allah sends down rain from the sky—channelling it through streams in the earth—then produces with it crops of various colours, then they dry up and you see them wither, and then He reduces them to chaff? Surely in this is a reminder for people of reason.",
        ur: ""
      },
      {
        arabic: "أَفَمَن شَرَحَ اللَّهُ صَدرَهُ لِلإِسلامِ فَهُوَ عَلىٰ نورٍ مِن رَبِّهِ ۚ فَوَيلٌ لِلقاسِيَةِ قُلوبُهُم مِن ذِكرِ اللَّهِ ۚ أُولٰئِكَ في ضَلالٍ مُبينٍ",
        en: "Can ˹the misguided be like˺ those whose hearts Allah has opened to Islam, so they are enlightened by their Lord? So woe to those whose hearts are hardened at the remembrance of Allah! It is they who are clearly astray.",
        ur: ""
      },
      {
        arabic: "اللَّهُ نَزَّلَ أَحسَنَ الحَديثِ كِتابًا مُتَشابِهًا مَثانِيَ تَقشَعِرُّ مِنهُ جُلودُ الَّذينَ يَخشَونَ رَبَّهُم ثُمَّ تَلينُ جُلودُهُم وَقُلوبُهُم إِلىٰ ذِكرِ اللَّهِ ۚ ذٰلِكَ هُدَى اللَّهِ يَهدي بِهِ مَن يَشاءُ ۚ وَمَن يُضلِلِ اللَّهُ فَما لَهُ مِن هادٍ",
        en: "˹It is˺ Allah ˹Who˺ has sent down the best message—a Book of perfect consistency and repeated lessons—which causes the skin ˹and hearts˺ of those who fear their Lord to tremble, then their skin and hearts soften at the mention of ˹the mercy of˺ Allah. That is the guidance of Allah, through which He guides whoever He wills. But whoever Allah leaves to stray will be left with no guide.",
        ur: ""
      },
      {
        arabic: "أَفَمَن يَتَّقي بِوَجهِهِ سوءَ العَذابِ يَومَ القِيامَةِ ۚ وَقيلَ لِلظّالِمينَ ذوقوا ما كُنتُم تَكسِبونَ",
        en: "Are those who will only have their ˹bare˺ faces to shield themselves from the awful torment on Judgment Day ˹better than those in Paradise˺? It will ˹then˺ be said to the wrongdoers: “Reap what you sowed!”",
        ur: ""
      },
      {
        arabic: "كَذَّبَ الَّذينَ مِن قَبلِهِم فَأَتاهُمُ العَذابُ مِن حَيثُ لا يَشعُرونَ",
        en: "Those before them ˹also˺ rejected ˹the truth˺, then the torment came upon them from where they least expected.",
        ur: ""
      },
      {
        arabic: "فَأَذاقَهُمُ اللَّهُ الخِزيَ فِي الحَياةِ الدُّنيا ۖ وَلَعَذابُ الآخِرَةِ أَكبَرُ ۚ لَو كانوا يَعلَمونَ",
        en: "So Allah made them taste humiliation in this worldly life, but far worse is the punishment of the Hereafter, if only they knew.",
        ur: ""
      },
      {
        arabic: "وَلَقَد ضَرَبنا لِلنّاسِ في هٰذَا القُرآنِ مِن كُلِّ مَثَلٍ لَعَلَّهُم يَتَذَكَّرونَ",
        en: "We have certainly set forth every ˹kind of˺ lesson for people in this Quran, so perhaps they will be mindful.",
        ur: ""
      },
      {
        arabic: "قُرآنًا عَرَبِيًّا غَيرَ ذي عِوَجٍ لَعَلَّهُم يَتَّقونَ ۙ",
        en: "˹It is˺ a Quran ˹revealed˺ in Arabic without any crookedness, so perhaps they will be conscious ˹of Allah˺.",
        ur: ""
      },
      {
        arabic: "ضَرَبَ اللَّهُ مَثَلًا رَجُلًا فيهِ شُرَكاءُ مُتَشاكِسونَ وَرَجُلًا سَلَمًا لِرَجُلٍ هَل يَستَوِيانِ مَثَلًا ۚ الحَمدُ لِلَّهِ ۚ بَل أَكثَرُهُم لا يَعلَمونَ",
        en: "Allah sets forth the parable of a slave owned by several quarrelsome masters, and a slave owned by only one master. Are they equal in condition? Praise be to Allah! In fact, most of them do not know.",
        ur: ""
      },
      {
        arabic: "إِنَّكَ مَيِّتٌ وَإِنَّهُم مَيِّتونَ",
        en: "You ˹O Prophet˺ will certainly die, and they will die too.",
        ur: ""
      },
      {
        arabic: "ثُمَّ إِنَّكُم يَومَ القِيامَةِ عِندَ رَبِّكُم تَختَصِمونَ",
        en: "Then on the Day of Judgment you will ˹all settle your˺ dispute before your Lord.",
        ur: ""
      },
      {
        arabic: "۞ فَمَن أَظلَمُ مِمَّن كَذَبَ عَلَى اللَّهِ وَكَذَّبَ بِالصِّدقِ إِذ جاءَهُ ۚ أَلَيسَ في جَهَنَّمَ مَثوًى لِلكافِرينَ",
        en: "Who then does more wrong than those who lie about Allah and reject the truth after it has reached them? Is Hell not a ˹fitting˺ home for the disbelievers?",
        ur: ""
      },
      {
        arabic: "وَالَّذي جاءَ بِالصِّدقِ وَصَدَّقَ بِهِ ۙ أُولٰئِكَ هُمُ المُتَّقونَ",
        en: "And the one who has brought the truth and those who embrace it—it is they who are the righteous.",
        ur: ""
      },
      {
        arabic: "الَهُم ما يَشاءونَ عِندَ رَبِّهِم ۚ ذٰلِكَ جَزاءُ المُحسِنينَ",
        en: "They will have whatever they desire with their Lord. That is the reward of the good-doers.",
        ur: ""
      },
      {
        arabic: "لِيُكَفِّرَ اللَّهُ عَنهُم أَسوَأَ الَّذي عَمِلوا وَيَجزِيَهُم أَجرَهُم بِأَحسَنِ الَّذي كانوا يَعمَلونَ",
        en: "As such, Allah will absolve them of ˹even˺ the worst of what they did and reward them according to the best of what they used to do.",
        ur: ""
      },
      {
        arabic: "أَلَيسَ اللَّهُ بِكافٍ عَبدَهُ ۖ وَيُخَوِّفونَكَ بِالَّذينَ مِن دونِهِ ۚ وَمَن يُضلِلِ اللَّهُ فَما لَهُ مِن هادٍ",
        en: "Is Allah not sufficient for His servant? Yet they threaten you with other ˹powerless˺ gods besides Him! Whoever Allah leaves to stray will be left with no guide.",
        ur: ""
      },
      {
        arabic: "وَمَن يَهدِ اللَّهُ فَما لَهُ مِن مُضِلٍّ ۗ أَلَيسَ اللَّهُ بِعَزيزٍ ذِي انتِقامٍ",
        en: "And whoever Allah guides, none can lead astray. Is Allah not Almighty, capable of punishment?",
        ur: ""
      },
      {
        arabic: "وَلَئِن سَأَلتَهُم مَن خَلَقَ السَّماواتِ وَالأَرضَ لَيَقولُنَّ اللَّهُ ۚ قُل أَفَرَأَيتُم ما تَدعونَ مِن دونِ اللَّهِ إِن أَرادَنِيَ اللَّهُ بِضُرٍّ هَل هُنَّ كاشِفاتُ ضُرِّهِ أَو أَرادَني بِرَحمَةٍ هَل هُنَّ مُمسِكاتُ رَحمَتِهِ ۚ قُل حَسبِيَ اللَّهُ ۖ عَلَيهِ يَتَوَكَّلُ المُتَوَكِّلونَ",
        en: "If you ask them ˹O Prophet˺ who created the heavens and the earth, they will certainly say, “Allah!” Ask ˹them˺, “Consider then whatever ˹idols˺ you invoke besides Allah: if it was Allah’s Will to harm me, could they undo that harm? Or if He willed ˹some˺ mercy for me, could they withhold His mercy?” Say, “Allah is sufficient for me. In Him ˹alone˺ the faithful put their trust.”",
        ur: ""
      },
      {
        arabic: "قُل يا قَومِ اعمَلوا عَلىٰ مَكانَتِكُم إِنّي عامِلٌ ۖ فَسَوفَ تَعلَمونَ",
        en: "Say, ˹O Prophet,˺ “O my people! Persist in your ways, for I ˹too˺ will persist in mine. You will soon come to know",
        ur: ""
      },
      {
        arabic: "مَن يَأتيهِ عَذابٌ يُخزيهِ وَيَحِلُّ عَلَيهِ عَذابٌ مُقيمٌ",
        en: "who will be visited by a humiliating torment ˹in this life˺ and overwhelmed by an everlasting punishment ˹in the next˺.”",
        ur: ""
      },
      {
        arabic: "إِنّا أَنزَلنا عَلَيكَ الكِتابَ لِلنّاسِ بِالحَقِّ ۖ فَمَنِ اهتَدىٰ فَلِنَفسِهِ ۖ وَمَن ضَلَّ فَإِنَّما يَضِلُّ عَلَيها ۖ وَما أَنتَ عَلَيهِم بِوَكيلٍ",
        en: "Surely We have revealed to you the Book ˹O Prophet˺ with the truth for humanity. So whoever chooses to be guided, it is for their own good. And whoever chooses to stray, it is only to their own loss. You are not a keeper over them.",
        ur: ""
      },
      {
        arabic: "اللَّهُ يَتَوَفَّى الأَنفُسَ حينَ مَوتِها وَالَّتي لَم تَمُت في مَنامِها ۖ فَيُمسِكُ الَّتي قَضىٰ عَلَيهَا المَوتَ وَيُرسِلُ الأُخرىٰ إِلىٰ أَجَلٍ مُسَمًّى ۚ إِنَّ في ذٰلِكَ لَآياتٍ لِقَومٍ يَتَفَكَّرونَ",
        en: "˹It is˺ Allah ˹Who˺ calls back the souls ˹of people˺ upon their death as well as ˹the souls˺ of the living during their sleep. Then He keeps those for whom He has ordained death, and releases the others until ˹their˺ appointed time. Surely in this are signs for people who reflect.",
        ur: ""
      },
      {
        arabic: "أَمِ اتَّخَذوا مِن دونِ اللَّهِ شُفَعاءَ ۚ قُل أَوَلَو كانوا لا يَملِكونَ شَيئًا وَلا يَعقِلونَ",
        en: "Or have they taken others besides Allah as intercessors? Say, ˹O Prophet,˺ “˹Would they do so,˺ even though those ˹idols˺ have neither authority nor intelligence?”",
        ur: ""
      },
      {
        arabic: "قُل لِلَّهِ الشَّفاعَةُ جَميعًا ۖ لَهُ مُلكُ السَّماواتِ وَالأَرضِ ۖ ثُمَّ إِلَيهِ تُرجَعونَ",
        en: "Say, “All intercession belongs to Allah ˹alone˺. To Him belongs the kingdom of the heavens and the earth. Then to Him you will ˹all˺ be returned.”",
        ur: ""
      },
      {
        arabic: "وَإِذا ذُكِرَ اللَّهُ وَحدَهُ اشمَأَزَّت قُلوبُ الَّذينَ لا يُؤمِنونَ بِالآخِرَةِ ۖ وَإِذا ذُكِرَ الَّذينَ مِن دونِهِ إِذا هُم يَستَبشِرونَ",
        en: "Yet when Allah alone is mentioned, the hearts of those who disbelieve in the Hereafter are filled with disgust. But as soon as those ˹gods˺ other than Him are mentioned, they are filled with joy.",
        ur: ""
      },
      {
        arabic: "قُلِ اللَّهُمَّ فاطِرَ السَّماواتِ وَالأَرضِ عالِمَ الغَيبِ وَالشَّهادَةِ أَنتَ تَحكُمُ بَينَ عِبادِكَ في ما كانوا فيهِ يَختَلِفونَ",
        en: "Say, ˹O Prophet,˺ “O Allah—Originator of the heavens and the earth, Knower of the seen and unseen! You will judge between Your servants regarding their differences.”",
        ur: ""
      },
      {
        arabic: "وَلَو أَنَّ لِلَّذينَ ظَلَموا ما فِي الأَرضِ جَميعًا وَمِثلَهُ مَعَهُ لَافتَدَوا بِهِ مِن سوءِ العَذابِ يَومَ القِيامَةِ ۚ وَبَدا لَهُم مِنَ اللَّهِ ما لَم يَكونوا يَحتَسِبونَ",
        en: "Even if the wrongdoers were to possess everything in the world twice over, they would certainly offer it to ransom themselves from the horrible punishment on Judgment Day, for they will see from Allah what they had never expected.",
        ur: ""
      },
      {
        arabic: "وَبَدا لَهُم سَيِّئَاتُ ما كَسَبوا وَحاقَ بِهِم ما كانوا بِهِ يَستَهزِئونَ",
        en: "And the evil ˹consequences˺ of their deeds will unfold before them, and they will be overwhelmed by what they used to ridicule.",
        ur: ""
      },
      {
        arabic: "فَإِذا مَسَّ الإِنسانَ ضُرٌّ دَعانا ثُمَّ إِذا خَوَّلناهُ نِعمَةً مِنّا قالَ إِنَّما أوتيتُهُ عَلىٰ عِلمٍ ۚ بَل هِيَ فِتنَةٌ وَلٰكِنَّ أَكثَرَهُم لا يَعلَمونَ",
        en: "When one is touched with hardship, they cry out to Us ˹alone˺. Then when We shower Our blessings upon them, they say, “I have been granted all this only because of ˹my˺ knowledge.” Not at all! It is ˹no more than˺ a test. But most of them do not know.",
        ur: ""
      },
      {
        arabic: "قَد قالَهَا الَّذينَ مِن قَبلِهِم فَما أَغنىٰ عَنهُم ما كانوا يَكسِبونَ",
        en: "The same had already been said by those ˹destroyed˺ before them, but their ˹worldly˺ gains were of no benefit to them.",
        ur: ""
      },
      {
        arabic: "فَأَصابَهُم سَيِّئَاتُ ما كَسَبوا ۚ وَالَّذينَ ظَلَموا مِن هٰؤُلاءِ سَيُصيبُهُم سَيِّئَاتُ ما كَسَبوا وَما هُم بِمُعجِزينَ",
        en: "So the evil ˹consequences˺ of their deeds overtook them. And the wrongdoers among these ˹pagans˺ will be overtaken by the evil ˹consequences˺ of their deeds. And they will have no escape.",
        ur: ""
      },
      {
        arabic: "أَوَلَم يَعلَموا أَنَّ اللَّهَ يَبسُطُ الرِّزقَ لِمَن يَشاءُ وَيَقدِرُ ۚ إِنَّ في ذٰلِكَ لَآياتٍ لِقَومٍ يُؤمِنونَ",
        en: "Do they not know that Allah gives abundant or limited provisions to whoever He wills? Surely in this are signs for people who believe.",
        ur: ""
      },
      {
        arabic: "۞ قُل يا عِبادِيَ الَّذينَ أَسرَفوا عَلىٰ أَنفُسِهِم لا تَقنَطوا مِن رَحمَةِ اللَّهِ ۚ إِنَّ اللَّهَ يَغفِرُ الذُّنوبَ جَميعًا ۚ إِنَّهُ هُوَ الغَفورُ الرَّحيمُ",
        en: "Say, ˹O Prophet, that Allah says,˺ “O My servants who have exceeded the limits against their souls! Do not lose hope in Allah’s mercy, for Allah certainly forgives all sins. He is indeed the All-Forgiving, Most Merciful.",
        ur: ""
      },
      {
        arabic: "وَأَنيبوا إِلىٰ رَبِّكُم وَأَسلِموا لَهُ مِن قَبلِ أَن يَأتِيَكُمُ العَذابُ ثُمَّ لا تُنصَرونَ",
        en: "Turn to your Lord ˹in repentance˺, and ˹fully˺ submit to Him before the punishment reaches you, ˹for˺ then you will not be helped.",
        ur: ""
      },
      {
        arabic: "وَاتَّبِعوا أَحسَنَ ما أُنزِلَ إِلَيكُم مِن رَبِّكُم مِن قَبلِ أَن يَأتِيَكُمُ العَذابُ بَغتَةً وَأَنتُم لا تَشعُرونَ",
        en: "Follow ˹the Quran,˺ the best of what has been revealed to you from your Lord, before the punishment takes you by surprise while you are unaware,",
        ur: ""
      },
      {
        arabic: "أَن تَقولَ نَفسٌ يا حَسرَتا عَلىٰ ما فَرَّطتُ في جَنبِ اللَّهِ وَإِن كُنتُ لَمِنَ السّاخِرينَ",
        en: "so that no ˹sinful˺ soul will say ˹on Judgment Day˺, ‘Woe to me for neglecting ˹my duties towards˺ Allah, while ridiculing ˹the truth˺.’",
        ur: ""
      },
      {
        arabic: "أَو تَقولَ لَو أَنَّ اللَّهَ هَداني لَكُنتُ مِنَ المُتَّقينَ",
        en: "Or ˹a soul will˺ say, ‘If only Allah had guided me, I would have certainly been one of the righteous.’",
        ur: ""
      },
      {
        arabic: "أَو تَقولَ حينَ تَرَى العَذابَ لَو أَنَّ لي كَرَّةً فَأَكونَ مِنَ المُحسِنينَ",
        en: "Or say, upon seeing the torment, ‘If only I had a second chance, I would have been one of the good-doers.’",
        ur: ""
      },
      {
        arabic: "بَلىٰ قَد جاءَتكَ آياتي فَكَذَّبتَ بِها وَاستَكبَرتَ وَكُنتَ مِنَ الكافِرينَ",
        en: "Not at all! My revelations had already come to you, but you rejected them, acted arrogantly, and were one of the disbelievers.”",
        ur: ""
      },
      {
        arabic: "وَيَومَ القِيامَةِ تَرَى الَّذينَ كَذَبوا عَلَى اللَّهِ وُجوهُهُم مُسوَدَّةٌ ۚ أَلَيسَ في جَهَنَّمَ مَثوًى لِلمُتَكَبِّرينَ",
        en: "On the Day of Judgment you will see those who lied about Allah with their faces gloomy. Is Hell not a ˹fitting˺ home for the arrogant?",
        ur: ""
      },
      {
        arabic: "وَيُنَجِّي اللَّهُ الَّذينَ اتَّقَوا بِمَفازَتِهِم لا يَمَسُّهُمُ السّوءُ وَلا هُم يَحزَنونَ",
        en: "And Allah will deliver those who were mindful ˹of Him˺ to their place of ˹ultimate˺ triumph. No evil will touch them, nor will they grieve.",
        ur: ""
      },
      {
        arabic: "اللَّهُ خالِقُ كُلِّ شَيءٍ ۖ وَهُوَ عَلىٰ كُلِّ شَيءٍ وَكيلٌ",
        en: "Allah is the Creator of all things, and He is the Maintainer of everything.",
        ur: ""
      },
      {
        arabic: "لَهُ مَقاليدُ السَّماواتِ وَالأَرضِ ۗ وَالَّذينَ كَفَروا بِآياتِ اللَّهِ أُولٰئِكَ هُمُ الخاسِرونَ",
        en: "To Him belong the keys ˹of the treasuries˺ of the heavens and the earth. As for those who rejected the signs of Allah, it is they who will be the ˹true˺ losers.",
        ur: ""
      },
      {
        arabic: "قُل أَفَغَيرَ اللَّهِ تَأمُرونّي أَعبُدُ أَيُّهَا الجاهِلونَ",
        en: "Say, ˹O Prophet,˺ “Are you urging me to worship ˹anyone˺ other than Allah, O  ignorant ones?”",
        ur: ""
      },
      {
        arabic: "وَلَقَد أوحِيَ إِلَيكَ وَإِلَى الَّذينَ مِن قَبلِكَ لَئِن أَشرَكتَ لَيَحبَطَنَّ عَمَلُكَ وَلَتَكونَنَّ مِنَ الخاسِرينَ",
        en: "It has already been revealed to you—and to those ˹prophets˺ before you—that if you associate others ˹with Allah˺, your deeds will certainly be void and you will truly be one of the losers.",
        ur: ""
      },
      {
        arabic: "بَلِ اللَّهَ فَاعبُد وَكُن مِنَ الشّاكِرينَ",
        en: "Rather, worship Allah ˹alone˺ and be one of the grateful.",
        ur: ""
      },
      {
        arabic: "وَما قَدَرُوا اللَّهَ حَقَّ قَدرِهِ وَالأَرضُ جَميعًا قَبضَتُهُ يَومَ القِيامَةِ وَالسَّماواتُ مَطوِيّاتٌ بِيَمينِهِ ۚ سُبحانَهُ وَتَعالىٰ عَمّا يُشرِكونَ",
        en: "They have not shown Allah His proper reverence—when on the Day of Judgment the ˹whole˺ earth will be in His Grip, and the heavens will be rolled up in His Right Hand. Glorified and Exalted is He above what they associate ˹with Him˺!",
        ur: ""
      },
      {
        arabic: "وَنُفِخَ فِي الصّورِ فَصَعِقَ مَن فِي السَّماواتِ وَمَن فِي الأَرضِ إِلّا مَن شاءَ اللَّهُ ۖ ثُمَّ نُفِخَ فيهِ أُخرىٰ فَإِذا هُم قِيامٌ يَنظُرونَ",
        en: "The Trumpet will be blown and all those in the heavens and all those on the earth will fall dead, except those Allah wills ˹to spare˺. Then it will be blown again and they will rise up at once, looking on ˹in anticipation˺.",
        ur: ""
      },
      {
        arabic: "وَأَشرَقَتِ الأَرضُ بِنورِ رَبِّها وَوُضِعَ الكِتابُ وَجِيءَ بِالنَّبِيّينَ وَالشُّهَداءِ وَقُضِيَ بَينَهُم بِالحَقِّ وَهُم لا يُظلَمونَ",
        en: "The earth will shine with the light of its Lord, the record ˹of deeds˺ will be laid ˹open˺, the prophets and the witnesses will be brought forward—and judgment will be passed on all with fairness. None will be wronged.",
        ur: ""
      },
      {
        arabic: "وَوُفِّيَت كُلُّ نَفسٍ ما عَمِلَت وَهُوَ أَعلَمُ بِما يَفعَلونَ",
        en: "Every soul will be paid in full for its deeds, for Allah knows best what they have done.",
        ur: ""
      },
      {
        arabic: "وَسيقَ الَّذينَ كَفَروا إِلىٰ جَهَنَّمَ زُمَرًا ۖ حَتّىٰ إِذا جاءوها فُتِحَت أَبوابُها وَقالَ لَهُم خَزَنَتُها أَلَم يَأتِكُم رُسُلٌ مِنكُم يَتلونَ عَلَيكُم آياتِ رَبِّكُم وَيُنذِرونَكُم لِقاءَ يَومِكُم هٰذا ۚ قالوا بَلىٰ وَلٰكِن حَقَّت كَلِمَةُ العَذابِ عَلَى الكافِرينَ",
        en: "Those who disbelieved will be driven to Hell in ˹successive˺ groups. When they arrive there, its gates will be opened and its keepers will ask them: “Did messengers not come to you from among yourselves, reciting to you the revelations of your Lord and warning you of the coming of this Day of yours?” The disbelievers will cry, “Yes ˹indeed˺! But the decree of torment has come to pass against the disbelievers.”",
        ur: ""
      },
      {
        arabic: "قيلَ ادخُلوا أَبوابَ جَهَنَّمَ خالِدينَ فيها ۖ فَبِئسَ مَثوَى المُتَكَبِّرينَ",
        en: "It will be said to them, “Enter the gates of Hell, to stay there forever.” What an evil home for the arrogant!",
        ur: ""
      },
      {
        arabic: "وَسيقَ الَّذينَ اتَّقَوا رَبَّهُم إِلَى الجَنَّةِ زُمَرًا ۖ حَتّىٰ إِذا جاءوها وَفُتِحَت أَبوابُها وَقالَ لَهُم خَزَنَتُها سَلامٌ عَلَيكُم طِبتُم فَادخُلوها خالِدينَ",
        en: "And those who were mindful of their Lord will be led to Paradise in ˹successive˺ groups. When they arrive at its ˹already˺ open gates, its keepers will say, “Peace be upon you! You have done well, so come in, to stay forever.”",
        ur: ""
      },
      {
        arabic: "وَقالُوا الحَمدُ لِلَّهِ الَّذي صَدَقَنا وَعدَهُ وَأَورَثَنَا الأَرضَ نَتَبَوَّأُ مِنَ الجَنَّةِ حَيثُ نَشاءُ ۖ فَنِعمَ أَجرُ العامِلينَ",
        en: "The righteous will say, “Praise be to Allah Who has fulfilled His promise to us, and made us inherit the ˹everlasting˺ land to settle in Paradise wherever we please.” How excellent is the reward of those who work ˹righteousness˺!",
        ur: ""
      },
      {
        arabic: "وَتَرَى المَلائِكَةَ حافّينَ مِن حَولِ العَرشِ يُسَبِّحونَ بِحَمدِ رَبِّهِم ۖ وَقُضِيَ بَينَهُم بِالحَقِّ وَقيلَ الحَمدُ لِلَّهِ رَبِّ العالَمينَ",
        en: "You will see the angels all around the Throne, glorifying the praises of their Lord, for judgment will have been passed on all with fairness. And it will be said, “Praise be to Allah—Lord of all worlds!”",
        ur: ""
      },
    ];

    const readTab = document.getElementById('read-tab');
    const translateTab = document.getElementById('translate-tab');
    const langSelect = document.getElementById('language');
    const langWrapper = document.getElementById('languageSelector');
    let showTransliteration = false;
    let currentAyahIndex = 0;

    // Favorites and Bookmarks storage
    let favoritedAyahs = JSON.parse(localStorage.getItem('favoritedAyahs')) || [];
    let bookmarkedAyahs = JSON.parse(localStorage.getItem('bookmarkedAyahs')) || [];

    function isFavorite(index) {
      return favoritedAyahs.some(ayah => ayah.surah === 39 && ayah.ayah === index + 1);
    }

    function toggleFavorite(index) {
      const ayahObj = { surah: 39, ayah: index + 1 };
      if (isFavorite(index)) {
        favoritedAyahs = favoritedAyahs.filter(ayah => !(ayah.surah === 39 && ayah.ayah === index + 1));
      } else {
        favoritedAyahs.push(ayahObj);
      }
      localStorage.setItem('favoritedAyahs', JSON.stringify(favoritedAyahs));
      renderReadTab();
      renderTranslation();
    }

    function isBookmarked(index) {
      return bookmarkedAyahs.some(ayah => ayah.surah === 39 && ayah.ayah === index + 1);
    }

    function toggleBookmark(index) {
      const ayahObj = { surah: 39, ayah: index + 1 };
      if (isBookmarked(index)) {
        bookmarkedAyahs = bookmarkedAyahs.filter(ayah => !(ayah.surah === 39 && ayah.ayah === index + 1));
      } else {
        bookmarkedAyahs.push(ayahObj);
      }
      localStorage.setItem('bookmarkedAyahs', JSON.stringify(bookmarkedAyahs));
      renderReadTab();
      renderTranslation();
    }

    // Language options with display names
    const languages = [
      { value: 'en', name: 'English: Dr. Mustafa Khattab' },
      { value: 'ur', name: 'Urdu' }
      // Add more languages here in the future, e.g., { value: 'ar', name: 'Arabic' }
    ];

    // Populate language selector with sorted options
    function populateLanguageSelector() {
      // Sort languages alphabetically by name
      languages.sort((a, b) => a.name.localeCompare(b.name));
      
      // Clear existing options
      langSelect.innerHTML = '';
      
      // Add sorted options
      languages.forEach(lang => {
        const option = document.createElement('option');
        option.value = lang.value;
        option.textContent = lang.name;
        langSelect.appendChild(option);
      });
    }

    // Load Arabic verses
    function renderReadTab() {
      readTab.innerHTML = '';
      ayahs.forEach((ayah, index) => {
        const div = document.createElement('div');
        div.className = 'ayah';
        let transliterationHTML = '';
        if (showTransliteration && ayah.trans) {
          transliterationHTML = `<div class="transliteration">${ayah.trans}</div>`;
        }
        div.innerHTML = `
          <div class="ayah-number">Verse ${index + 1}</div>
          <div class="arabic">${ayah.arabic}<span class="verse-icon">۝</span></div>
          ${transliterationHTML}
          <button class="favorite-btn" onclick="toggleFavorite(${index})">${isFavorite(index) ? favoriteSVG : unfavoriteSVG}</button>
          <button class="bookmark-btn" onclick="toggleBookmark(${index})">${isBookmarked(index) ? bookmarkedSVG : unbookmarkedSVG}</button>
          <svg class="share-icon" onclick="openShareModal(${index})" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
          </svg>
        `;
        readTab.appendChild(div);
      });
    }

    function renderTranslation() {
      const lang = langSelect.value;
      translateTab.innerHTML = '';
      ayahs.forEach((ayah, index) => {
        const div = document.createElement('div');
        div.className = `ayah translation ${lang}`;
        div.innerHTML = `
          <div class="ayah-number">Verse ${index + 1}</div>
          <div class="translation">${ayah[lang]}<span class="verse-icon">۝</span></div>
          <button class="favorite-btn" onclick="toggleFavorite(${index})">${isFavorite(index) ? favoriteSVG : unfavoriteSVG}</button>
          <button class="bookmark-btn" onclick="toggleBookmark(${index})">${isBookmarked(index) ? bookmarkedSVG : unbookmarkedSVG}</button>
          <svg class="share-icon" onclick="openShareModal(${index})" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
          </svg>
        `;
        translateTab.appendChild(div);
      });
    }

    let currentEmbedSrc = "https://archive.org/embed/039_20251228"; // Default for saadalghamdi

    function changeReciter() {
      const reciter = document.getElementById('reciter').value;
      const playButton = document.getElementById('playButton');

      // Define your reciter embed sources (Archive.org embed links)
      const reciterEmbeds = {
        saadalghamdi: "https://archive.org/embed/039_20251228",
        // Add more reciters here as needed, e.g., anotherreciter: "https://archive.org/embed/another_id"
      };

      // Get the correct embed URL for the selected reciter
      const newSrc = reciterEmbeds[reciter];

      if (newSrc) {
        currentEmbedSrc = newSrc;
        // Show the play button
        playButton.style.display = 'block';
      } else {
        alert("Embed source not available for this reciter.");
        playButton.style.display = 'none';
      }
    }

    function playAudio() {
      // Show the modal with the embed iframe
      const modal = document.getElementById('audioModal');
      const iframe = modal.querySelector('iframe');
      iframe.src = currentEmbedSrc;
      modal.style.display = 'flex';
    }

    function closeModal() {
      const modal = document.getElementById('audioModal');
      modal.style.display = 'none';
    }

    function switchTab(tab) {
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tabs button')[tab === 'read' ? 0 : 1].classList.add('active');

      if (tab === 'read') {
        readTab.classList.remove('hidden');
        translateTab.classList.add('hidden');
        langWrapper.classList.add('hidden');
        renderReadTab();
      } else {
        readTab.classList.add('hidden');
        translateTab.classList.remove('hidden');
        langWrapper.classList.remove('hidden');
        renderTranslation();
      }
    }

    function goToVerse() {
      const verseNumber = parseInt(document.getElementById('verse-number').value);
      if (isNaN(verseNumber) || verseNumber < 1 || verseNumber > 75) {
        alert('Please enter a valid verse number between 1 and 75.');
        return;
      }

      // Determine which tab is active
      const activeTab = readTab.classList.contains('hidden') ? translateTab : readTab;
      const ayahs = activeTab.querySelectorAll('.ayah');

      if (ayahs[verseNumber - 1]) {
        ayahs[verseNumber - 1].scrollIntoView({ behavior: 'smooth' });

        // Highlight the verse temporarily
        ayahs[verseNumber - 1].style.backgroundColor = '#005f4a';
        setTimeout(() => {
          ayahs[verseNumber - 1].style.backgroundColor = '';
        }, 2000);
      }
    }

    function setThemeIcon() {
      const icon = document.getElementById('theme-icon');
      icon.classList.remove('rotate');
      void icon.offsetWidth;
      icon.classList.add('rotate');
      icon.src = document.body.classList.contains('dark-mode')
        ? "sun.png"
        : "moon.png";
      icon.alt = document.body.classList.contains('dark-mode')
        ? "Switch to light mode"
        : "Switch to dark mode";
    }

    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
      setThemeIcon();
    }

    function toggleMenu() {
      const navLinks = document.querySelector('.nav-links');
      navLinks.classList.toggle('active');
    }

    function toggleTransliteration() {
      showTransliteration = !showTransliteration;
      const toggleButton = document.getElementById('transliteration-toggle');
      if (showTransliteration) {
        toggleButton.textContent = 'Hide Transliteration';
        toggleButton.classList.add('active');
      } else {
        toggleButton.textContent = 'Show Transliteration';
        toggleButton.classList.remove('active');
      }
      renderReadTab();
    }

        // Scroll to Top functionality
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // Share functions
    function openShareModal(index) {
      currentAyahIndex = index;
      document.getElementById('includeTransliteration').checked = false;
      document.getElementById('includeTranslation').checked = false;
      document.getElementById('languageSelectDiv').style.display = 'none';
      document.getElementById('shareMessage').style.display = 'none';
      document.getElementById('shareModal').style.display = 'flex';
    }

    function toggleLanguageSelect() {
      const includeTranslation = document.getElementById('includeTranslation').checked;
      document.getElementById('languageSelectDiv').style.display = includeTranslation ? 'block' : 'none';
    }

    function closeShareModal() {
      document.getElementById('shareModal').style.display = 'none';
    }

    function generateAndCopyText() {
      const ayah = ayahs[currentAyahIndex];
      let text = `Surah Az-Zumar\nVerse ${currentAyahIndex + 1}\n\nArabic:\n${ayah.arabic}\n`;

      if (document.getElementById('includeTransliteration').checked && ayah.trans) {
        text += `\nTransliteration:\n${ayah.trans}\n`;
      }

      if (document.getElementById('includeTranslation').checked) {
        const lang = document.getElementById('shareLanguage').value;
        text += `\nTranslation (${lang === 'en' ? 'English' : 'Urdu'}):\n${ayah[lang]}\n`;
      }

      text += `\nhttps://adil43534.github.io/Muslimbro1400.com/`;

      const shareMessage = document.getElementById('shareMessage');
      navigator.clipboard.writeText(text).then(() => {
        shareMessage.textContent = 'Text copied to clipboard!';
        shareMessage.style.color = '#007b5e';
        shareMessage.style.display = 'block';
        setTimeout(() => {
          closeShareModal();
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy text: ', err);
        shareMessage.textContent = 'Failed to copy text. Please try again.';
        shareMessage.style.color = '#d9534f';
        shareMessage.style.display = 'block';
      });
    }

    // Show/hide scroll to top button and update progress bar based on scroll position
    window.addEventListener('scroll', () => {
      const scrollToTopBtn = document.getElementById('scrollToTop');
      if (window.pageYOffset > 300) {
        scrollToTopBtn.classList.add('show');
      } else {
        scrollToTopBtn.classList.remove('show');
      }

      // Update progress bar
      const progressBar = document.getElementById('progress-bar');
      const totalHeight = document.body.scrollHeight - window.innerHeight;
      const progress = (window.pageYOffset / totalHeight) * 100;
      progressBar.style.width = progress + '%';
    });

    window.onload = () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
      }
      setThemeIcon();
      populateLanguageSelector();
      renderReadTab();
      // Ensure modal is hidden on load
      document.getElementById('audioModal').classList.add('hidden');

      // Check for ayah parameter in URL and navigate to it
      const urlParams = new URLSearchParams(window.location.search);
      const ayah = urlParams.get('ayah');
      if (ayah) {
        document.getElementById('verse-number').value = ayah;
        goToVerse();
      }
    };
  </script>
</body>
</html>
