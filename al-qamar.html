<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>54. Surah: Al-Qamar 1-55 - MuslimBro1400</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600&family=Noto+Naskh+Arabic:wght@400;700&family=Noto+Nastaliq+Urdu:wght@400;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.png" type="image/x-icon">

  <style>
    /* Jameel Noori Nastaleeq Custom Font Face */
    @font-face {
      font-family: 'Jameel Noori Nastaleeq';
      src: url('https://db.onlinewebfonts.com/t/173976378411b22976d3381e494d4ef7.woff2') format('woff2'),
           url('https://db.onlinewebfonts.com/t/173976378411b22976d3381e494d4ef7.woff') format('woff'),
           url('https://db.onlinewebfonts.com/t/173976378411b22976d3381e494d4ef7.ttf') format('truetype');
      font-display: swap;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      color: #333;
      transition: background-color 0.5s ease, color 0.5s ease;
    }
    body.dark-mode {
      background-color: #1a1a1a;
      color: #e0e0e0;
    }

    #progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 4px;
      background-color: #007b5e;
      z-index: 1001;
      transition: width 0.25s ease;
    }

    .dark-mode #progress-bar {
      background-color: #0c8;
    }

    .navbar {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background-color: #f0f0f0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: background-color 0.5s ease;
    }

    .dark-mode .navbar { background-color: #2c2c2c; }

    .nav-links {
      display: flex;
      align-items: center;
    }

    .nav-links a {
      margin-left: 1rem;
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }

    .dark-mode .nav-links a { color: #e0e0e0; }

    .nav-links a:hover {
      color: #007b5e;
    }

    .theme-toggle {
      cursor: pointer;
      margin-left: 1rem;
      background-color: transparent;
      border: none;
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
    }

    .theme-toggle img {
      width: 24px;
      height: 24px;
      transition: transform 0.3s ease;
    }

    .theme-toggle img.rotate {
      transform: rotate(180deg);
    }

    .menu-toggle {
      display: none;
      cursor: pointer;
      background-color: transparent;
      border: none;
      padding: 0.4rem 0.6rem;
    }

    .menu-toggle img {
      width: 24px;
      height: 24px;
    }

    .container {
      padding: 2rem 1rem;
      max-width: 800px;
      margin: auto;
    }

    .surah-info {
      text-align: center;
      margin-bottom: 2rem;
    }

    .surah-info h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      font-family: 'Amiri', serif;
    }

    .meaning {
      font-style: italic;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    .dark-mode .meaning { color: #bbb; }

    .meta {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #888;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    .dark-mode .meta { color: #aaa; }

    .bismillah {
      margin-top: 1.5rem;
      font-size: 1.5rem;
      color: #007b5e;
      font-weight: bold;
      font-family: 'Amiri', serif;
    }

    .dark-mode .bismillah { color: #0c8; }

    .ayah {
      background-color: #fff;
      padding: 3rem 3rem 3rem 3rem;
      margin-bottom: 1rem;
      border-left: 4px solid #007b5e;
      border-radius: 6px;
      position: relative;
    }

    .dark-mode .ayah {
      background-color: #2c2c2c;
      border-left-color: #0c8;
    }

    .ayah-number {
      position: absolute;
      top: 1rem;
      left: 1rem;
      font-size: 0.9rem;
      color: #007b5e;
      text-align: left;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .ayah-number { color: #0c8; }

    .arabic {
      font-size: 1.8rem;
      text-align: right;
      direction: rtl;
      font-family: 'Amiri', serif;
    }

    .translation {
      margin-top: 0.5rem;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      font-size: 1.2rem
    }

    /* Updated Urdu Translation Class */
    .translation.ur {
      text-align: right;
      direction: rtl;
      /* Prioritizing Jameel Noori */
      font-family: 'Jameel Noori Nastaleeq', 'Noto Nastaliq Urdu', serif;
      font-size: 1.5rem;
      line-height: 2.2; /* Increased line-height for Nastaliq script */
      margin-top: 10px;
      color: #444;
    }

    .dark-mode .translation { color: #ccc; }

    .transliteration {
      margin-top: 0.5rem;
      color: #666;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      font-style: italic;
    }

    .dark-mode .transliteration { color: #ccc; }

    .verse-icon {
      display: inline-block;
      font-size: 1.2rem;
      margin-left: 0.5rem;
      vertical-align: middle;
      color: #007b5e;
      font-family: 'Amiri', serif;
    }

    .dark-mode .verse-icon {
      color: #0c8;
    }

    .favorite-btn, .bookmark-btn, .share-icon {
      position: absolute;
      right: 1rem;
      width: 24px;
      height: 24px;
      background: none;
      border: none;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .favorite-btn:hover, .bookmark-btn:hover, .share-icon:hover {
      opacity: 1;
    }

    .share-icon {
      top: 1rem;
    }

    .favorite-btn {
      top: 3rem;
    }

    .bookmark-btn {
      top: 5rem;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }

    .navigation a {
      color: #007b5e;
      text-decoration: none;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .navigation a { color: #0c8; }

    .tabs {
      display: flex;
      justify-content: center;
      margin-top: 1rem;
      gap: 1rem;
    }

    .tab-button {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .tab-button.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .tab-button {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .tab-button.active {
      background-color: #0c8;
    }

    .transliteration-toggle {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
      margin-top: 1rem;
    }

    .transliteration-toggle.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .transliteration-toggle {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .transliteration-toggle.active {
      background-color: #0c8;
    }

    .translation-toggle {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
      margin-top: 1rem;
    }

    .translation-toggle.active {
      background-color: #007b5e;
      color: white;
    }

    .dark-mode .translation-toggle {
      background-color: #444;
      color: #eee;
    }

    .dark-mode .translation-toggle.active {
      background-color: #0c8;
    }

    .lang-select, .audio-select {
      margin-top: 1rem;
      text-align: center;
    }

    .lang-select label, .audio-select label {
      margin-right: 0.5rem;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
    }

    .dark-mode .lang-select label, .dark-mode .audio-select label {
      color: #e0e0e0;
    }

    .lang-select select, .audio-select select {
      padding: 0.6rem 2rem 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23007b5e" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .audio-select button {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
      margin-left: 0.5rem;
    }

    .audio-select button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .audio-select button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .dark-mode .audio-select button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    .dark-mode .lang-select select, .dark-mode .audio-select select {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%230c8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
    }

    .lang-select select:hover, .audio-select select:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .lang-select select:hover, .dark-mode .audio-select select:hover {
      border-color: #0a6;
    }

    .lang-select select:focus, .audio-select select:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .lang-select select:focus, .dark-mode .audio-select select:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .hidden { display: none; }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 90%;
      position: relative;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .dark-mode .modal-content {
      background-color: #2c2c2c;
      color: #e0e0e0;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
    }

    .modal-content iframe {
      border-radius: 8px;
      border: none;
      width: 100%;
      height: 60px;
    }

    .modal-content button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #007b5e;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    .modal-content button:hover {
      background-color: #005f4a;
    }

    .dark-mode .modal-content button {
      background-color: #0c8;
    }

    .dark-mode .modal-content button:hover {
      background-color: #0a6;
    }

        .go-to-verse {
      margin-top: 1rem;
      text-align: center;
    }

    .go-to-verse label {
      margin-right: 0.5rem;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
    }

    .dark-mode .go-to-verse label {
      color: #e0e0e0;
    }

    .go-to-verse input {
      padding: 0.6rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      width: 80px;
      text-align: center;
    }

    .dark-mode .go-to-verse input {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
    }

    .go-to-verse input:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .go-to-verse input:hover {
      border-color: #0a6;
    }

    .go-to-verse input:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .go-to-verse input:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .go-to-verse button {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
      margin-left: 0.5rem;
    }

    .go-to-verse button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .go-to-verse button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .dark-mode .go-to-verse button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    /* Scroll to Top Button */
    #scrollToTop {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background-color: #007b5e;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease, background-color 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    #scrollToTop:hover {
      background-color: #005f4a;
    }

    #scrollToTop.show {
      opacity: 1;
      visibility: visible;
    }

    .dark-mode #scrollToTop {
      background-color: #0c8;
    }

    .dark-mode #scrollToTop:hover {
      background-color: #0a6;
    }

    /* Share Modal Styling */
    .modal-content h2 {
      margin-top: 0;
      color: #333;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }

    .dark-mode .modal-content h2 {
      color: #e0e0e0;
    }

    .modal-content div {
      margin-bottom: 1rem;
      text-align: left;
    }

    .modal-content label {
      display: flex;
      align-items: center;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
      transition: color 0.3s ease;
      cursor: pointer;
    }

    .dark-mode .modal-content label {
      color: #e0e0e0;
    }

    .modal-content input[type="checkbox"] {
      margin-right: 0.5rem;
      width: 18px;
      height: 18px;
      border: 2px solid #007b5e;
      border-radius: 4px;
      background-color: #fff;
      cursor: pointer;
      transition: border-color 0.3s ease, background-color 0.3s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .modal-content input[type="checkbox"]:checked {
      background-color: #007b5e;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23fff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="12" height="12"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>');
      background-repeat: no-repeat;
      background-position: center;
    }

    .dark-mode .modal-content input[type="checkbox"] {
      background-color: #2c2c2c;
      border-color: #0c8;
    }

    .dark-mode .modal-content input[type="checkbox"]:checked {
      background-color: #0c8;
      border-color: #0c8;
    }

    .modal-content select {
      padding: 0.6rem 2rem 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23007b5e" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .modal-content select:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .modal-content select {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%230c8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M7 10l5 5 5-5z"/></svg>');
    }

    .dark-mode .modal-content select:hover {
      border-color: #0a6;
    }

    .modal-content select:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .modal-content select:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    .modal-content button {
      margin-top: 1rem;
      margin-right: 0.5rem;
      padding: 0.6rem 1rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #007b5e;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
    }

    .modal-content button:hover {
      background-color: #005f4a;
      border-color: #005f4a;
      transform: scale(1.02);
    }

    .dark-mode .modal-content button {
      background-color: #0c8;
      border-color: #0c8;
    }

    .modal-content button:hover {
      background-color: #0a6;
      border-color: #0a6;
    }

    .modal-content input[type="text"] {
      padding: 0.6rem;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      border: 2px solid #007b5e;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      width: 100%;
      box-sizing: border-box;
    }

    .modal-content input[type="text"]:hover {
      border-color: #005f4a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: scale(1.02);
    }

    .dark-mode .modal-content input[type="text"] {
      background-color: #2c2c2c;
      border-color: #0c8;
      color: #e0e0e0;
    }

    .dark-mode .modal-content input[type="text"]:hover {
      border-color: #0a6;
    }

    .modal-content input[type="text"]:focus {
      outline: none;
      border-color: #005f4a;
      box-shadow: 0 0 8px rgba(0,123,94,0.3);
    }

    .dark-mode .modal-content input[type="text"]:focus {
      border-color: #0a6;
      box-shadow: 0 0 8px rgba(0,204,136,0.3);
    }

    @media (max-width: 600px) {
      .navbar h1 {
        font-size: 1.25rem;
      }

      .nav-links {
        display: none;
        flex-direction: column;
        width: 100%;
        background-color: #f0f0f0;
        position: absolute;
        top: 60px;
        left: 0;
        padding: 1rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        z-index: 1000;
      }

      .dark-mode .nav-links {
        background-color: #2c2c2c;
      }

      .nav-links.active {
        display: flex;
      }

      .nav-links a {
        margin: 0.5rem 0;
        font-size: 1.1rem;
      }

      .theme-toggle {
        margin: 0;
      }

      .menu-toggle {
        display: block;
      }

      .lang-select select, .audio-select select {
        padding: 0.5rem 1.8rem 0.5rem 0.8rem;
        font-size: 0.9rem;
        background-size: 16px;
      }

      .surah-info h1 {
        font-size: 1.5rem;
      }

      .bismillah {
        font-size: 1.3rem;
      }

      .arabic {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div id="progress-bar"></div>
  <!-- Navbar -->
  <nav class="navbar">
    <h1>MuslimBro1400</h1>
    <button class="menu-toggle" onclick="toggleMenu()">
      <img src="menu.png" alt="Menu" />
    </button>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="quran.html">Quran</a>
      <a href="hadith.html">Hadiths</a>
      <a href="islamic-books.html">Books</a>
      <a href="quran-recitations.html">Recitations</a>
      <a href="islamic-calendar.html">Calendar</a>
      <a href="about.html">About</a>
      <button class="theme-toggle" onclick="toggleTheme()">
        <img id="theme-icon" src="moon.png" alt="Toggle Theme" title="Toggle light/dark mode" />
      </button>
    </div>
  </nav>

  <!-- Content -->
  <div class="container">
    <div class="surah-info">
      <h1>Surah Al-Qamar (سورة القمر)</h1>
      <p class="meaning">Meaning: The Moon</p>
      <p class="meta">Mecca - 55 Verses</p>
      
      <div class="audio-select">
        <label for="reciter">Reciter:</label>
        <select id="reciter" onchange="changeReciter()">
          <option value="saadalghamdi">Saad Al Ghamdi</option>
        </select>
        <br><br>
        <button id="playButton" onclick="playAudio()">Play Audio</button>
      </div>
      
      <p class="bismillah">بِسْمِ اللَّهِ الرَّحْمَـٰنِ الرَّحِيمِ</p>

            <!-- Transliteration Toggle -->
      <button id="transliteration-toggle" class="transliteration-toggle" onclick="toggleTransliteration()">Show Transliteration</button>

      <!-- Translation Toggle -->
      <button id="translation-toggle" class="translation-toggle" onclick="toggleTranslation()">Show Translation</button>

      <!-- Language Selector -->
      <div class="lang-select hidden" id="languageSelector">
        <label for="language">Translation Language:</label>
        <select id="language" onchange="changeLanguage()"></select>
      </div>
      
               <!-- Go to Verse -->
      <div class="go-to-verse">
        <label for="verse-number">Go to Verse:</label>
        <input type="number" id="verse-number" min="1" max="55" placeholder="1-55">
        <button onclick="goToVerse()">Go</button>
      </div>

      <div class="navigation">
        <a href="an-najm.html">← Surah An-Najm</a>
        <a href="ar-rahman.html">Next: Surah Ar-Rahman →</a>
      </div>
    </div>

    <!-- Arabic Tab -->
    <div id="read-tab"></div>

    <!-- Translation Tab -->
    <div id="translate-tab" class="hidden"></div>

    <div class="navigation">
      <a href="an-najm.html">← Surah An-Najm</a>
      <a href="ar-rahman.html">Next: Surah Ar-Rahman →</a>
    </div>
  </div>

  <!-- Audio Modal -->
  <div id="audioModal" class="modal" style="display: none;">
    <div class="modal-content">
      <iframe src="https://archive.org/embed/054_20260102" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen></iframe>
      <br><br>
      <button onclick="closeModal()">Close</button>
    </div>
  </div>

    <!-- Share Modal -->
  <div id="shareModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Share Ayah Options</h2>
      <div>
        <label><input type="checkbox" id="includeTransliteration"> Include Transliteration</label>
      </div>
      <div>
        <label><input type="checkbox" id="includeTranslation" onchange="toggleLanguageSelect()"> Include Translation</label>
      </div>
      <div id="languageSelectDiv" style="display: none;">
        <label for="shareLanguage">Translation Language:</label>
        <select id="shareLanguage">
          <option value="en">English</option>
          <option value="ur">Urdu</option>
        </select>
      </div>
      <br>
      <div id="shareMessage" style="display: none; margin-top: 1rem; text-align: center; font-weight: bold;"></div>
      <button onclick="generateAndCopyText()">Copy Text</button>
      <button onclick="closeShareModal()">Cancel</button>
    </div>
  </div>

    <!-- Scroll to Top Button -->
  <button id="scrollToTop" onclick="scrollToTop()">↑</button>

  <script>
    const unfavoriteSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0c8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`;
    const favoriteSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="#0c8" stroke="#0c8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`;
    const unbookmarkedSVG = `<svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="#00CC88" stroke-width="66.66" stroke-miterlimit="10" d="M166.7,206.7c0-37.3,0-56,7.3-70.3c6.4-12.5,16.6-22.7,29.1-29.1c14.3-7.3,32.9-7.3,70.3-7.3h253.3c37.3,0,56,0,70.3,7.3c12.5,6.4,22.7,16.6,29.1,29.1c7.3,14.3,7.3,32.9,7.3,70.3V700L400,533.3L166.7,700V206.7z"/></svg>`;
    const bookmarkedSVG = `<svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#00CC88" d="M166.7,206.7c0-37.3,0-56,7.3-70.3c6.4-12.5,16.6-22.7,29.1-29.1c14.3-7.3,32.9-7.3,70.3-7.3h253.3c37.3,0,56,0,70.3,7.3c12.5,6.4,22.7,16.6,29.1,29.1c7.3,14.3,7.3,32.9,7.3,70.3V700L400,533.3L166.7,700V206.7z"/></svg>`;

    const ayahs = [
      {
        arabic: "اقتَرَبَتِ السّاعَةُ وَانشَقَّ القَمَرُ",
        en: "The Hour has drawn near and the moon was split ˹in two˺.",
        ur: "قیامت کی گھڑی قریب آچکی اور چاند شق ہوگیا۔",
        trans: "Iqtarabatis Saa’atu wan shaqqal qamar"
      },
      {
        arabic: "وَإِن يَرَوا آيَةً يُعرِضوا وَيَقولوا سِحرٌ مُستَمِرٌّ",
        en: "Yet, whenever they see a sign, they turn away, saying, “Same old magic!”",
        ur: "اور اگر وہ دیکھیں گے کوئی نشانی تب بھی وہ اعراض ہی کریں گے اور کہیں گے یہ تو جادو ہے جو پہلے سے چلا آ رہا ہے۔",
        trans: "Wa iny yaraw aayatany yu’ridoo wa yaqooloo sihrun mustamirr"
      },
      {
        arabic: "وَكَذَّبوا وَاتَّبَعوا أَهواءَهُم ۚ وَكُلُّ أَمرٍ مُستَقِرٌّ",
        en: "They rejected ˹the truth˺ and followed their own desires—and every matter will be settled—",
        ur: "اور انہوں نے تکذیب کی اور اپنی خواہشات کی پیروی کی",
        trans: "Wa kazzaboo wattaba’ooo ahwaaa’ahum; wa kullu amrin mustaqirr"
      },
      {
        arabic: "وَلَقَد جاءَهُم مِنَ الأَنباءِ ما فيهِ مُزدَجَرٌ",
        en: "even though the stories ˹of destroyed nations˺ that have already come to them are a sufficient deterrent.",
        ur: "اور ان کے پاس وہ خبریں آچکی ہیں جن میں تنبیہہ ہے۔",
        trans: "Wa laqad jaaa’ahum minal anbaaa’i maa feehi muzdajar"
      },
      {
        arabic: "حِكمَةٌ بالِغَةٌ ۖ فَما تُغنِ النُّذُرُ",
        en: "˹This Quran is˺ profound ˹in˺ wisdom, but warnings are of no benefit ˹to them˺.",
        ur: "کامل دانائی (کی باتیں) لیکن ان خبردار کرنے والوں سے انہیں کوئی فائدہ نہ پہنچا۔",
        trans: "Hikmatun baalighatun famaa tughnin nuzur"
      },
      {
        arabic: "فَتَوَلَّ عَنهُم ۘ يَومَ يَدعُ الدّاعِ إِلىٰ شَيءٍ نُكُرٍ",
        en: "So turn away from them ˹O Prophet˺. ˹And wait for˺ the Day ˹when˺ the caller will summon ˹them˺ for something horrifying.",
        ur: "تو (اے نبی ﷺ !) آپ ان سے صرفِ نظر کر لیجیے۔",
        trans: "Fatawalla ‘anhum; yawma yad’ud daa’i ilaa shai ‘in nukur"
      },
      {
        arabic: "خُشَّعًا أَبصارُهُم يَخرُجونَ مِنَ الأَجداثِ كَأَنَّهُم جَرادٌ مُنتَشِرٌ",
        en: "With eyes downcast, they will come forth from the graves as if they were swarming locusts,",
        ur: "(اس وقت) ان کی نگاہیں زمین میں گڑی ہوں گی۔ یہ اپنی قبروں سے ایسے نکل کر آئیں گے جیسے ٹڈی ّدَل پھیلا ہوا ہو۔",
        trans: "Khushsha’an absaaruhum yakhrujoona minal ajdaasi ka annahum jaraadum muntashir"
      },  
      {
        arabic: "مُهطِعينَ إِلَى الدّاعِ ۖ يَقولُ الكافِرونَ هٰذا يَومٌ عَسِرٌ",
        en: "rushing towards the caller. The disbelievers will cry, “This is a difficult Day!”",
        ur: "دوڑتے ہوئے آئیں گے پکارنے والے کی طرف۔ کافر کہیں گے کہ یہ تو بڑا سخت دن ہے۔",
        trans: "Muhti’eena ilad daa’i yaqoolul kaafiroona haazaa yawmun ‘asir"
      },
      {
        arabic: "۞ كَذَّبَت قَبلَهُم قَومُ نوحٍ فَكَذَّبوا عَبدَنا وَقالوا مَجنونٌ وَازدُجِرَ",
        en: "Before them, the people of Noah denied ˹the truth˺ and rejected Our servant, calling ˹him˺ insane. And he was intimidated.",
        ur: "جھٹلایا تھا ان سے پہلے نوح کی قوم نے تو انہوں نے ہمارے بندے کو جھٹلایا اور کہا کہ یہ تو مجنون ہے اور اسے جھڑک دیا گیا۔",
        trans: "Kazzabat qablahum qawmu Noohin fakazzaboo ‘abdanaa wa qaaloo majnoonunw wazdujir"
      },
      {
        arabic: "فَدَعا رَبَّهُ أَنّي مَغلوبٌ فَانتَصِر",
        en: "So he cried out to his Lord, “I am helpless, so help ˹me˺!”",
        ur: "تو اس نے پکارا اپنے رب کو کہ میں مغلوب ہوچکا ہوں اب تو ُ ان سے انتقام لے۔",
        trans: "Fada’aa Rabbahooo annee maghloobun fantasir"
      },
      {
        arabic: "فَفَتَحنا أَبوابَ السَّماءِ بِماءٍ مُنهَمِرٍ",
        en: "So We opened the gates of the sky with pouring rain,",
        ur: "تو ہم نے کھول دیے آسمان کے دروازے اس پانی کے ساتھ جو مسلسل چھاجوں برستا رہا۔",
        trans: "Fafatahnaaa abwaabas samaaa’i bi maaa’in munhamir"
      },
      {
        arabic: "وَفَجَّرنَا الأَرضَ عُيونًا فَالتَقَى الماءُ عَلىٰ أَمرٍ قَد قُدِرَ",
        en: "and caused the earth to burst with springs, so the waters met for a fate already set.",
        ur: "اور ہم نے زمین کو پھاڑ کر چشمے ہی چشمے کردیا تو وہ سارا پانی مل گیا ایک ایسے کام کے لیے جس کا فیصلہ ہوچکا تھا۔",
        trans: "Wa fajjarnal arda ‘uyoonan faltaqal maaa’u ‘alaaa amrin qad qudir"
      },
      {
        arabic: "وَحَمَلناهُ عَلىٰ ذاتِ أَلواحٍ وَدُسُرٍ",
        en: "We carried him on that ˹Ark made˺ of planks and nails,",
        ur: "اور ہم نے اسے سوار کردیا اس (کشتی) پر جو تختوں اور کیلوں سے بنی تھی۔",
        trans: "Wa hamalnaahu ‘alaa zaati alwaahinw wa dusur"
      },
      {
        arabic: "تَجري بِأَعيُنِنا جَزاءً لِمَن كانَ كُفِرَ",
        en: "sailing under Our ˹watchful˺ Eyes—a ˹fair˺ punishment on behalf of the one ˹they˺ denied.",
        ur: "جو چل رہی تھی ہماری نگاہوں کے سامنے یہ بدلہ تھا اس شخص کے لیے جس کی ناقدری کی گئی تھی۔",
        trans: "Tajree bi a’yuninaa jazaaa’an liman kaana kufir"
      },
      {
        arabic: "وَلَقَد تَرَكناها آيَةً فَهَل مِن مُدَّكِرٍ",
        en: "We certainly left this as a sign. So is there anyone who will be mindful?",
        ur: "اور ہم نے اسے چھوڑ دیا ایک نشانی کے طور پر تو ہے کوئی نصیحت حاصل کرنے والا",
        trans: "Wa laqat taraknaahaa aayatan fahal min muddakir"
      },
      {
        arabic: "فَكَيفَ كانَ عَذابي وَنُذُرِ",
        en: "Then how ˹dreadful˺ were My punishment and warnings!",
        ur: "تو کیسا رہا میرا عذاب اور میرا خبردار کرنا",
        trans: "Fakaifa kaana ‘azaabee wa nuzur"
      },
      {
        arabic: "وَلَقَد يَسَّرنَا القُرآنَ لِلذِّكرِ فَهَل مِن مُدَّكِرٍ",
        en: "And We have certainly made the Quran easy to remember. So is there anyone who will be mindful?",
        ur: "اور ہم نے قرآن کو آسان کردیا ہے نصیحت اخذ کرنے کے لیے تو ہے کوئی نصیحت حاصل کرنے والا",
        trans: "Wa laqad yassarnal Qur’aana liz zikri fahal min muddakir"
      },
      {
        arabic: "كَذَّبَت عادٌ فَكَيفَ كانَ عَذابي وَنُذُرِ",
        en: "’Ȃd ˹also˺ rejected ˹the truth˺. Then how ˹dreadful˺ were My punishment and warnings!",
        ur: "جھٹلایا تھا قوم عاد نے بھی تو کیسا رہا میرا عذاب اور میرا خبردار کرنا ؟",
        trans: "Kazzabat ‘Aadun fakaifa kaana ‘azaabee wa nuzur"
      },
      {
        arabic: "إِنّا أَرسَلنا عَلَيهِم ريحًا صَرصَرًا في يَومِ نَحسٍ مُستَمِرٍّ",
        en: "Indeed, We sent against them a furious wind, on a day of unrelenting misery,",
        ur: "ہم نے ان پر مسلط کردی ایک ُ تند و تیز ہوا ایک مسلسل نحوست کے دن میں۔",
        trans: "Innaa arsalnaa ‘alaihim reehan sarsaran fee Yawmi nahsin mustamirr"
      },
      {
        arabic: "تَنزِعُ النّاسَ كَأَنَّهُم أَعجازُ نَخلٍ مُنقَعِرٍ",
        en: "that snatched people up, leaving them like trunks of uprooted palm trees.",
        ur: "وہ لوگوں کو یوں اکھاڑ پھینکتی تھی جیسے وہ کھجور کے تنے ہوں اکھڑی ہوئی جڑوں والے",
        trans: "Tanzi’un naasa ka annahum a’jaazu nakhlin munqa’ir"
      },
      {
        arabic: "فَكَيفَ كانَ عَذابي وَنُذُرِ",
        en: "Then how ˹dreadful˺ were My punishment and warnings!",
        ur: "تو کیسا رہا میرا عذاب اور میرا خبردار کرنا ؟",
        trans: "Fakaifa kaana ‘azaabee wa nuzur"
      },
      {
        arabic: "وَلَقَد يَسَّرنَا القُرآنَ لِلذِّكرِ فَهَل مِن مُدَّكِرٍ",
        en: "And We have certainly made the Quran easy to remember. So is there anyone who will be mindful?",
        ur: "اور ہم نے اس قرآن کو آسان کردیا ہے نصیحت حاصل کرنے کے لیے تو ہے کوئی اس سے نصیحت حاصل کرنے والا",
        trans: "Wa laqad yassarnal Qur’aana liz zikri fahal min muddakir"
      },
      {
        arabic: "كَذَّبَت ثَمودُ بِالنُّذُرِ",
        en: "Thamûd rejected the warnings ˹as well˺,",
        ur: "قومِ ثمود نے بھی جھٹلایا خبردار کرنے والوں کو",
        trans: "Kazzabat Samoodu binnuzur"
      },
      {
        arabic: "فَقالوا أَبَشَرًا مِنّا واحِدًا نَتَّبِعُهُ إِنّا إِذًا لَفي ضَلالٍ وَسُعُرٍ",
        en: "arguing, “How can we follow one ˹average˺ human being from among us? We would then truly be misguided and insane.",
        ur: "انہوں نے کہا : کیا ہم اپنے میں سے ہی ایک بشر کی پیروی کریں ؟ پھر تو یقیناہم پڑجائیں گے گمراہی میں اور آگ میں۔",
        trans: "Faqaalooo a’ basharan minnaa waahidan nattabi’uhooo innaa izal lafee dalaalinw wa su’ur"
      },
      {
        arabic: "أَأُلقِيَ الذِّكرُ عَلَيهِ مِن بَينِنا بَل هُوَ كَذّابٌ أَشِرٌ",
        en: "Has the revelation been sent down ˹only˺ to him out of ˹all of˺ us? In fact, he is a boastful liar.”",
        ur: "کیا یہ ذکر ہمارے مابین اسی پر القا کیا گیا ہے ؟ بلکہ یہ انتہائی جھوٹا اور شیخی خورا ہے۔",
        trans: "‘A ulqiyaz zikru ‘alaihi min baininaa bal huwa kazzaabun ashir"
      },
      {
        arabic: "سَيَعلَمونَ غَدًا مَنِ الكَذّابُ الأَشِرُ",
        en: "˹It was revealed to Ṣâliḥ,˺ “They will soon know who the boastful liar is.",
        ur: "جلد ہی انہیں معلوم ہوجائے گا کہ کون انتہائی جھوٹا اور شیخی خورا ہے",
        trans: "Sa-ya’lamoona ghadan manil kazzaabul ashir"
      },
      {
        arabic: "إِنّا مُرسِلُو النّاقَةِ فِتنَةً لَهُم فَارتَقِبهُم وَاصطَبِر",
        en: "We are sending the she-camel as a test for them. So watch them ˹closely˺, and have patience.",
        ur: "ہم بھیجے دیتے ہیں اونٹنی کو ان کی آزمائش کے لیے تو آپ ؑ انتظار کیجیے ان کے بارے میں اور صبر کیجیے۔",
        trans: "Innaa mursilun naaqati fitnatan lahum fartaqibhum wastabir"
      },
      {
        arabic: "وَنَبِّئهُم أَنَّ الماءَ قِسمَةٌ بَينَهُم ۖ كُلُّ شِربٍ مُحتَضَرٌ",
        en: "And tell them that the ˹drinking˺ water must be divided between them ˹and her˺, each taking a turn to drink ˹every other day˺.”",
        ur: "اور انہیں بتا دیجیے کہ اب پانی ان کے مابین تقسیم ہوگا ہر پینے کی باری پر حاضری ہوگی۔",
        trans: "Wa nabbi’hum annal maaa’a qismatun bainahum kullu shirbin muhtadar"
      },
      {
        arabic: "فَنادَوا صاحِبَهُم فَتَعاطىٰ فَعَقَرَ",
        en: "But they roused a companion of theirs, so he dared to kill ˹her˺.",
        ur: "تو انہوں نے پکارا اپنے ایک ساتھی کو پس اس نے ہاتھ بڑھایا اور اس کی کونچیں کاٹ دیں۔",
        trans: "Fa naadaw saahibahum fa ta’aataa fa ‘aqar"
      },
      {
        arabic: "فَكَيفَ كانَ عَذابي وَنُذُرِ",
        en: "Then how ˹dreadful˺ were My punishment and warnings!",
        ur: "پھر کیسا رہا میرا عذاب اور میرا خبردار کرنا ؟",
        trans: "Fakaifa kaana ‘azaabee wa nuzur"
      },
      {
        arabic: "إِنّا أَرسَلنا عَلَيهِم صَيحَةً واحِدَةً فَكانوا كَهَشيمِ المُحتَظِرِ",
        en: "Indeed, We sent against them ˹only˺ one ˹mighty˺ blast, leaving them like the twigs of fence-builders.",
        ur: "ہم نے ان پر بس ایک ہی چنگھاڑ بھیجی تو وہ باڑھ لگانے والے کی روندی ہوئی باڑھ کی طرح چورا ہو کر رہ گئے",
        trans: "Innaaa arsalnaa ‘alaihim saihatanw waahidatan fakaanoo kahasheemil muhtazir"
      },
      {
        arabic: "وَلَقَد يَسَّرنَا القُرآنَ لِلذِّكرِ فَهَل مِن مُدَّكِرٍ",
        en: "And We have certainly made the Quran easy to remember. So is there anyone who will be mindful?",
        ur: "اور ہم نے تو اس قرآن کو آسان کردیا ہے سمجھنے کے لیے تو ہے کوئی سوچنے سمجھنے والا ؟",
        trans: "Wa laqad yassarnal Qur’aana liz zikri fahal min muddakir"
      },
      {
        arabic: "كَذَّبَت قَومُ لوطٍ بِالنُّذُرِ",
        en: "The people of Lot ˹also˺ rejected the warnings.",
        ur: "لوط ؑ کی قوم نے بھی خبردار کرنے والوں کو جھٹلایا۔",
        trans: "Kazzabat qawmu lootin binnuzur"
      },
      {
        arabic: "إِنّا أَرسَلنا عَلَيهِم حاصِبًا إِلّا آلَ لوطٍ ۖ نَجَّيناهُم بِسَحَرٍ",
        en: "We unleashed upon them a storm of stones. As for ˹the believers of˺ Lot’s family, We delivered them before dawn",
        ur: "ہم نے ان پر بھیج دی ایک ایسی تیز آندھی جس میں پتھر تھے سوائے لوط کے گھر والوں کے۔ ان کو ہم نے نجات دے دی صبح کے وقت۔",
        trans: "Innaa arsalnaa ‘alaihim haasiban illaaa aala Lootin najjainaahum bisahar"
      },
      {
        arabic: "نِعمَةً مِن عِندِنا ۚ كَذٰلِكَ نَجزي مَن شَكَرَ",
        en: "as a blessing from Us. This is how We reward whoever gives thanks.",
        ur: "وہ نعمت تھی ہمارے پاس سے۔ اسی طرح ہم بدلہ دیتے ہیں اس کو جو شکر کرتا ہے۔",
        trans: "Ni’matan min ‘indinaa; kazaalika najzee man shakar"
      },
      {
        arabic: "وَلَقَد أَنذَرَهُم بَطشَتَنا فَتَمارَوا بِالنُّذُرِ",
        en: "He had already warned them of Our ˹crushing˺ blow but they disputed the warnings.",
        ur: "اور لوط ؑ نے ان کو خبردار کردیا تھا ہماری پکڑ سے لیکن انہوں نے شک کیا ان چیزوں پر جن کے بارے میں انہیں خبردار کیا گیا تھا۔",
        trans: "Wa laqad anzarahum batshatanaa fatamaaraw binnuzur"
      },
      {
        arabic: "وَلَقَد راوَدوهُ عَن ضَيفِهِ فَطَمَسنا أَعيُنَهُم فَذوقوا عَذابي وَنُذُرِ",
        en: "And they even demanded his angel-guests from him, so We blinded their eyes. ˹And they were told,˺ “Taste then My punishment and warnings!”",
        ur: "اور انہوں نے اس سے اس کے مہمانوں کو لے جانا چاہا تو ہم نے ان کی آنکھوں کو مٹا دیا تو مزا چکھو اب میرے عذاب کا اور میرے خبردار کرنے کا۔",
        trans: "Wa laqad raawadoohu ‘andaifeehee fatamasnaaa a’yunahum fazooqoo ‘azaabee wa nuzur"
      },
      {
        arabic: "وَلَقَد صَبَّحَهُم بُكرَةً عَذابٌ مُستَقِرٌّ",
        en: "And indeed, by the early morning they were overwhelmed by an unrelenting torment.",
        ur: "اور ان پر صبح ہی صبح آ دھمکا ایک عذاب جو کہ ٹھہر چکا تھا۔",
        trans: "Wa laqad sabbahahum bukratan ‘azaabun mustaqirr"
      },
      {
        arabic: "فَذوقوا عَذابي وَنُذُرِ",
        en: "˹Again they were told,˺ “Taste now My punishment and warnings!”",
        ur: "تو چکھو مزا اب میرے عذاب کا اور میرے خبردار کرنے کا۔",
        trans: "Fazooqoo ‘azaabee wa nuzur"
      },
      {
        arabic: "وَلَقَد يَسَّرنَا القُرآنَ لِلذِّكرِ فَهَل مِن مُدَّكِرٍ",
        en: "And We have certainly made the Quran easy to remember. So is there anyone who will be mindful?",
        ur: "اور ہم نے آسان کردیا ہے قرآن سمجھنے کو تو ہے کوئی سوچنے سمجھنے والا ؟",
        trans: "Wa laqad yassarnal Qur’aana liz zikri fahal min muddakir"
      },
      {
        arabic: "وَلَقَد جاءَ آلَ فِرعَونَ النُّذُرُ",
        en: "And indeed, the warnings ˹also˺ came to the people of Pharaoh.",
        ur: "اسی طرح قوم فرعون کے پاس بھی آئے تھے خبردار کرنے والے۔",
        trans: "Wa laqad jaaa’a Aala Fir’awnan nuzur"
      },
      {
        arabic: "كَذَّبوا بِآياتِنا كُلِّها فَأَخَذناهُم أَخذَ عَزيزٍ مُقتَدِرٍ",
        en: "˹But˺ they rejected all of Our signs, so We seized them with the ˹crushing˺ grip of the Almighty, Most Powerful.",
        ur: "انہوں نے ہماری تمام نشانیوں کو جھٹلا دیا پھر ہم نے انہیں پکڑا ایک زبردست صاحب قدرت کا پکڑنا۔",
        trans: "Kazzaboo bi Aayaatinaa kullihaa fa akhaznaahum akhza ‘azeezim muqtadir"
      },
      {
        arabic: "أَكُفّارُكُم خَيرٌ مِن أُولٰئِكُم أَم لَكُم بَراءَةٌ فِي الزُّبُرِ",
        en: "Now, are you ˹Meccan˺ disbelievers superior to those ˹destroyed peoples˺? Or have you ˹been granted˺ immunity ˹from punishment˺ in divine Books?",
        ur: "(تو اے قریش !) کیا تمہارے کفار اُن (کفار) سے کچھ بہتر ہیں ؟ یا تمہارے لیے سابقہ الہامی کتب میں کوئی فارغ خطی آچکی ہے ؟",
        trans: "‘A kuffaarukum khairun min ulaaa’ikum am lakum baraaa’atun fiz Zubur"
      },
      {
        arabic: "أَم يَقولونَ نَحنُ جَميعٌ مُنتَصِرٌ",
        en: "Or do they say, “We are all ˹a˺ united ˹front˺, bound to prevail.”?",
        ur: "یا یہ کہتے ہیں کہ ہم ایک طاقتور جمعیت ہیں اور بدلہ لینے پر قادر ہیں ؟",
        trans: "Am yaqooloona nahnu jamee’un muntasir"
      },
      {
        arabic: "سَيُهزَمُ الجَمعُ وَيُوَلّونَ الدُّبُرَ",
        en: "˹Soon˺ their united front will be defeated and ˹forced to˺ flee.",
        ur: "عنقریب ان کی جمعیت شکست کھاجائے گی اور وہ پیٹھ پھیر کر بھاگیں گے۔",
        trans: "Sa yuhzamul jam’u wa yuwalloonad dubur"
      },
      {
        arabic: "بَلِ السّاعَةُ مَوعِدُهُم وَالسّاعَةُ أَدهىٰ وَأَمَرُّ",
        en: "Better yet, the Hour is their appointed time—and the Hour will be most catastrophic and most bitter.",
        ur: "بلکہ ان کے اصل وعدے کا وقت تو قیامت ہے اور قیامت بہت بڑی آفت ہے اور بہت زیادہ کڑوی ہے۔",
        trans: "Balis Saa’atu maw’iduhum was Saa’atu adhaa wa amarr"
      },
      {
        arabic: "إِنَّ المُجرِمينَ في ضَلالٍ وَسُعُرٍ",
        en: "Indeed, the wicked are ˹entrenched˺ in misguidance, and ˹are bound for˺ blazes.",
        ur: "یقینا یہ مجرمین گمراہی میں ہیں اور یہ آگ (کے مختلف طبقات) میں ہوں گے۔",
        trans: "Innal mujrimeena fee dalaalinw wa su’ur"
      },
      {
        arabic: "يَومَ يُسحَبونَ فِي النّارِ عَلىٰ وُجوهِهِم ذوقوا مَسَّ سَقَرَ",
        en: "On the Day they will be dragged into the Fire on their faces, ˹they will be told,˺ “Taste the touch of Hell!”",
        ur: "جس دن یہ گھسیٹے جائیں گے آگ میں اپنے چہروں کے بل۔ ان سے کہا جائے گا اب چکھوآگ کی لپٹ کا مزا",
        trans: "Yawma yus-haboona fin Naari ‘alaa wujoohihim zooqoo massa saqar"
      },
      {
        arabic: "إِنّا كُلَّ شَيءٍ خَلَقناهُ بِقَدَرٍ",
        en: "Indeed, We have created everything, perfectly preordained.",
        ur: "یقینا ہم نے ہرچیز ایک اندازے کے مطابق پیدا کی ہے۔",
        trans: "Innaa kulla shai’in khalaqnaahu bi qadar"
      },
      {
        arabic: "وَما أَمرُنا إِلّا واحِدَةٌ كَلَمحٍ بِالبَصَرِ",
        en: "Our command is but a single word, done in the blink of an eye.",
        ur: "اور ہمارا امر تویکبارگی ہوتا ہے جیسے نگاہ کا لپک جانا۔",
        trans: "Wa maaa amrunaaa illaa waahidatun ka lamhin bil basar"
      },
      {
        arabic: "وَلَقَد أَهلَكنا أَشياعَكُم فَهَل مِن مُدَّكِرٍ",
        en: "We have already destroyed the likes of you. So will any ˹of you˺ be mindful?",
        ur: "تو (اے قریش ِمکہ) ہم نے تم جیسے بہت سے لوگوں کو ہلاک کیا ہے تو کوئی ہے اس سے سبق حاصل کرنے والا ؟",
        trans: "Wa laqad ahlaknaaa ashyaa’akum fahal min muddakir"
      },
      {
        arabic: "وَكُلُّ شَيءٍ فَعَلوهُ فِي الزُّبُرِ",
        en: "Everything they have done is ˹listed˺ in ˹their˺ records.",
        ur: "اور وہ تمام اعمال جو ان لوگوں نے کیے ہیں وہ صحیفوں میں محفوظ ہیں۔",
        trans: "Wa kullu shai’in fa’aloohu fiz Zubur"
      },
      {
        arabic: "وَكُلُّ صَغيرٍ وَكَبيرٍ مُستَطَرٌ",
        en: "Every matter, small and large, is written ˹precisely˺.",
        ur: "اور ہر ایک چھوٹی اور بڑی چیز لکھی ہوئی ہے۔",
        trans: "Wa kullu sagheerinw wa kabeerin mustatar"
      },
      {
        arabic: "إِنَّ المُتَّقينَ في جَنّاتٍ وَنَهَرٍ",
        en: "Indeed, the righteous will be amid Gardens and rivers,",
        ur: "یقینا متقین باغات اور نہروں (کے ماحول) میں ہوں گے۔",
        trans: "Innal muttaqeena fee jannaatinw wa nahar"
      },
      {
        arabic: "في مَقعَدِ صِدقٍ عِندَ مَليكٍ مُقتَدِرٍ",
        en: "at the Seat of Honour in the presence of the Most Powerful Sovereign.",
        ur: "بہت اعلیٰ راستی کے مقام میں اس بادشاہ کے پاس جو اقتدارِ مطلق کا مالک ہے۔",
        trans: "Fee maq’adi sidqin ‘inda Maleekin Muqtadir"
      },
    ];

    const readTab = document.getElementById('read-tab');
    const translateTab = document.getElementById('translate-tab');
    const langSelect = document.getElementById('language');
    const langWrapper = document.getElementById('languageSelector');
    let showTransliteration = false;
    let showTranslation = false;
    let currentAyahIndex = 0;

    // Favorites and Bookmarks storage
    let favoritedAyahs = JSON.parse(localStorage.getItem('favoritedAyahs')) || [];
    let bookmarkedAyahs = JSON.parse(localStorage.getItem('bookmarkedAyahs')) || [];

    function isFavorite(index) {
      return favoritedAyahs.some(ayah => ayah.surah === 54 && ayah.ayah === index + 1);
    }

    function toggleFavorite(index) {
      const ayahObj = { surah: 54, ayah: index + 1 };
      if (isFavorite(index)) {
        favoritedAyahs = favoritedAyahs.filter(ayah => !(ayah.surah === 54 && ayah.ayah === index + 1));
      } else {
        favoritedAyahs.push(ayahObj);
      }
      localStorage.setItem('favoritedAyahs', JSON.stringify(favoritedAyahs));
      renderReadTab();
      renderTranslation();
    }

    function isBookmarked(index) {
      return bookmarkedAyahs.some(ayah => ayah.surah === 54 && ayah.ayah === index + 1);
    }

    function toggleBookmark(index) {
      const ayahObj = { surah: 54, ayah: index + 1 };
      if (isBookmarked(index)) {
        bookmarkedAyahs = bookmarkedAyahs.filter(ayah => !(ayah.surah === 54 && ayah.ayah === index + 1));
      } else {
        bookmarkedAyahs.push(ayahObj);
      }
      localStorage.setItem('bookmarkedAyahs', JSON.stringify(bookmarkedAyahs));
      renderReadTab();
      renderTranslation();
    }

    // Language options with display names
    const languages = [
      { value: 'en', name: 'English: Dr. Mustafa Khattab' },
      { value: 'ur', name: 'Urdu: Dr. Israr Ahmed' }
      // Add more languages here in the future, e.g., { value: 'ar', name: 'Arabic' }
    ];

    // Populate language selector with sorted options
    function populateLanguageSelector() {
      // Sort languages alphabetically by name
      languages.sort((a, b) => a.name.localeCompare(b.name));
      
      // Clear existing options
      langSelect.innerHTML = '';
      
      // Add sorted options
      languages.forEach(lang => {
        const option = document.createElement('option');
        option.value = lang.value;
        option.textContent = lang.name;
        langSelect.appendChild(option);
      });
    }

    // Load Arabic verses
    function renderReadTab() {
      readTab.innerHTML = '';
      const lang = langSelect.value;
      ayahs.forEach((ayah, index) => {
        const div = document.createElement('div');
        div.className = 'ayah';
        let transliterationHTML = '';
        if (showTransliteration && ayah.trans) {
          transliterationHTML = `<div class="transliteration">${ayah.trans}</div>`;
        }
        let translationHTML = '';
        if (showTranslation) {
          translationHTML = `<div class="translation ${lang}">${ayah[lang]}</div>`;
        }
        div.innerHTML = `
          <div class="ayah-number">Verse ${index + 1}</div>
          <div class="arabic">${ayah.arabic}<span class="verse-icon">۝</span></div>
          ${transliterationHTML}
          ${translationHTML}
          <button class="favorite-btn" onclick="toggleFavorite(${index})">${isFavorite(index) ? favoriteSVG : unfavoriteSVG}</button>
          <button class="bookmark-btn" onclick="toggleBookmark(${index})">${isBookmarked(index) ? bookmarkedSVG : unbookmarkedSVG}</button>
          <svg class="share-icon" onclick="openShareModal(${index})" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
          </svg>
        `;
        readTab.appendChild(div);
      });
    }

    function renderTranslation() {
      const lang = langSelect.value;
      translateTab.innerHTML = '';
      ayahs.forEach((ayah, index) => {
        const div = document.createElement('div');
        div.className = `ayah translation ${lang}`;
        div.innerHTML = `
          <div class="ayah-number">Verse ${index + 1}</div>
          <div class="translation ${lang}">${ayah[lang]}<span class="verse-icon">۝</span></div>
          <button class="favorite-btn" onclick="toggleFavorite(${index})">${isFavorite(index) ? favoriteSVG : unfavoriteSVG}</button>
          <button class="bookmark-btn" onclick="toggleBookmark(${index})">${isBookmarked(index) ? bookmarkedSVG : unbookmarkedSVG}</button>
          <svg class="share-icon" onclick="openShareModal(${index})" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
          </svg>
        `;
        translateTab.appendChild(div);
      });
    }

    let currentEmbedSrc = "https://archive.org/embed/054_20260102"; // Default for saadalghamdi

    function changeReciter() {
      const reciter = document.getElementById('reciter').value;
      const playButton = document.getElementById('playButton');

      // Define your reciter embed sources (Archive.org embed links)
      const reciterEmbeds = {
        saadalghamdi: "https://archive.org/embed/054_20260102",
        // Add more reciters here as needed, e.g., anotherreciter: "https://archive.org/embed/another_id"
      };

      // Get the correct embed URL for the selected reciter
      const newSrc = reciterEmbeds[reciter];

      if (newSrc) {
        currentEmbedSrc = newSrc;
        // Show the play button
        playButton.style.display = 'block';
      } else {
        alert("Embed source not available for this reciter.");
        playButton.style.display = 'none';
      }
    }

    function playAudio() {
      // Show the modal with the embed iframe
      const modal = document.getElementById('audioModal');
      const iframe = modal.querySelector('iframe');
      iframe.src = currentEmbedSrc;
      modal.style.display = 'flex';
    }

    function closeModal() {
      const modal = document.getElementById('audioModal');
      modal.style.display = 'none';
    }

    function switchTab(tab) {
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tabs button')[tab === 'read' ? 0 : 1].classList.add('active');

      if (tab === 'read') {
        readTab.classList.remove('hidden');
        translateTab.classList.add('hidden');
        langWrapper.classList.add('hidden');
        renderReadTab();
      } else {
        readTab.classList.add('hidden');
        translateTab.classList.remove('hidden');
        langWrapper.classList.remove('hidden');
        renderTranslation();
      }
    }

    function goToVerse() {
      const verseNumber = parseInt(document.getElementById('verse-number').value);
      if (isNaN(verseNumber) || verseNumber < 1 || verseNumber > 55) {
        alert('Please enter a valid verse number between 1 and 55.');
        return;
      }

      // Determine which tab is active
      const activeTab = readTab.classList.contains('hidden') ? translateTab : readTab;
      const ayahs = activeTab.querySelectorAll('.ayah');

      if (ayahs[verseNumber - 1]) {
        ayahs[verseNumber - 1].scrollIntoView({ behavior: 'smooth' });

        // Highlight the verse temporarily
        ayahs[verseNumber - 1].style.backgroundColor = '#005f4a';
        setTimeout(() => {
          ayahs[verseNumber - 1].style.backgroundColor = '';
        }, 2000);
      }
    }

    function setThemeIcon() {
      const icon = document.getElementById('theme-icon');
      icon.classList.remove('rotate');
      void icon.offsetWidth;
      icon.classList.add('rotate');
      icon.src = document.body.classList.contains('dark-mode')
        ? "sun.png"
        : "moon.png";
      icon.alt = document.body.classList.contains('dark-mode')
        ? "Switch to light mode"
        : "Switch to dark mode";
    }

    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
      setThemeIcon();
    }

    function toggleMenu() {
      const navLinks = document.querySelector('.nav-links');
      navLinks.classList.toggle('active');
    }

    function toggleTransliteration() {
      showTransliteration = !showTransliteration;
      const toggleButton = document.getElementById('transliteration-toggle');
      if (showTransliteration) {
        toggleButton.textContent = 'Hide Transliteration';
        toggleButton.classList.add('active');
      } else {
        toggleButton.textContent = 'Show Transliteration';
        toggleButton.classList.remove('active');
      }
      renderReadTab();
    }

    function toggleTranslation() {
      showTranslation = !showTranslation;
      const toggleButton = document.getElementById('translation-toggle');
      if (showTranslation) {
        toggleButton.textContent = 'Hide Translation';
        toggleButton.classList.add('active');
        langWrapper.classList.remove('hidden');
      } else {
        toggleButton.textContent = 'Show Translation';
        toggleButton.classList.remove('active');
        langWrapper.classList.add('hidden');
      }
      renderReadTab();
    }

    function changeLanguage() {
      renderReadTab();
      renderTranslation();
    }

        // Scroll to Top functionality
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // Share functions
    function openShareModal(index) {
      currentAyahIndex = index;
      document.getElementById('includeTransliteration').checked = false;
      document.getElementById('includeTranslation').checked = false;
      document.getElementById('languageSelectDiv').style.display = 'none';
      document.getElementById('shareMessage').style.display = 'none';
      document.getElementById('shareModal').style.display = 'flex';
    }

    function toggleLanguageSelect() {
      const includeTranslation = document.getElementById('includeTranslation').checked;
      document.getElementById('languageSelectDiv').style.display = includeTranslation ? 'block' : 'none';
    }

    function closeShareModal() {
      document.getElementById('shareModal').style.display = 'none';
    }

    function generateAndCopyText() {
      const ayah = ayahs[currentAyahIndex];
      let text = `Surah Al-Qamar\nVerse ${currentAyahIndex + 1}\n\nArabic:\n${ayah.arabic}\n`;

      if (document.getElementById('includeTransliteration').checked && ayah.trans) {
        text += `\nTransliteration:\n${ayah.trans}\n`;
      }

      if (document.getElementById('includeTranslation').checked) {
        const lang = document.getElementById('shareLanguage').value;
        text += `\nTranslation (${lang === 'en' ? 'English' : 'Urdu'}):\n${ayah[lang]}\n`;
      }

      text += `\nhttps://adil43534.github.io/Muslimbro1400.com/`;

      const shareMessage = document.getElementById('shareMessage');
      navigator.clipboard.writeText(text).then(() => {
        shareMessage.textContent = 'Text copied to clipboard!';
        shareMessage.style.color = '#007b5e';
        shareMessage.style.display = 'block';
        setTimeout(() => {
          closeShareModal();
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy text: ', err);
        shareMessage.textContent = 'Failed to copy text. Please try again.';
        shareMessage.style.color = '#d9534f';
        shareMessage.style.display = 'block';
      });
    }

    // Show/hide scroll to top button and update progress bar based on scroll position
    window.addEventListener('scroll', () => {
      const scrollToTopBtn = document.getElementById('scrollToTop');
      if (window.pageYOffset > 300) {
        scrollToTopBtn.classList.add('show');
      } else {
        scrollToTopBtn.classList.remove('show');
      }

      // Update progress bar
      const progressBar = document.getElementById('progress-bar');
      const totalHeight = document.body.scrollHeight - window.innerHeight;
      const progress = (window.pageYOffset / totalHeight) * 100;
      progressBar.style.width = progress + '%';
    });

    window.onload = () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
      }
      setThemeIcon();
      populateLanguageSelector();
      renderReadTab();
      // Ensure modal is hidden on load
      document.getElementById('audioModal').classList.add('hidden');

      // Check for ayah parameter in URL and navigate to it
      const urlParams = new URLSearchParams(window.location.search);
      const ayah = urlParams.get('ayah');
      if (ayah) {
        document.getElementById('verse-number').value = ayah;
        goToVerse();
      }
    };
  </script>
</body>
</html>
